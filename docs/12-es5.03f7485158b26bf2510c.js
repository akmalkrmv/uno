function _createForOfIteratorHelper(n){if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=_unsupportedIterableToArray(n))){var e=0,t=function(){};return{s:t,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i,o=!0,a=!1;return{s:function(){l=n[Symbol.iterator]()},n:function(){var n=l.next();return o=n.done,n},e:function(n){a=!0,i=n},f:function(){try{o||null==l.return||l.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(n,e){if(n){if("string"==typeof n)return _arrayLikeToArray(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(n,e):void 0}}function _arrayLikeToArray(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,l=new Array(e);t<e;t++)l[t]=n[t];return l}function _createSuper(n){return function(){var e,t=_getPrototypeOf(n);if(_isNativeReflectConstruct()){var l=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,l)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(n,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(n):e}function _assertThisInitialized(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function _getPrototypeOf(n){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&_setPrototypeOf(n,e)}function _setPrototypeOf(n,e){return(_setPrototypeOf=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var t=0;t<e.length;t++){var l=e[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function _createClass(n,e,t){return e&&_defineProperties(n.prototype,e),t&&_defineProperties(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"Fe+7":function(n,e,t){"use strict";t.r(e);var l=t("8Y7J"),i=function(){function n(e){_classCallCheck(this,n),this.data=e}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(),o=t("mWqA"),a=function n(e,t){_classCallCheck(this,n),this.dialogRef=e,this.data=t,this.users=[],t&&t.users&&(this.users=t.users)},r=t("mrSG"),u=t("s7LF"),c=t("eIep"),s=t("SxV6"),b=t("DnKK"),d=t("jT/F"),m=function(){function n(e,t,l,i){_classCallCheck(this,n),this.router=e,this.api=t,this.auth=l,this.fileUpload=i,this.name=new u.f("",[u.s.required])}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"create",value:function(){var n=this,e={name:this.name.value};this.photoURL&&(e.photoURL=this.photoURL),this.auth.authorized$.pipe(Object(c.a)((function(t){return n.api.room.createRoom(t,e)}))).pipe(Object(s.a)(),Object(b.a)(this)).subscribe((function(e){return n.router.navigate(["/room/".concat(e)])}))}},{key:"uploadImage",value:function(n){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,l,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n.target).files||!t.files.length){e.next=7;break}return l=new d.a(t.files[0]),e.next=5,this.fileUpload.upload(l);case 5:i=e.sent,this.photoURL=i.url;case 7:case"end":return e.stop()}}),e,this)})))}}]),n}(),f=function n(){_classCallCheck(this,n)},p=t("9cE2"),h=t("007U"),g=t("pMnS"),v=t("XE/z"),y=t("Tj54"),O=t("F9ui"),_=t("SqCe"),w=t("iInd"),C=t("SVse"),k=t("mGvx"),M=t("BSbQ"),x=t("lJxs"),z=function(){function n(e,t,l){_classCallCheck(this,n),this.api=e,this.auth=t,this.createRoom=l}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;this.rooms$=this.auth.authorized$.pipe(Object(c.a)((function(e){return n.api.room.userRooms(e.id)})),Object(x.a)((function(n){return n.map((function(n){return Object.assign(Object.assign({},n),{name:n.name||n.users.map((function(n){return n.name})).join(", ")})}))})))}},{key:"create",value:function(){this.createRoom.create()}}]),n}(),I=t("Ngqg"),P=t("lGQG"),S=t("+/jX"),R=l.xb({encapsulation:0,styles:[[".profile-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.profile-container[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:10px;color:#333;background-color:#ddd;background-size:cover;border-radius:100%;position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center}.profile-container[_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:100%}.profile-container[_ngcontent-%COMP%]   .profile-data__primary[_ngcontent-%COMP%]{font-size:1em}.profile-container[_ngcontent-%COMP%]   .profile-data__secondary[_ngcontent-%COMP%]{font-size:.8em;color:#ccc}"]],data:{}});function j(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,0,"img",[["class","profile-img"]],[[8,"src",4]],null,null,null,null))],null,(function(n,e){n(e,0,0,e.parent.context.$implicit.photoURL)}))}function T(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["groups"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function $(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,19,null,null,null,null,null,null,null)),(n()(),l.zb(1,0,null,null,16,"a",[["class","profile-container mat-list-item mat-focus-indicator"],["mat-list-item",""]],[[2,"mat-list-item-disabled",null],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null],[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Ob(n,6).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i}),O.c,O.a)),l.yb(2,1228800,null,3,_.b,[l.l,l.h,[2,_.e],[2,_.a]],null,null),l.Tb(603979776,4,{_lines:1}),l.Tb(603979776,5,{_avatar:0}),l.Tb(603979776,6,{_icon:0}),l.yb(6,671744,null,0,w.s,[w.p,w.a,C.j],{routerLink:[0,"routerLink"]},null),(n()(),l.zb(7,0,null,2,4,"div",[["class","profile-avatar"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,j)),l.yb(9,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,T)),l.yb(11,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.zb(12,0,null,2,5,"div",[["class","profile-data"]],null,null,null,null,null)),(n()(),l.zb(13,0,null,null,1,"div",[["class","profile-data__primary"]],null,null,null,null,null)),(n()(),l.Xb(14,null,["",""])),(n()(),l.zb(15,0,null,null,2,"div",[["class","profile-data__secondary"]],null,null,null,null,null)),(n()(),l.zb(16,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l.Xb(17,null,["",""])),(n()(),l.zb(18,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,k.b,k.a)),l.yb(19,49152,null,0,M.a,[],null,null)],(function(n,e){n(e,6,0,l.Gb(1,"/room/",e.context.$implicit.id,"")),n(e,9,0,e.context.$implicit.photoURL),n(e,11,0,!e.context.$implicit.photoURL)}),(function(n,e){n(e,1,0,l.Ob(e,2).disabled,l.Ob(e,2)._avatar||l.Ob(e,2)._icon,l.Ob(e,2)._avatar||l.Ob(e,2)._icon,l.Ob(e,6).target,l.Ob(e,6).href),n(e,14,0,e.context.$implicit.name),n(e,17,0,e.context.$implicit.lastMessage),n(e,18,0,l.Ob(e,19).vertical?"vertical":"horizontal",l.Ob(e,19).vertical,!l.Ob(e,19).vertical,l.Ob(e,19).inset)}))}function D(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,18,"mat-nav-list",[["class","room-list wide-list mat-nav-list mat-list-base"],["role","navigation"]],null,null,null,O.d,O.b)),l.yb(1,704512,null,0,_.e,[],null,null),(n()(),l.zb(2,0,null,0,11,"a",[["class","profile-container mat-list-item mat-focus-indicator"],["mat-list-item",""]],[[2,"mat-list-item-disabled",null],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.create()&&l),l}),O.c,O.a)),l.yb(3,1228800,null,3,_.b,[l.l,l.h,[2,_.e],[2,_.a]],null,null),l.Tb(603979776,1,{_lines:1}),l.Tb(603979776,2,{_avatar:0}),l.Tb(603979776,3,{_icon:0}),(n()(),l.zb(7,0,null,2,3,"div",[["class","profile-avatar"]],null,null,null,null,null)),(n()(),l.zb(8,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(9,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["group_add"])),(n()(),l.zb(11,0,null,2,2,"div",[["class","profile-data"]],null,null,null,null,null)),(n()(),l.zb(12,0,null,null,1,"div",[["class","profile-data__primary"]],null,null,null,null,null)),(n()(),l.Xb(-1,null,["+ \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"])),(n()(),l.zb(14,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,k.b,k.a)),l.yb(15,49152,null,0,M.a,[],null,null),(n()(),l.ib(16777216,null,0,2,null,$)),l.yb(17,278528,null,0,C.l,[l.Q,l.M,l.s],{ngForOf:[0,"ngForOf"]},null),l.Pb(131072,C.b,[l.h])],(function(n,e){var t=e.component;n(e,9,0),n(e,17,0,l.Yb(e,17,0,l.Ob(e,18).transform(t.rooms$)))}),(function(n,e){n(e,2,0,l.Ob(e,3).disabled,l.Ob(e,3)._avatar||l.Ob(e,3)._icon,l.Ob(e,3)._avatar||l.Ob(e,3)._icon),n(e,8,0,l.Ob(e,9).inline,"primary"!==l.Ob(e,9).color&&"accent"!==l.Ob(e,9).color&&"warn"!==l.Ob(e,9).color),n(e,14,0,l.Ob(e,15).vertical?"vertical":"horizontal",l.Ob(e,15).vertical,!l.Ob(e,15).vertical,l.Ob(e,15).inset)}))}var X=l.vb("app-room-list",z,(function(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"app-room-list",[],null,null,null,D,R)),l.yb(1,114688,null,0,z,[I.a,P.a,S.a],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),A=t("BTe0"),F=t("9gLZ"),q=t("UhP/"),U=t("YEUz"),L=t("omvX"),Q=l.xb({encapsulation:2,styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],data:{}});function N(n){return l.ac(2,[l.Tb(671088640,1,{_primaryValueBar:0}),(n()(),l.zb(1,0,null,null,4,":svg:svg",[["class","mat-progress-bar-background mat-progress-bar-element"],["focusable","false"],["height","4"],["width","100%"]],null,null,null,null,null)),(n()(),l.zb(2,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(n()(),l.zb(3,0,null,null,1,":svg:pattern",[["height","4"],["patternUnits","userSpaceOnUse"],["width","8"],["x","4"],["y","0"]],[[8,"id",0]],null,null,null,null)),(n()(),l.zb(4,0,null,null,0,":svg:circle",[["cx","2"],["cy","2"],["r","2"]],null,null,null,null,null)),(n()(),l.zb(5,0,null,null,0,":svg:rect",[["height","100%"],["width","100%"]],[[1,"fill",0]],null,null,null,null)),(n()(),l.zb(6,0,null,null,1,"div",[["class","mat-progress-bar-buffer mat-progress-bar-element"]],null,null,null,null,null)),l.yb(7,278528,null,0,C.p,[l.l,l.t,l.E],{ngStyle:[0,"ngStyle"]},null),(n()(),l.zb(8,0,[[1,0],["primaryValueBar",1]],null,1,"div",[["class","mat-progress-bar-primary mat-progress-bar-fill mat-progress-bar-element"]],null,null,null,null,null)),l.yb(9,278528,null,0,C.p,[l.l,l.t,l.E],{ngStyle:[0,"ngStyle"]},null),(n()(),l.zb(10,0,null,null,0,"div",[["class","mat-progress-bar-secondary mat-progress-bar-fill mat-progress-bar-element"]],null,null,null,null,null))],(function(n,e){var t=e.component;n(e,7,0,t._bufferTransform()),n(e,9,0,t._primaryTransform())}),(function(n,e){var t=e.component;n(e,3,0,t.progressbarId),n(e,5,0,t._rectangleFillValue)}))}var E=function(){function n(e){_classCallCheck(this,n),this.room=e}return _createClass(n,[{key:"ngOnInit",value:function(){this.room.create()}}]),n}(),V=l.xb({encapsulation:0,styles:[[".create-room-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]],data:{}});function G(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,4,"div",[["class","create-room-page"]],null,null,null,null,null)),(n()(),l.zb(1,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","query"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,N,Q)),l.yb(2,4374528,null,0,A.b,[l.l,l.z,[2,L.a],[2,A.a]],{mode:[0,"mode"]},null),(n()(),l.zb(3,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),l.Xb(-1,null,["\u0421\u043e\u0437\u0434\u0435\u043c \u043a\u043e\u043c\u043d\u0430\u0442\u0443..."]))],(function(n,e){n(e,2,0,"query")}),(function(n,e){n(e,1,0,"indeterminate"===l.Ob(e,2).mode||"query"===l.Ob(e,2).mode?null:l.Ob(e,2).value,l.Ob(e,2).mode,l.Ob(e,2)._isNoopAnimation)}))}var B=l.vb("ng-component",E,(function(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"ng-component",[],null,null,null,G,V)),l.yb(1,114688,null,0,E,[S.a],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),Y=t("1Xc+"),K=t("Dxy4"),J=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"pictureInPictureEnabled",value:function(){return"pictureInPictureEnabled"in document}},{key:"fullscreen",value:function(){var n=this.videoRef.nativeElement;n.requestFullscreen&&n.requestFullscreen().catch((function(n){return console.log(n)}))}},{key:"pictureInPicture",value:function(){var n=this.videoRef.nativeElement;n.requestPictureInPicture&&n.requestPictureInPicture().catch((function(n){return console.log(n)}))}}]),n}(),H=l.xb({encapsulation:0,styles:[[".flex-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.video-wrapper[_ngcontent-%COMP%]{position:relative}.video-wrapper[_ngcontent-%COMP%], .video-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]{width:100%;height:100%}.video-wrapper[_ngcontent-%COMP%]   .video-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end}.video-wrapper[_ngcontent-%COMP%]   .video-cover[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-end;justify-content:space-between}.video-wrapper[_ngcontent-%COMP%]   .video-cover[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{opacity:.8;padding:1px 5px;border:1px solid hsla(0,0%,100%,.8);background-color:rgba(34,34,34,.4)}.video-wrapper[_ngcontent-%COMP%]   .video-cover[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]   .stream-controls[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:center}.video-wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{width:100%;height:100%}.video-wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{max-width:100%;height:100px}.video-wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;font-size:3em}"]],data:{}});function W(n){return l.ac(0,[(n()(),l.zb(0,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["class","video"],["muted",""]],[[8,"srcObject",0]],null,null,null,null))],null,(function(n,e){n(e,0,0,e.component.connection.stream)}))}function Z(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l.Xb(1,null,[" "," "]))],null,(function(n,e){n(e,1,0,e.component.connection.userName[0].toUpperCase())}))}function nn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,3,"div",[["class","profile-info flex-center"]],null,null,null,null,null)),(n()(),l.zb(1,0,null,null,2,"div",[["class","profile-name flex-center"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,Z)),l.yb(3,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){n(e,3,0,e.component.connection.userName)}),null)}function en(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,4,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.pictureInPicture()&&l),l}),Y.b,Y.a)),l.yb(1,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.zb(2,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(3,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["picture_in_picture"]))],(function(n,e){n(e,3,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).disabled||null,"NoopAnimations"===l.Ob(e,1)._animationMode),n(e,2,0,l.Ob(e,3).inline,"primary"!==l.Ob(e,3).color&&"accent"!==l.Ob(e,3).color&&"warn"!==l.Ob(e,3).color)}))}function tn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,7,"div",[["class","stream-controls"]],null,null,null,null,null)),(n()(),l.zb(1,0,null,null,4,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.fullscreen()&&l),l}),Y.b,Y.a)),l.yb(2,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.zb(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(4,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["fullscreen"])),(n()(),l.ib(16777216,null,null,1,null,en)),l.yb(7,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,4,0),n(e,7,0,t.pictureInPictureEnabled)}),(function(n,e){n(e,1,0,l.Ob(e,2).disabled||null,"NoopAnimations"===l.Ob(e,2)._animationMode),n(e,3,0,l.Ob(e,4).inline,"primary"!==l.Ob(e,4).color&&"accent"!==l.Ob(e,4).color&&"warn"!==l.Ob(e,4).color)}))}function ln(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","progress-bar-inverse mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,N,Q)),l.yb(1,4374528,null,0,A.b,[l.l,l.z,[2,L.a],[2,A.a]],{mode:[0,"mode"]},null)],(function(n,e){n(e,1,0,"indeterminate")}),(function(n,e){n(e,0,0,"indeterminate"===l.Ob(e,1).mode||"query"===l.Ob(e,1).mode?null:l.Ob(e,1).value,l.Ob(e,1).mode,l.Ob(e,1)._isNoopAnimation)}))}function on(n){return l.ac(0,[l.Tb(671088640,1,{videoRef:0}),(n()(),l.zb(1,0,null,null,12,"div",[["class","video-wrapper flex-center"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,W)),l.yb(3,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,nn)),l.yb(5,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.zb(6,0,null,null,7,"div",[["class","video-cover"]],null,null,null,null,null)),(n()(),l.zb(7,0,null,null,4,"div",[["class","info-block"]],null,null,null,null,null)),(n()(),l.zb(8,0,null,null,1,"div",[["class","user-name"]],null,null,null,null,null)),(n()(),l.Xb(9,null,[" "," "])),(n()(),l.ib(16777216,null,null,1,null,tn)),l.yb(11,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,ln)),l.yb(13,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,3,0,t.connection.stream),n(e,5,0,!t.connection.stream),n(e,11,0,t.connection.stream),n(e,13,0,!t.connection.isConnectedOrConnecting)}),(function(n,e){n(e,9,0,e.component.connection.userName)}))}var an=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(),rn=l.xb({encapsulation:0,styles:[[".flex-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.video-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.video-wrapper[_ngcontent-%COMP%]   .mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.video-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]{width:100%;height:100%}.video-wrapper[_ngcontent-%COMP%]   .video-cover[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:flex-end;justify-content:flex-start}.video-wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{width:100%;height:100%}.video-wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{max-width:100%;height:100px}.video-wrapper[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;font-size:3em}.video-wrapper[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{opacity:.8;padding:1px 5px;border:1px solid hsla(0,0%,100%,.8);background-color:rgba(34,34,34,.4)}"]],data:{}});function un(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,0,"video",[["autoplay",""],["class","video"],["id","self-video"],["muted",""]],[[8,"srcObject",0],[2,"mirrored",null]],null,null,null,null))],null,(function(n,e){var t=e.component;n(e,0,0,t.user.stream,t.user.isFrontCamera)}))}function cn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,0,"img",[["class","profile-pic"]],[[8,"src",4]],null,null,null,null))],null,(function(n,e){n(e,0,0,e.component.user.photoURL)}))}function sn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),l.Xb(1,null,["",""]))],null,(function(n,e){n(e,1,0,e.component.user.name[0].toUpperCase())}))}function bn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"div",[["class","profile-name flex-center"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,sn)),l.yb(2,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){n(e,2,0,e.component.user.name)}),null)}function dn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,4,"div",[["class","profile-info flex-center"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,cn)),l.yb(2,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,bn)),l.yb(4,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,2,0,t.user.photoURL),n(e,4,0,!t.user.photoURL)}),null)}function mn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,8,"div",[["class","video-wrapper flex-center"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,un)),l.yb(2,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,dn)),l.yb(4,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.zb(5,0,null,null,3,"div",[["class","video-cover flex-center"]],null,null,null,null,null)),(n()(),l.zb(6,0,null,null,1,"div",[["class","user-name"]],null,null,null,null,null)),(n()(),l.Xb(7,null,["",""])),(n()(),l.zb(8,0,null,null,0,"div",[["class","video-controls flex-center"]],null,null,null,null,null))],(function(n,e){var t=e.component;n(e,2,0,t.user.stream),n(e,4,0,!t.user.stream)}),(function(n,e){n(e,7,0,e.component.user.name)}))}var fn=t("ixTe"),pn=l.xb({encapsulation:0,styles:[[".viewport[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:hidden;overscroll-behavior:none;display:flex}.viewport.vertical[_ngcontent-%COMP%]{flex-direction:column}.viewport.vertical[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:0;width:100%}.viewport.horizontal[_ngcontent-%COMP%]{flex-direction:row}.viewport.horizontal[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:100%;width:0}.viewport.horizontal[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.viewport.animate[_ngcontent-%COMP%]   .bottom-pane[_ngcontent-%COMP%], .viewport.animate[_ngcontent-%COMP%]   .top-pane[_ngcontent-%COMP%]{transition:all .3s ease}.viewport[_ngcontent-%COMP%]   .top-pane[_ngcontent-%COMP%]{flex-wrap:wrap;flex-grow:0;height:100%;width:100%;overflow:auto}.viewport[_ngcontent-%COMP%]   .bottom-pane[_ngcontent-%COMP%]{flex-grow:1;overflow:auto}.viewport[_ngcontent-%COMP%]   .pane-content[_ngcontent-%COMP%]{height:100%}.viewport[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.viewport[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:fixed;z-index:1000;cursor:-webkit-grab;cursor:grab}"]],data:{}});function hn(n){return l.ac(2,[l.Tb(671088640,1,{viewportRef:0}),l.Tb(671088640,2,{topPaneRef:0}),l.Tb(671088640,3,{dividerRef:0}),l.Tb(671088640,4,{bottomPaneRef:0}),l.Tb(671088640,5,{handleRef:0}),(n()(),l.zb(5,0,[[1,0],["viewport",1]],null,10,"div",[],[[8,"className",0],[2,"animate",null]],null,null,null,null)),(n()(),l.zb(6,0,[[2,0],["topPane",1]],null,1,"div",[["class","top-pane"]],null,null,null,null,null)),l.Nb(null,0),(n()(),l.zb(8,0,[[3,0],["divider",1]],null,5,"div",[["class","divider"]],null,null,null,null,null)),(n()(),l.zb(9,0,null,null,4,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,Y.b,Y.a)),l.yb(10,180224,[[5,4],["handle",4]],0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.zb(11,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(12,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["drag_handle"])),(n()(),l.zb(14,0,[[4,0],["bottomPane",1]],null,1,"div",[["class","bottom-pane"]],null,null,null,null,null)),l.Nb(null,1)],(function(n,e){n(e,12,0)}),(function(n,e){var t=e.component;n(e,5,0,l.Gb(1,"viewport ",t.orientation,""),!t.isDragging),n(e,9,0,l.Ob(e,10).disabled||null,"NoopAnimations"===l.Ob(e,10)._animationMode),n(e,11,0,l.Ob(e,12).inline,"primary"!==l.Ob(e,12).color&&"accent"!==l.Ob(e,12).color&&"warn"!==l.Ob(e,12).color)}))}var gn=t("4Fe3"),vn=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"connectionCount",get:function(){return this.user&&this.user.connections?this.user.connections.length:0}}]),n}(),yn=l.xb({encapsulation:0,styles:[[".viewport[_ngcontent-%COMP%]{width:100%;position:relative;flex-direction:column}.videos[_ngcontent-%COMP%], .viewport[_ngcontent-%COMP%]{height:100%;overflow:hidden;display:flex}.videos[_ngcontent-%COMP%]{flex-grow:0;flex-wrap:wrap;align-items:stretch}.videos[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{max-height:100%;flex-grow:1;flex-basis:0;border:1px solid #222}.content-wapper[_ngcontent-%COMP%]{flex-grow:1;overflow:auto;background-size:cover;background-repeat:no-repeat;background-position:50%;background-position-y:bottom}.content[_ngcontent-%COMP%]{height:100%}"]],data:{}});function On(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),l.zb(1,0,null,null,1,"app-video-item",[],[[8,"className",0]],null,null,on,H)),l.yb(2,114688,null,0,J,[],{connection:[0,"connection"]},null)],(function(n,e){n(e,2,0,e.context.$implicit)}),(function(n,e){n(e,1,0,l.Gb(1,"video-container video-container-",e.component.connectionCount,""))}))}function _n(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),l.zb(1,0,null,null,1,"app-self-video",[],[[8,"className",0]],null,null,mn,rn)),l.yb(2,114688,null,0,an,[],{user:[0,"user"]},null),(n()(),l.ib(16777216,null,null,1,null,On)),l.yb(4,278528,null,0,C.l,[l.Q,l.M,l.s],{ngForOf:[0,"ngForOf"]},null),(n()(),l.ib(0,null,null,0))],(function(n,e){var t=e.component;n(e,2,0,t.user),n(e,4,0,t.user.connections)}),(function(n,e){n(e,1,0,l.Gb(1,"video-container video-container-",e.component.connectionCount,""))}))}function wn(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,7,"app-resizable-panes",[],null,[["window","resize"],["window","orientationchange"],["document","mouseup"],["document","touchend"],["document","touchcancel"],["document","mousemove"],["document","touchmove"]],(function(n,e,t){var i=!0;return"window:resize"===e&&(i=!1!==l.Ob(n,1).setOrientation()&&i),"window:orientationchange"===e&&(i=!1!==l.Ob(n,1).setOrientation()&&i),"document:mouseup"===e&&(i=!1!==l.Ob(n,1).stopDrag()&&i),"document:touchend"===e&&(i=!1!==l.Ob(n,1).stopDrag()&&i),"document:touchcancel"===e&&(i=!1!==l.Ob(n,1).stopDrag()&&i),"document:mousemove"===e&&(i=!1!==l.Ob(n,1).drag(t)&&i),"document:touchmove"===e&&(i=!1!==l.Ob(n,1).drag(t)&&i),i}),hn,pn)),l.yb(1,4767744,null,0,fn.a,[l.h],{state:[0,"state"],autorotate:[1,"autorotate"]},null),(n()(),l.zb(2,0,null,0,3,"div",[["appOrientation",""],["class","videos"],["top-pane",""]],null,[["window","resize"],["window","orientationchange"]],(function(n,e,t){var i=!0;return"window:resize"===e&&(i=!1!==l.Ob(n,3).setOrientation()&&i),"window:orientationchange"===e&&(i=!1!==l.Ob(n,3).setOrientation()&&i),i}),null,null)),l.yb(3,4210688,null,0,gn.a,[l.l],null,null),(n()(),l.ib(16777216,null,null,1,null,_n)),l.yb(5,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.zb(6,0,null,1,1,"div",[["bottom-pane",""],["class","content"]],null,null,null,null,null)),l.Nb(null,0)],(function(n,e){var t=e.component;n(e,1,0,t.viewState,!0),n(e,5,0,t.user)}),null)}var Cn=t("2Vo4"),kn=function(){function n(e){_classCallCheck(this,n),this.room=e,this.isAudioOn$=new Cn.a(!0),this.isVideoOn$=new Cn.a(!0),this.isFront$=new Cn.a(!0),this.canFlipCamera=!1,this.videoDevices=[],this.currentDevice=null}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;navigator.mediaDevices.enumerateDevices().then((function(e){n.videoDevices=e.filter((function(n){return"videoinput"==n.kind})),n.canFlipCamera=n.videoDevices.length>1,n.currentDevice=n.videoDevices[0]}))}},{key:"toggleSound",value:function(){this.isAudioOn$.next(!this.isAudioOn$.value),this.user.toggleAudio()}},{key:"toggleVideo",value:function(){this.isVideoOn$.next(!this.isVideoOn$.value),this.user.toggleVideo()}},{key:"flipCamera",value:function(){var n=this.videoDevices.indexOf(this.currentDevice);this.currentDevice=this.videoDevices[(n+1)%this.videoDevices.length],this.isFront$.next(!this.isFront$.value),this.user.toggleCamera(this.currentDevice),this.user.isFrontCamera=this.isFront$.value}},{key:"toggleMediaType",value:function(){this.room.toggleMediaType()}},{key:"toggleBottom",value:function(){this.room.toggleBottom()}},{key:"call",value:function(){this.room.call()}},{key:"hangup",value:function(){this.room.hangup()}},{key:"canShareScreen",get:function(){return"getDisplayMedia"in navigator.mediaDevices}}]),n}(),Mn=t("vkgz"),xn=t("pLZG"),zn=t("7o/Q");function In(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t){return t.lift(new Pn(n,e))}}var Pn=function(){function n(e,t){_classCallCheck(this,n),this.predicate=e,this.inclusive=t}return _createClass(n,[{key:"call",value:function(n,e){return e.subscribe(new Sn(n,this.predicate,this.inclusive))}}]),n}(),Sn=function(n){_inherits(t,n);var e=_createSuper(t);function t(n,l,i){var o;return _classCallCheck(this,t),(o=e.call(this,n)).predicate=l,o.inclusive=i,o.index=0,o}return _createClass(t,[{key:"_next",value:function(n){var e,t=this.destination;try{e=this.predicate(n,this.index++)}catch(l){return void t.error(l)}this.nextOrComplete(n,e)}},{key:"nextOrComplete",value:function(n,e){var t=this.destination;Boolean(e)?t.next(n):(this.inclusive&&t.next(n),t.complete())}}]),t}(zn.a),Rn=t("D0XW");t("l7GE"),t("ZUHj");var jn={leading:!0,trailing:!1};function Tn(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rn.a,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jn;return function(l){return l.lift(new $n(n,e,t.leading,t.trailing))}}var $n=function(){function n(e,t,l,i){_classCallCheck(this,n),this.duration=e,this.scheduler=t,this.leading=l,this.trailing=i}return _createClass(n,[{key:"call",value:function(n,e){return e.subscribe(new Dn(n,this.duration,this.scheduler,this.leading,this.trailing))}}]),n}(),Dn=function(n){_inherits(t,n);var e=_createSuper(t);function t(n,l,i,o,a){var r;return _classCallCheck(this,t),(r=e.call(this,n)).duration=l,r.scheduler=i,r.leading=o,r.trailing=a,r._hasTrailingValue=!1,r._trailingValue=null,r}return _createClass(t,[{key:"_next",value:function(n){this.throttled?this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Xn,this.duration,{subscriber:this})),this.leading?this.destination.next(n):this.trailing&&(this._trailingValue=n,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var n=this.throttled;n&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),n.unsubscribe(),this.remove(n),this.throttled=null)}}]),t}(zn.a);function Xn(n){n.subscriber.clearThrottle()}var An=t("/uUt");t("c1bQ");var Fn,qn,Un,Ln,Qn,Nn,En=t("VHTt"),Vn=t("LRne"),Gn=t("U7T7"),Bn=((qn=function(){function n(e){_classCallCheck(this,n),this.api=e}return _createClass(n,[{key:"sendIceCandidatesByGatheringState",value:function(n,e,t){var l=this;if(e&&t&&n&&n.peer){this.iceSendingId&&clearInterval(this.iceSendingId);var i=n.peer;"complete"===i.iceGatheringState&&this.sendIceCandidates(n,e,t),"gathering"===i.iceGatheringState&&(this.iceSendingId=setInterval((function(){l.sendIceCandidates(n,e,t)}),1e3))}}},{key:"sendIceCandidatesIfCompleted",value:function(n,e,t){e&&t&&n&&n.peer&&"complete"===n.peer.iceGatheringState&&this.sendIceCandidates(n,e,t)}},{key:"sendIceCandidates",value:function(n,e,t){if(e&&t&&n&&n.iceCandidates&&n.iceCandidates.length){for(var l=[];n.iceCandidates.length;){var i=n.iceCandidates.pop();l.push(i.toJSON())}console.log("sending IceCandidates"),this.api.offer.addIceCandidate(this.roomId,{sender:e,reciever:t,candidates:l}).catch(this.handleError)}}},{key:"addIceCandidatesIfExists",value:function(n){var e=this;return this.api.offer.userIceCandidates(this.roomId,n.id).pipe(Object(s.a)()).pipe(Object(Mn.a)((function(t){t&&t.length&&e.addIceCandidates(n,t)})))}},{key:"addIceCandidates",value:function(n,e){console.log("Got ice candidates",e),e.map((function(e){n.getConnection(e.sender).addIceCandidatesToQueue(e.candidates)}))}},{key:"handleError",value:function(n){return console.log(n),Object(Vn.a)(null)}}]),n}()).\u0275prov=l.bc({factory:function(){return new qn(l.cc(I.a))},token:qn,providedIn:"root"}),qn),Yn=((Fn=function(){function n(e,t){_classCallCheck(this,n),this.api=e,this.iceCandidateService=t}return _createClass(n,[{key:"init",value:function(n,e){this.user=n,this.roomId=e,this.iceCandidateService.roomId=e}},{key:"offerAll",value:function(n,e){var t,l=_createForOfIteratorHelper(e);try{for(l.s();!(t=l.n()).done;){var i=t.value;this.offer(n,i.id,i.name).then()}}catch(o){l.e(o)}finally{l.f()}}},{key:"answerAll",value:function(n,e){var t,l=this,i=_createForOfIteratorHelper(n);try{var o=function(){var n=t.value,i=e.find((function(e){return e.id==n.sender}));l.answer(l.user.id,n,i?i.name:n.sender).then()};for(i.s();!(t=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}},{key:"setRemoteAll",value:function(n,e){var t,l=this,i=_createForOfIteratorHelper(n);try{var o=function(){var n=t.value,i=e.find((function(e){return e.id==n.sender}));l.setRemote(n,i?i.name:n.sender).then()};for(i.s();!(t=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}},{key:"offer",value:function(n,e,t){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function l(){var i,o,a=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(i=this.user.getConnection(e,t),o=i.peer,l.t0=i.isConnected,l.t0){l.next=14;break}return i.showState("offer"),this.user.addTracks(o),o.onicegatheringstatechange=function(){i.showState("offer: onicegatheringstatechange"),a.iceCandidateService.sendIceCandidatesByGatheringState(i,n,e)},l.t1=o,l.next=9,o.createOffer(Gn.b);case 9:return l.t2=l.sent,l.next=12,l.t1.setLocalDescription.call(l.t1,l.t2);case 12:i.showState("offer: setLocalDescription"),this.sendOffer("offer",n,e,o);case 14:case"end":return l.stop()}}),l,this)})))}},{key:"answer",value:function(n,e,t){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function l(){var i,o,a,r=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(i=e.sender,o=this.user.getConnection(i,t),a=o.peer,l.t0=o.isConnected,l.t0){l.next=9;break}return o.showState("answer"),this.user.addTracks(a),a.onicegatheringstatechange=function(){o.showState("answer: onicegatheringstatechange"),r.iceCandidateService.sendIceCandidatesIfCompleted(o,n,i)},l.next=8,this.trySetRemote(o,e);case 8:this.tryCreateAnswer(o,3,(function(){r.iceCandidateService.addIceCandidatesIfExists(r.user).subscribe((function(){return r.sendOffer("answer",n,i,a)}))}));case 9:case"end":return l.stop()}}),l,this)})))}},{key:"setRemote",value:function(n,e){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(l=this.user.getConnection(n.sender,e)).isConnected||(l.showState("setRemote"),this.trySetRemoteWithRetry(l,n,3));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"sendOffer",value:function(n,e,t,l){this.api.offer.createOffer(this.roomId,{type:n,sender:e,receiver:t,description:l.localDescription.toJSON()}).catch(this.handleError)}},{key:"trySetRemote",value:function(n,e){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"stable"==(l=n.peer).signalingState){t.next=8;break}return console.log("rollback"),t.next=6,Promise.all([l.setLocalDescription({type:"rollback"}),l.setRemoteDescription(e.description)]);case 6:t.next=10;break;case 8:return t.next=10,l.setRemoteDescription(e.description);case 10:return t.next=12,l.setRemoteDescription(e.description);case 12:n.showState("answer: setRemoteDescription"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))}},{key:"tryCreateAnswer",value:function(n,e,t){var l=this;if(!(e<=0)){var i=n.peer,o=!1;setTimeout((function(){return Object(r.__awaiter)(l,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.t0=i,l.next=4,i.createAnswer(Gn.b);case 4:return l.t1=l.sent,l.next=7,l.t0.setLocalDescription.call(l.t0,l.t1);case 7:n.showState("answer: createAnswer, setLocalDescription"),t(),o=!0,l.next=15;break;case 12:l.prev=12,l.t2=l.catch(0),console.log(l.t2);case 15:o||this.tryCreateAnswer(n,--e,t);case 16:case"end":return l.stop()}}),l,this,[[0,12]])})))}),100)}}},{key:"trySetRemoteWithRetry",value:function(n,e,t){var l=this;if(!(t<=0)){var i=n.peer,o=!1;setTimeout((function(){return Object(r.__awaiter)(l,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,i.setRemoteDescription(e.description);case 3:n.showState("setRemote: setRemoteDescription"),o=!0,l.next=10;break;case 7:l.prev=7,l.t0=l.catch(0),console.log(l.t0);case 10:o||this.trySetRemoteWithRetry(n,e,--t);case 11:case"end":return l.stop()}}),l,this,[[0,7]])})))}),100)}}},{key:"handleError",value:function(n){return console.log(n),Object(Vn.a)(null)}}]),n}()).\u0275prov=l.bc({factory:function(){return new Fn(l.cc(I.a),l.cc(Bn))},token:Fn,providedIn:"root"}),Fn),Kn=t("K6Ak"),Jn=function n(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";_classCallCheck(this,n),this.name=e,this.text=t,this.icon=l,this.visible=!0,this.disabled=!1},Hn=new(function(){function n(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];_classCallCheck(this,n),this.name=e,this.text=t,this.commands=l,this.order=0,this.icon=""}return _createClass(n,[{key:"setCommandOptions",value:function(n,e){var t=this.commands.find((function(e){return e.name===n}));Object.assign(t,e)}}]),n}())("video_chat","\u0412\u0438\u0434\u0435\u043e \u0447\u0430\u0442",[new Jn("call","\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f","phone"),new Jn("hangup","\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c","call_end"),new Jn("shareLink","\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u0441\u044b\u043b\u043a\u043e\u0439","share"),new Jn("copyLink","\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443","link"),new Jn("leaveRoom","\u041f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443","power_settings_new")]),Wn=t("4yAo"),Zn=((Un=function(){function n(e){_classCallCheck(this,n),this.commands=e}return _createClass(n,[{key:"ngOnDestroy",value:function(){this.unregister()}},{key:"register",value:function(){var n="share"in navigator;Hn.setCommandOptions("shareLink",{visible:n}),Hn.setCommandOptions("copyLink",{visible:!n}),this.commands.registerGroup(Hn)}},{key:"unregister",value:function(){this.commands.unregisterGroup(Hn)}}]),n}()).\u0275prov=l.bc({factory:function(){return new Un(l.cc(Wn.a))},token:Un,providedIn:"root"}),Un),ne=t("TfjI"),ee=((Qn=function(){function n(e,t){_classCallCheck(this,n),this.api=e,this.messaging=t,this.message$=new Cn.a(null)}return _createClass(n,[{key:"updateToken",value:function(n,e){this.api.users.saveToken(n,e)}},{key:"requestPermission",value:function(n){var e=this;this.messaging.requestToken.subscribe((function(t){console.log("token: ",t),e.updateToken(n,t)}),(function(n){console.error("Unable to get permission to notify.",n)}))}},{key:"monitorRefresh",value:function(n){var e=this;this.messaging.onTokenRefresh((function(){e.messaging.getToken.subscribe((function(t){console.log("refreshToken: ",t),e.updateToken(n,t)}),(function(n){console.error("Cannot get token.",n)}))}))}},{key:"receiveMessage",value:function(){var n=this;this.messaging.messages.subscribe((function(e){console.log("new message received. ",e),n.message$.next(e)}))}}]),n}()).\u0275prov=l.bc({factory:function(){return new Qn(l.cc(I.a),l.cc(ne.a))},token:Qn,providedIn:"root"}),Qn),te=((Ln=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"setStream",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l,i,o,a,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return l=new MediaStream,i=function(n){n.getTracks().forEach((function(n){return l.addTrack(n)}))},o=navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){return i(n)})).catch((function(n){return console.log(n)})),t.abrupt("return",(a="user"===e?navigator.mediaDevices.getUserMedia({video:Gn.c}).then((function(n){return i(n)})).catch((function(n){return console.log(n)})):navigator.mediaDevices.getDisplayMedia().then((function(n){return i(n)})).catch((function(n){return console.log(n)})),Promise.all([o,a]).then((function(){l.getTracks().length>0&&(n.stream&&(n.stream.getTracks().forEach((function(n){return n.stop()})),l.getTracks().forEach((function(e){return n.replaceTrack(e)}))),n.stream=l,n.connections.forEach((function(e){return n.addTracks(e.peer)})),r.muteSelfStream())}))));case 5:case"end":return t.stop()}}),t)})))}},{key:"closeStream",value:function(n){n&&n.stream&&(n.stream.getTracks().forEach((function(e){e.stop(),n.stream.removeTrack(e)})),n.stream=null)}},{key:"requestMedia",value:function(n){this.setStream(n)}},{key:"muteSelfStream",value:function(){setTimeout((function(){var n=document.querySelector("#self-video");n&&(n.volume=0)}),100)}}]),n}()).\u0275prov=l.bc({factory:function(){return new Ln},token:Ln,providedIn:"root"}),Ln),le=t("zHaW"),ie=((Nn=function(){function n(e,t,l,i,o,a,r,u,c,s){_classCallCheck(this,n),this.router=e,this.api=t,this.auth=l,this.connectionService=i,this.title=o,this.roomCommands=a,this.commands=r,this.messaging=u,this.media=c,this.snackBar=s,this.isConnectionOn$=new Cn.a(!0),this.user$=new Cn.a(null),this.viewState$=new Cn.a("top"),this.prevState="top",this.mediaType="user"}return _createClass(n,[{key:"ngOnDestroy",value:function(){this.hangup(),this.closeStream(),this.title.toDefault(),this.roomCommands.unregister()}},{key:"ngOnInit",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.api.room.exists(this.roomId);case 2:if(n.sent){n.next=4;break}return n.abrupt("return",this.router.navigate([""]));case 4:this.auth.authorized$.pipe(Object(b.a)(this),Object(Mn.a)((function(n){return n&&e.joinRoom(n)})),Object(x.a)((function(n){return n?new En.a(n.id,n.name):null}))).pipe(Object(s.a)(),Object(b.a)(this)).subscribe((function(n){n&&e.initialize(n)})),this.roomCommands.register(),this.commands.current$.pipe(Object(b.a)(this)).pipe(Object(xn.a)((function(n){return!!n}))).subscribe((function(n){var t=e[n.name];t&&"function"==typeof t&&t.call(e)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"initialize",value:function(n){var e=this;this.user=n,this.user$.next(n),this.connectionService.init(n,this.roomId),this.onlineUsers$=this.api.room.roomUsers(this.roomId).pipe(Object(b.a)(this)),this.offers$=this.api.offer.userOffers(this.roomId,this.user.id).pipe(Object(b.a)(this),In((function(){return e.isConnectionOn$.value}))),this.answers$=this.api.offer.userAnswers(this.roomId,this.user.id).pipe(Object(b.a)(this),In((function(){return e.isConnectionOn$.value}))),this.api.offer.userDisconnections(this.roomId,this.user.id).pipe(Object(b.a)(this)).subscribe((function(n){console.log("dissconnection",n),n.forEach((function(n){e.user.closeConnection(n.sender),e.user.closeConnection(n.receiver)}))})),this.setTitle(),this.listenToOffers(),this.listenToAnswers(),this.confirmJoinCall(),this.code$=this.user.messages$.pipe(Object(Mn.a)((function(n){return console.log(n)}))),this.messaging.requestPermission(this.user.id),this.messaging.receiveMessage()}},{key:"confirmJoinCall",value:function(){this.onlineUsers$.pipe(Object(s.a)(),Object(b.a)(this)).subscribe((function(n){}))}},{key:"toggleMediaType",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.mediaType="user"===this.mediaType?"display":"user",n.next=3,this.setStream();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"setStream",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.viewState$.next("middle"),n.next=3,this.media.setStream(this.user,this.mediaType);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"closeStream",value:function(){this.media.closeStream(this.user)}},{key:"requestMedia",value:function(){this.media.requestMedia(this.user)}},{key:"transferText",value:function(n){this.user.connections.forEach((function(e){e.transfer.send(n)}))}},{key:"shareLink",value:function(){var n;n=location.href,"share"in navigator&&navigator.share({title:"Uno",text:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u043a \u0432\u0438\u0434\u0435\u043e \u0437\u0432\u043e\u043d\u043a\u0443:",url:n}).then((function(){return console.log("Successful share")})).catch((function(n){return console.log("Error sharing:",n)}))}},{key:"copyLink",value:function(){!function(n){var e=document.createElement("textarea");e.value=n,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(t){console.error("Unable to copy",t)}document.body.removeChild(e)}(location.href),this.snackBar.open("C\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430","",{duration:2e3})}},{key:"call",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.isConnectionOn$.next(!0),n.next=3,this.setStream();case 3:this.roomUsers().pipe(Object(s.a)(),Object(b.a)(this)).subscribe((function(n){return e.connectionService.offerAll(e.user.id,n)}));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"hangup",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.user,!n.t0){n.next=11;break}return console.log("clearing connections.."),this.isConnectionOn$.next(!1),this.user.closeConnections(),this.viewState$.next("top"),this.closeStream(),n.next=9,this.api.offer.clearConnections(this.roomId,this.user.id);case 9:this.isConnectionOn$.next(!0),console.log("clearing connections done.");case 11:case"end":return n.stop()}}),n,this)})))}},{key:"leaveRoom",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.api.room.leaveRoom(this.roomId,this.user.id);case 2:this.router.navigate(["/"]);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"retryCall",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.isConnectionOn$.next(!1),this.user.closeConnections(),n.next=4,this.api.offer.clearConnections(this.roomId,this.user.id);case 4:this.roomUsers().pipe(Object(s.a)(),Object(b.a)(this)).subscribe((function(n){e.isConnectionOn$.next(!0),e.connectionService.offerAll(e.user.id,n)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"toggleTop",value:function(){var n="top"==this.prevState?"middle":this.prevState,e="top"===this.viewState$.value?n:"top";this.prevState=n,this.viewState$.next(e)}},{key:"toggleBottom",value:function(){var n="bottom"==this.prevState?"middle":this.prevState,e="bottom"===this.viewState$.value?n:"bottom";this.prevState=n,this.viewState$.next(e)}},{key:"roomUsers",value:function(){return this.api.room.roomOtherUsers(this.roomId,this.user.id)}},{key:"joinRoom",value:function(n){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.room.joinRoom(this.roomId,n);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setTitle",value:function(){return Object(r.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.title.icon$.next("group"),this.api.room.onRoomChange(this.roomId).pipe(Object(b.a)(this)).subscribe((function(n){if(n.name)e.title.text$.next(n.name);else{var t=n.users.map((function(n){return n.name})).join(", ");e.title.text$.next(t)}}));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"compareOffers",value:function(n,e){if(n.length!==e.length)return console.log("Offers changed"),!1;var t,l=_createForOfIteratorHelper(n);try{var i=function(){var n=t.value;if(!e.find((function(e){return e.id==n.id&&e.description==n.description})))return{v:(console.log("Offers changed"),!1)}};for(l.s();!(t=l.n()).done;){var o=i();if("object"==typeof o)return o.v}}catch(a){l.e(a)}finally{l.f()}return!0}},{key:"listenToOffers",value:function(){var n=this;this.offers$.pipe(Tn(300),Object(An.a)(this.compareOffers)).subscribe((function(e){return Object(r.__awaiter)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var t=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e&&e.length,!n.t0){n.next=5;break}return n.next=4,this.setStream();case 4:this.roomUsers().pipe(Object(s.a)(),Object(b.a)(this)).subscribe((function(n){return t.connectionService.answerAll(e,n)}));case 5:case"end":return n.stop()}}),n,this)})))}))}},{key:"listenToAnswers",value:function(){var n=this;this.answers$.pipe(Tn(300),Object(An.a)(this.compareOffers)).subscribe((function(e){e&&e.length&&n.roomUsers().pipe(Object(s.a)(),Object(b.a)(n)).subscribe((function(t){return n.connectionService.setRemoteAll(e,t)}))}))}}]),n}()).\u0275prov=l.bc({factory:function(){return new Nn(l.cc(w.p),l.cc(I.a),l.cc(P.a),l.cc(Yn),l.cc(Kn.a),l.cc(Zn),l.cc(Wn.a),l.cc(ee),l.cc(te),l.cc(le.b))},token:Nn,providedIn:"root"}),Nn),oe=l.xb({encapsulation:0,styles:[[".buttons-container[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-around}"]],data:{}});function ae(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["sms"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function re(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["chat"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function ue(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["mic"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function ce(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["mic_off"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function se(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["videocam"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function be(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["videocam_off"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function de(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,4,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.flipCamera()&&l),l}),Y.b,Y.a)),l.yb(1,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.zb(2,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(3,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["flip_camera_ios"]))],(function(n,e){n(e,3,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).disabled||null,"NoopAnimations"===l.Ob(e,1)._animationMode),n(e,2,0,l.Ob(e,3).inline,"primary"!==l.Ob(e,3).color&&"accent"!==l.Ob(e,3).color&&"warn"!==l.Ob(e,3).color)}))}function me(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,18,null,null,null,null,null,null,null)),(n()(),l.zb(1,0,null,null,7,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.toggleSound()&&l),l}),Y.b,Y.a)),l.yb(2,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.ib(16777216,null,0,2,null,ue)),l.yb(4,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),l.Pb(131072,C.b,[l.h]),(n()(),l.ib(16777216,null,0,2,null,ce)),l.yb(7,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),l.Pb(131072,C.b,[l.h]),(n()(),l.zb(9,0,null,null,7,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.toggleVideo()&&l),l}),Y.b,Y.a)),l.yb(10,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.ib(16777216,null,0,2,null,se)),l.yb(12,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),l.Pb(131072,C.b,[l.h]),(n()(),l.ib(16777216,null,0,2,null,be)),l.yb(15,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),l.Pb(131072,C.b,[l.h]),(n()(),l.ib(16777216,null,null,1,null,de)),l.yb(18,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(0,null,null,0))],(function(n,e){var t=e.component;n(e,4,0,l.Yb(e,4,0,l.Ob(e,5).transform(t.isAudioOn$))),n(e,7,0,!l.Yb(e,7,0,l.Ob(e,8).transform(t.isAudioOn$))),n(e,12,0,l.Yb(e,12,0,l.Ob(e,13).transform(t.isVideoOn$))),n(e,15,0,!l.Yb(e,15,0,l.Ob(e,16).transform(t.isVideoOn$))),n(e,18,0,t.canFlipCamera)}),(function(n,e){n(e,1,0,l.Ob(e,2).disabled||null,"NoopAnimations"===l.Ob(e,2)._animationMode),n(e,9,0,l.Ob(e,10).disabled||null,"NoopAnimations"===l.Ob(e,10)._animationMode)}))}function fe(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),l.zb(1,0,null,null,4,"button",[["class","mat-focus-indicator"],["color","accent"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.call()&&l),l}),Y.b,Y.a)),l.yb(2,180224,null,0,K.b,[l.l,U.c,[2,L.a]],{color:[0,"color"]},null),(n()(),l.zb(3,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(4,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["call"]))],(function(n,e){n(e,2,0,"accent"),n(e,4,0)}),(function(n,e){n(e,1,0,l.Ob(e,2).disabled||null,"NoopAnimations"===l.Ob(e,2)._animationMode),n(e,3,0,l.Ob(e,4).inline,"primary"!==l.Ob(e,4).color&&"accent"!==l.Ob(e,4).color&&"warn"!==l.Ob(e,4).color)}))}function pe(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["desktop_windows"]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function he(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(1,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,[" desktop_access_disabled "]))],(function(n,e){n(e,1,0)}),(function(n,e){n(e,0,0,l.Ob(e,1).inline,"primary"!==l.Ob(e,1).color&&"accent"!==l.Ob(e,1).color&&"warn"!==l.Ob(e,1).color)}))}function ge(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,5,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.toggleMediaType()&&l),l}),Y.b,Y.a)),l.yb(1,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.ib(16777216,null,0,1,null,pe)),l.yb(3,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,0,1,null,he)),l.yb(5,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,3,0,"user"==t.room.mediaType),n(e,5,0,"display"==t.room.mediaType)}),(function(n,e){n(e,0,0,l.Ob(e,1).disabled||null,"NoopAnimations"===l.Ob(e,1)._animationMode)}))}function ve(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,ge)),l.yb(2,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.zb(3,0,null,null,4,"button",[["class","mat-focus-indicator"],["color","warn"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.hangup()&&l),l}),Y.b,Y.a)),l.yb(4,180224,null,0,K.b,[l.l,U.c,[2,L.a]],{color:[0,"color"]},null),(n()(),l.zb(5,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(6,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["call_end"]))],(function(n,e){n(e,2,0,e.component.canShareScreen),n(e,4,0,"warn"),n(e,6,0)}),(function(n,e){n(e,3,0,l.Ob(e,4).disabled||null,"NoopAnimations"===l.Ob(e,4)._animationMode),n(e,5,0,l.Ob(e,6).inline,"primary"!==l.Ob(e,6).color&&"accent"!==l.Ob(e,6).color&&"warn"!==l.Ob(e,6).color)}))}function ye(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,12,"div",[["class","buttons-container"]],null,null,null,null,null)),(n()(),l.zb(1,0,null,null,5,"button",[["class","mat-focus-indicator"],["mat-icon-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.toggleBottom()&&l),l}),Y.b,Y.a)),l.yb(2,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.ib(16777216,null,0,1,null,ae)),l.yb(4,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,0,1,null,re)),l.yb(6,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,me)),l.yb(8,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,fe)),l.yb(10,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,null,1,null,ve)),l.yb(12,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null)],(function(n,e){var t=e.component;n(e,4,0,"bottom"!=t.viewState),n(e,6,0,"bottom"==t.viewState),n(e,8,0,t.user.stream),n(e,10,0,!t.user.connections.length),n(e,12,0,t.user.connections.length)}),(function(n,e){n(e,1,0,l.Ob(e,2).disabled||null,"NoopAnimations"===l.Ob(e,2)._animationMode)}))}var Oe=function(){function n(e,t,l,i){_classCallCheck(this,n),this.activeRoute=e,this.title=t,this.dialog=l,this.room=i,this.user$=this.room.user$,this.code$=this.room.code$,this.viewState$=this.room.viewState$,this.roomId=this.room.roomId}return _createClass(n,[{key:"ngOnDestroy",value:function(){this.room.ngOnDestroy()}},{key:"ngOnInit",value:function(){var n=this;this.roomId=this.room.roomId=this.activeRoute.snapshot.paramMap.get("id"),this.room.ngOnInit(),this.title.click$.pipe(Object(b.a)(this)).subscribe((function(){n.room.onlineUsers$.pipe(Object(s.a)()).subscribe((function(e){return n.dialog.open(a,{data:{users:e},width:"300px"})}))}))}},{key:"sendText",value:function(n){this.room.transferText(n)}}]),n}(),_e=t("iELJ"),we=l.xb({encapsulation:0,styles:[[".room-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;height:100%;background-color:#333;color:#fff}.room-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%], .room-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .room-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{width:100%}.room-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{flex-grow:0}.room-container[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex:1 1 auto;overflow:auto}.room-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{min-height:60px;padding:10px;flex-grow:0;background-color:#222;display:flex;align-items:center;justify-content:space-around}"]],data:{}});function Ce(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,8,null,null,null,null,null,null,null)),(n()(),l.zb(1,0,null,null,4,"app-videos-list",[["class","main-content"]],null,null,null,wn,yn)),l.yb(2,114688,null,0,vn,[],{user:[0,"user"],viewState:[1,"viewState"]},null),l.Pb(131072,C.b,[l.h]),(n()(),l.zb(4,16777216,null,0,1,"router-outlet",[],null,null,null,null,null)),l.yb(5,212992,null,0,w.u,[w.b,l.Q,l.j,[8,null],l.h],null,null),(n()(),l.zb(6,0,null,null,2,"app-video-controls",[["class","footer"]],null,null,null,ye,oe)),l.yb(7,114688,null,0,kn,[ie],{user:[0,"user"],viewState:[1,"viewState"]},null),l.Pb(131072,C.b,[l.h])],(function(n,e){var t=e.component;n(e,2,0,e.context.ngIf,l.Yb(e,2,1,l.Ob(e,3).transform(t.viewState$))),n(e,5,0),n(e,7,0,e.context.ngIf,l.Yb(e,7,1,l.Ob(e,8).transform(t.viewState$)))}),null)}function ke(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,3,"div",[["class","room-container"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,2,null,Ce)),l.yb(2,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),l.Pb(131072,C.b,[l.h])],(function(n,e){var t=e.component;n(e,2,0,l.Yb(e,2,0,l.Ob(e,3).transform(t.user$)))}),null)}var Me=l.vb("app-room",Oe,(function(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"app-room",[],null,null,null,ke,we)),l.yb(1,245760,null,0,Oe,[w.a,Kn.a,_e.e,ie],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),xe=l.xb({encapsulation:0,styles:[[""]],data:{}});function ze(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"h2",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.yb(1,81920,null,0,_e.m,[[2,_e.l],l.l,_e.e],null,null),(n()(),l.Xb(2,null,["Call from ",""])),(n()(),l.zb(3,0,null,null,9,"mat-dialog-actions",[["class","mat-dialog-actions"]],null,null,null,null,null)),l.yb(4,16384,null,0,_e.f,[],null,null),(n()(),l.zb(5,0,null,null,3,"button",[["class","mat-focus-indicator"],["color","warn"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0],[1,"type",0]],[[null,"click"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Ob(n,7).dialogRef.close(l.Ob(n,7).dialogResult)&&i),i}),Y.b,Y.a)),l.yb(6,180224,null,0,K.b,[l.l,U.c,[2,L.a]],{color:[0,"color"]},null),l.yb(7,606208,null,0,_e.g,[[2,_e.l],l.l,_e.e],{dialogResult:[0,"dialogResult"]},null),(n()(),l.Xb(-1,0,["Decline"])),(n()(),l.zb(9,0,null,null,3,"button",[["class","mat-focus-indicator"],["color","accent"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0],[1,"type",0]],[[null,"click"]],(function(n,e,t){var i=!0;return"click"===e&&(i=!1!==l.Ob(n,11).dialogRef.close(l.Ob(n,11).dialogResult)&&i),i}),Y.b,Y.a)),l.yb(10,180224,null,0,K.b,[l.l,U.c,[2,L.a]],{color:[0,"color"]},null),l.yb(11,606208,null,0,_e.g,[[2,_e.l],l.l,_e.e],{dialogResult:[0,"dialogResult"]},null),(n()(),l.Xb(-1,0,["Accept"]))],(function(n,e){n(e,1,0),n(e,6,0,"warn"),n(e,7,0,!1),n(e,10,0,"accent"),n(e,11,0,!0)}),(function(n,e){var t=e.component;n(e,0,0,l.Ob(e,1).id),n(e,2,0,t.data.from),n(e,5,0,l.Ob(e,6).disabled||null,"NoopAnimations"===l.Ob(e,6)._animationMode,l.Ob(e,7).ariaLabel||null,l.Ob(e,7).type),n(e,9,0,l.Ob(e,10).disabled||null,"NoopAnimations"===l.Ob(e,10)._animationMode,l.Ob(e,11).ariaLabel||null,l.Ob(e,11).type)}))}var Ie=l.vb("app-call-dialog",i,(function(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"app-call-dialog",[],null,null,null,ze,xe)),l.yb(1,114688,null,0,i,[_e.a],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),Pe=t("IxSq"),Se=l.xb({encapsulation:0,styles:[[""]],data:{}});function Re(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"h2",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.yb(1,81920,null,0,_e.m,[[2,_e.l],l.l,_e.e],null,null),(n()(),l.Xb(-1,null,["\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"])),(n()(),l.zb(3,0,null,null,3,"mat-dialog-content",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.yb(4,16384,null,0,_e.j,[],null,null),(n()(),l.zb(5,0,null,null,1,"app-user-list",[],null,null,null,Pe.c,Pe.a)),l.yb(6,49152,null,0,o.a,[P.a,I.a],{users:[0,"users"]},null),(n()(),l.zb(7,0,null,null,4,"mat-dialog-actions",[["align","end"],["class","mat-dialog-actions"]],null,null,null,null,null)),l.yb(8,16384,null,0,_e.f,[],null,null),(n()(),l.zb(9,0,null,null,2,"button",[["cdkFocusInitial",""],["class","mat-focus-indicator"],["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.dialogRef.close()&&l),l}),Y.b,Y.a)),l.yb(10,180224,null,0,K.b,[l.l,U.c,[2,L.a]],null,null),(n()(),l.Xb(-1,0,["Ok"]))],(function(n,e){var t=e.component;n(e,1,0),n(e,6,0,t.users)}),(function(n,e){n(e,0,0,l.Ob(e,1).id),n(e,9,0,l.Ob(e,10).disabled||null,"NoopAnimations"===l.Ob(e,10)._animationMode)}))}var je=l.vb("ng-component",a,(function(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"ng-component",[],null,null,null,Re,Se)),l.yb(1,49152,null,0,a,[_e.l,_e.a],null,null)],null,null)}),{users:"users"},{},[]),Te=t("Q2Ze"),$e=t("H3DK"),De=t("SCoL"),Xe=t("e6WT"),Ae=t("8sFK"),Fe=l.xb({encapsulation:0,styles:[[""]],data:{}});function qe(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),l.yb(1,16384,[[6,4]],0,Te.c,[],null,null),(n()(),l.Xb(-1,null,["\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0442\u044b\u043c"]))],null,(function(n,e){n(e,0,0,l.Ob(e,1).id)}))}function Ue(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,41,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.yb(1,16384,null,0,_e.j,[],null,null),(n()(),l.zb(2,0,null,null,39,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,e,t){var i=!0;return"submit"===e&&(i=!1!==l.Ob(n,4).onSubmit(t)&&i),"reset"===e&&(i=!1!==l.Ob(n,4).onReset()&&i),i}),null,null)),l.yb(3,16384,null,0,u.w,[],null,null),l.yb(4,4210688,null,0,u.o,[[8,null],[8,null]],null,null),l.Sb(2048,null,u.c,null,[u.o]),l.yb(6,16384,null,0,u.n,[[4,u.c]],null,null),(n()(),l.zb(7,0,null,null,4,"label",[["for","upload"]],null,null,null,null,null)),(n()(),l.zb(8,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,v.b,v.a)),l.yb(9,9158656,null,0,y.b,[l.l,y.d,[8,null],[2,y.a],[2,l.m]],null,null),(n()(),l.Xb(-1,0,["camera_alt"])),(n()(),l.zb(11,0,null,null,0,"input",[["accept","image/*"],["hidden",""],["id","upload"],["type","file"]],null,[[null,"change"]],(function(n,e,t){var l=!0;return"change"===e&&(l=!1!==n.component.uploadImage(t)&&l),l}),null,null)),(n()(),l.zb(12,0,null,null,26,"mat-form-field",[["class","name-field mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,$e.b,$e.a)),l.Sb(6144,null,Te.a,null,[Te.d]),l.yb(14,7520256,null,9,Te.d,[l.l,l.h,[2,q.f],[2,F.b],[2,Te.b],De.a,l.z,[2,L.a]],null,null),l.Tb(603979776,1,{_controlNonStatic:0}),l.Tb(335544320,2,{_controlStatic:0}),l.Tb(603979776,3,{_labelChildNonStatic:0}),l.Tb(335544320,4,{_labelChildStatic:0}),l.Tb(603979776,5,{_placeholderChild:0}),l.Tb(603979776,6,{_errorChildren:1}),l.Tb(603979776,7,{_hintChildren:1}),l.Tb(603979776,8,{_prefixChildren:1}),l.Tb(603979776,9,{_suffixChildren:1}),(n()(),l.zb(24,0,null,3,2,"mat-label",[],null,null,null,null,null)),l.yb(25,16384,[[3,4],[4,4]],0,Te.g,[],null,null),(n()(),l.Xb(-1,null,["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b"])),(n()(),l.zb(27,0,null,1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(n,e,t){var i=!0;return"input"===e&&(i=!1!==l.Ob(n,28)._handleInput(t.target.value)&&i),"blur"===e&&(i=!1!==l.Ob(n,28).onTouched()&&i),"compositionstart"===e&&(i=!1!==l.Ob(n,28)._compositionStart()&&i),"compositionend"===e&&(i=!1!==l.Ob(n,28)._compositionEnd(t.target.value)&&i),"blur"===e&&(i=!1!==l.Ob(n,35)._focusChanged(!1)&&i),"focus"===e&&(i=!1!==l.Ob(n,35)._focusChanged(!0)&&i),"input"===e&&(i=!1!==l.Ob(n,35)._onInput()&&i),i}),null,null)),l.yb(28,16384,null,0,u.d,[l.E,l.l,[2,u.a]],null,null),l.yb(29,16384,null,0,u.r,[],{required:[0,"required"]},null),l.Sb(1024,null,u.j,(function(n){return[n]}),[u.r]),l.Sb(1024,null,u.k,(function(n){return[n]}),[u.d]),l.yb(32,540672,null,0,u.g,[[6,u.j],[8,null],[6,u.k],[2,u.v]],{form:[0,"form"]},null),l.Sb(2048,null,u.l,null,[u.g]),l.yb(34,16384,null,0,u.m,[[4,u.l]],null,null),l.yb(35,999424,null,0,Xe.a,[l.l,De.a,[6,u.l],[2,u.o],[2,u.h],q.b,[8,null],Ae.a,l.z],{required:[0,"required"]},null),l.Sb(2048,[[1,4],[2,4]],Te.e,null,[Xe.a]),(n()(),l.ib(16777216,null,5,1,null,qe)),l.yb(38,16384,null,0,C.m,[l.Q,l.M],{ngIf:[0,"ngIf"]},null),(n()(),l.zb(39,0,null,null,2,"button",[["class","mat-focus-indicator"],["color","primary"],["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.create()&&l),l}),Y.b,Y.a)),l.yb(40,180224,null,0,K.b,[l.l,U.c,[2,L.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(n()(),l.Xb(-1,0,[" \u0421\u043e\u0437\u0434\u0430\u0442\u044c "]))],(function(n,e){var t=e.component;n(e,9,0),n(e,29,0,""),n(e,32,0,t.name),n(e,35,0,""),n(e,38,0,t.name.invalid),n(e,40,0,t.name.invalid,"primary")}),(function(n,e){n(e,2,0,l.Ob(e,6).ngClassUntouched,l.Ob(e,6).ngClassTouched,l.Ob(e,6).ngClassPristine,l.Ob(e,6).ngClassDirty,l.Ob(e,6).ngClassValid,l.Ob(e,6).ngClassInvalid,l.Ob(e,6).ngClassPending),n(e,8,0,l.Ob(e,9).inline,"primary"!==l.Ob(e,9).color&&"accent"!==l.Ob(e,9).color&&"warn"!==l.Ob(e,9).color),n(e,12,1,["standard"==l.Ob(e,14).appearance,"fill"==l.Ob(e,14).appearance,"outline"==l.Ob(e,14).appearance,"legacy"==l.Ob(e,14).appearance,l.Ob(e,14)._control.errorState,l.Ob(e,14)._canLabelFloat,l.Ob(e,14)._shouldLabelFloat(),l.Ob(e,14)._hasFloatingLabel(),l.Ob(e,14)._hideControlPlaceholder(),l.Ob(e,14)._control.disabled,l.Ob(e,14)._control.autofilled,l.Ob(e,14)._control.focused,"accent"==l.Ob(e,14).color,"warn"==l.Ob(e,14).color,l.Ob(e,14)._shouldForward("untouched"),l.Ob(e,14)._shouldForward("touched"),l.Ob(e,14)._shouldForward("pristine"),l.Ob(e,14)._shouldForward("dirty"),l.Ob(e,14)._shouldForward("valid"),l.Ob(e,14)._shouldForward("invalid"),l.Ob(e,14)._shouldForward("pending"),!l.Ob(e,14)._animationsEnabled]),n(e,27,1,[l.Ob(e,29).required?"":null,l.Ob(e,34).ngClassUntouched,l.Ob(e,34).ngClassTouched,l.Ob(e,34).ngClassPristine,l.Ob(e,34).ngClassDirty,l.Ob(e,34).ngClassValid,l.Ob(e,34).ngClassInvalid,l.Ob(e,34).ngClassPending,l.Ob(e,35)._isServer,l.Ob(e,35).id,l.Ob(e,35).placeholder,l.Ob(e,35).disabled,l.Ob(e,35).required,l.Ob(e,35).readonly&&!l.Ob(e,35)._isNativeSelect||null,l.Ob(e,35)._ariaDescribedby||null,l.Ob(e,35).errorState,l.Ob(e,35).required.toString()]),n(e,39,0,l.Ob(e,40).disabled||null,"NoopAnimations"===l.Ob(e,40)._animationMode)}))}var Le=l.vb("ng-component",m,(function(n){return l.ac(0,[(n()(),l.zb(0,0,null,null,1,"ng-component",[],null,null,null,Ue,Fe)),l.yb(1,245760,null,0,m,[w.p,I.a,P.a,d.b],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[]),Qe=t("9b/N"),Ne=t("1O3W"),Ee=t("rJgo"),Ve=t("wD+u"),Ge=t("jmUF"),Be=t("VRCc"),Ye=t("fMxG"),Ke=t("8Qe2"),Je=t("PDjf"),He=t("f44v"),We=t("1z/I"),Ze=t("7KAL"),nt=t("GF+f"),et=t("o4Yh"),tt=t("pu8Q"),lt=t("q7Ft"),it=t("mPVK"),ot=t("jMqV"),at=t("l0rg"),rt=t("Yobz"),ut=t("ab3D"),ct=t("PCNd"),st=t("SIrD"),bt=function(){return Promise.all([t.e(0),t.e(11)]).then(t.bind(null,"tSmu")).then((function(n){return n.ChatModuleNgFactory}))},dt=function(){return Promise.all([t.e(0),t.e(10)]).then(t.bind(null,"oF8/")).then((function(n){return n.BuraModuleNgFactory}))},mt=function n(){_classCallCheck(this,n)},ft=t("Ht+U");t.d(e,"VideoChatModuleNgFactory",(function(){return pt}));var pt=l.wb(f,[],(function(n){return l.Lb([l.Mb(512,l.j,l.ab,[[8,[p.a,h.a,h.b,g.a,X,B,Me,Ie,Pe.b,je,Le]],[3,l.j],l.x]),l.Mb(4608,C.o,C.n,[l.u]),l.Mb(4608,u.u,u.u,[]),l.Mb(4608,u.e,u.e,[]),l.Mb(4608,Qe.c,Qe.c,[]),l.Mb(4608,q.b,q.b,[]),l.Mb(4608,Ne.a,Ne.a,[Ne.g,Ne.c,l.j,Ne.f,Ne.d,l.r,l.z,C.d,F.b,[2,C.i]]),l.Mb(5120,Ne.h,Ne.i,[Ne.a]),l.Mb(5120,_e.c,_e.d,[Ne.a]),l.Mb(135680,_e.e,_e.e,[Ne.a,l.r,[2,C.i],[2,_e.b],_e.c,[3,_e.e],Ne.c]),l.Mb(5120,Ee.c,Ee.j,[Ne.a]),l.Mb(4608,Ve.a,Ve.a,[Ge.c,[2,Ge.b],[2,Ve.c],[2,Ve.e],l.B,l.z,[2,Ve.d]]),l.Mb(4608,Be.a,Be.a,[Ge.c,[2,Ge.b],l.B,l.z]),l.Mb(4608,Ye.a,Ye.a,[Ge.c,[2,Ge.b],[2,Ye.c],l.B,l.z]),l.Mb(4608,ne.a,ne.a,[Ge.c,[2,Ge.b],l.B,l.z]),l.Mb(5120,Ge.d,Ge.f,[Ge.c,l.z,[2,Ge.b]]),l.Mb(1073742336,C.c,C.c,[]),l.Mb(1073742336,u.t,u.t,[]),l.Mb(1073742336,u.i,u.i,[]),l.Mb(1073742336,u.q,u.q,[]),l.Mb(1073742336,De.b,De.b,[]),l.Mb(1073742336,Qe.d,Qe.d,[]),l.Mb(1073742336,U.a,U.a,[U.e]),l.Mb(1073742336,F.a,F.a,[]),l.Mb(1073742336,q.j,q.j,[U.e,[2,q.c],[2,C.d]]),l.Mb(1073742336,Ke.a,Ke.a,[]),l.Mb(1073742336,q.s,q.s,[]),l.Mb(1073742336,K.c,K.c,[]),l.Mb(1073742336,Je.f,Je.f,[]),l.Mb(1073742336,He.d,He.d,[]),l.Mb(1073742336,We.f,We.f,[]),l.Mb(1073742336,Ze.c,Ze.c,[]),l.Mb(1073742336,Ne.e,Ne.e,[]),l.Mb(1073742336,_e.k,_e.k,[]),l.Mb(1073742336,M.b,M.b,[]),l.Mb(1073742336,nt.c,nt.c,[]),l.Mb(1073742336,et.c,et.c,[]),l.Mb(1073742336,Te.f,Te.f,[]),l.Mb(1073742336,y.c,y.c,[]),l.Mb(1073742336,Ae.c,Ae.c,[]),l.Mb(1073742336,Xe.b,Xe.b,[]),l.Mb(1073742336,q.k,q.k,[]),l.Mb(1073742336,q.q,q.q,[]),l.Mb(1073742336,_.c,_.c,[]),l.Mb(1073742336,Ee.i,Ee.i,[]),l.Mb(1073742336,Ee.f,Ee.f,[]),l.Mb(1073742336,A.c,A.c,[]),l.Mb(1073742336,tt.a,tt.a,[]),l.Mb(1073742336,lt.h,lt.h,[]),l.Mb(1073742336,it.a,it.a,[]),l.Mb(1073742336,ot.d,ot.d,[]),l.Mb(1073742336,ot.c,ot.c,[]),l.Mb(1073742336,le.e,le.e,[]),l.Mb(1073742336,at.b,at.b,[]),l.Mb(1073742336,rt.a,rt.a,[]),l.Mb(1073742336,Ve.b,Ve.b,[]),l.Mb(1073742336,Be.b,Be.b,[]),l.Mb(1073742336,Ye.b,Ye.b,[]),l.Mb(1073742336,ne.b,ne.b,[]),l.Mb(1073742336,Ge.a,Ge.a,[l.B]),l.Mb(1073742336,ut.a,ut.a,[]),l.Mb(1073742336,ct.a,ct.a,[]),l.Mb(1073742336,w.t,w.t,[[2,w.z],[2,w.p]]),l.Mb(1073742336,st.a,st.a,[]),l.Mb(1073742336,mt,mt,[]),l.Mb(1073742336,f,f,[]),l.Mb(256,He.a,{separatorKeyCodes:[ft.f]},[]),l.Mb(256,Ge.c,{apiKey:"AIzaSyB8OELF8OtaSi-hF8rJm3lzgBn5GOI6Yeo",authDomain:"uno-server-3000.firebaseapp.com",databaseURL:"https://uno-server-3000.firebaseio.com",projectId:"uno-server-3000",storageBucket:"uno-server-3000.appspot.com",messagingSenderId:"460750590702",appId:"1:460750590702:web:e38380af9f7ff3e2a699ff",measurementId:"G-1D1LTS2GWF"},[]),l.Mb(256,Ge.b,void 0,[]),l.Mb(1024,w.m,(function(){return[[{path:"",redirectTo:"rooms",pathMatch:"full"},{path:"rooms",component:z},{path:"room/create",component:E},{path:"room/:id",component:Oe,children:[{path:"",redirectTo:"messages",pathMatch:"full"},{path:"messages",loadChildren:bt},{path:"game",loadChildren:dt}]}]]}),[])])}))}}]);