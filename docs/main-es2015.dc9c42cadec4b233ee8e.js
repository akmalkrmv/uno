(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,s=n("mrSG"),o=n("q/0M"),a=n("zVF4"),u=n("S+S0"),l=n("x7I3"),c=i.SDK_VERSION,h=function(){function t(t){this.uid=t}return t.prototype.t=function(){return null!=this.uid},t.prototype.i=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.u=new t("google-credentials-uid"),t.s=new t("first-party-uid"),t}(),d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},f=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(e,t),e}(Error),p=function(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t},m=function(){function t(){this.h=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.l=function(){},t.prototype.v=function(t){Oe(!this.h,"Can only call setChangeListener() once."),this.h=t,t(h.UNAUTHENTICATED)},t.prototype.m=function(){Oe(null!==this.h,"removeChangeListener() when no listener registered"),this.h=null},t}(),g=function(){function t(t){var e=this;this.p=null,this.currentUser=h.UNAUTHENTICATED,this.g=!1,this._=0,this.h=null,this.forceRefresh=!1,this.p=function(){e._++,e.currentUser=e.I(),e.g=!0,e.h&&e.h(e.currentUser)},this._=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.p):(this.p(null),t.get().then((function(t){e.auth=t,e.p&&e.auth.addAuthTokenListener(e.p)}),(function(){})))}return t.prototype.getToken=function(){var t=this;Oe(null!=this.p,"getToken cannot be called after listener removed.");var e=this._,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t._!==e)throw new f(d.ABORTED,"getToken aborted due to token change.");return n?(Oe("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new p(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.l=function(){this.forceRefresh=!0},t.prototype.v=function(t){Oe(!this.h,"Can only call setChangeListener() once."),this.h=t,this.g&&t(this.currentUser)},t.prototype.m=function(){Oe(null!=this.p,"removeChangeListener() called twice"),Oe(null!==this.h,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.p),this.p=null,this.h=null},t.prototype.I=function(){var t=this.auth&&this.auth.getUid();return Oe(null===t||"string"==typeof t,"Received invalid UID: "+t),new h(t)},t}(),y=function(){function t(t,e){this.T=t,this.D=e,this.type="FirstParty",this.user=h.s}return Object.defineProperty(t.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.D},e=this.T.auth.R([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),v=function(){function t(t,e){this.T=t,this.D=e}return t.prototype.getToken=function(){return Promise.resolve(new y(this.T,this.D))},t.prototype.v=function(t){t(h.s)},t.prototype.m=function(){},t.prototype.l=function(){},t}();function b(t){if(!t)return new m;switch(t.type){case"gapi":var e=t.S;return Oe(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new v(e,t.D||"0");case"provider":return t.S;default:throw new f(d.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}var _=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new f(d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new f(d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new f(d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new f(d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.A=function(t){return this.seconds===t.seconds?Re(this.nanoseconds,t.nanoseconds):Re(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),w=function(){function t(t){this.timestamp=t}return t.C=function(e){var n=Math.floor(e/1e6);return new t(new _(n,e%1e6*1e3))},t.P=function(e){return new t(e)},t.V=function(){return t.MIN},t.prototype.k=function(t){return this.timestamp.A(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.N=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.O=function(){return this.timestamp},t.MIN=new t(new _(0,0)),t}(),E=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ne("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&Ne("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.F(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.U(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.j=function(t){return Oe(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.U(this.segments,this.offset+t,this.length-t)},t.prototype.L=function(){return Oe(!this.M(),"Can't call popLast() on empty path"),this.U(this.segments,this.offset,this.length-1)},t.prototype.q=function(){return Oe(!this.M(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.B=function(){return this.get(this.length-1)},t.prototype.get=function(t){return Oe(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.M=function(){return 0===this.length},t.prototype.G=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.W=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.K=function(){return this.segments.slice(this.offset,this.limit())},t.F=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.U=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.K().join("/")},e.prototype.toString=function(){return this.J()},e.H=function(t){if(t.indexOf("//")>=0)throw new f(d.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.Y=new e([]),e}(E),S=/^[_a-zA-Z][_a-zA-Z0-9]*$/,T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.U=function(t,n,r){return new e(t,n,r)},e.X=function(t){return S.test(t)},e.prototype.J=function(){return this.K().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.X(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.$=function(){return 1===this.length&&"__name__"===this.get(0)},e.Z=function(){return new e(["__name__"])},e.tt=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new f(d.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new f(d.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new f(d.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new f(d.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.Y=new e([]),e}(E),I=function(){function t(e){this.path=e,Oe(t.nt(e),"Invalid DocumentKey with an odd number of segments: "+e.K().join("/"))}return t.it=function(e){return new t(C.H(e).j(5))},t.prototype.et=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===C.F(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.F=function(t,e){return C.F(t.path,e.path)},t.nt=function(t){return t.length%2==0},t.rt=function(e){return new t(new C(e.slice()))},t.EMPTY=new t(new C([])),t}(),x=function(){function t(t,e){this.F=t,this.root=e||k.EMPTY}return t.prototype.ut=function(e,n){return new t(this.F,this.root.ut(e,n,this.F).copy(null,null,k.st,null,null))},t.prototype.remove=function(e){return new t(this.F,this.root.remove(e,this.F).copy(null,null,k.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.M();){var n=this.F(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.M();){var r=this.F(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.M=function(){return this.root.M()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.ot=function(){return this.root.ot()},t.prototype.ht=function(){return this.root.ht()},t.prototype.ct=function(t){return this.root.ct(t)},t.prototype.forEach=function(t){this.ct((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ct((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.at=function(t){return this.root.at(t)},t.prototype.ft=function(){return new A(this.root,null,this.F,!1)},t.prototype.lt=function(t){return new A(this.root,t,this.F,!1)},t.prototype.dt=function(){return new A(this.root,null,this.F,!0)},t.prototype.vt=function(t){return new A(this.root,t,this.F,!0)},t}(),A=function(){function t(t,e,n,r){this.wt=r,this.pt=[];for(var i=1;!t.M();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.pt.push(t);break}this.pt.push(t),t=this.wt?t.right:t.left}}return t.prototype.bt=function(){Oe(this.pt.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.pt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.M();)this.pt.push(t),t=t.right;else for(t=t.right;!t.M();)this.pt.push(t),t=t.left;return e},t.prototype.gt=function(){return this.pt.length>0},t.prototype.yt=function(){if(0===this.pt.length)return null;var t=this.pt[this.pt.length-1];return{key:t.key,value:t.value}},t}(),k=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.M=function(){return!1},t.prototype.ct=function(t){return this.left.ct(t)||t(this.key,this.value)||this.right.ct(t)},t.prototype.at=function(t){return this.right.at(t)||t(this.key,this.value)||this.left.at(t)},t.prototype.min=function(){return this.left.M()?this:this.left.min()},t.prototype.ot=function(){return this.min().key},t.prototype.ht=function(){return this.right.M()?this.key:this.right.ht()},t.prototype.ut=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ut(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ut(t,e,n)))._t()},t.prototype.It=function(){if(this.left.M())return t.EMPTY;var e=this;return e.left.Tt()||e.left.left.Tt()||(e=e.Et()),(e=e.copy(null,null,null,e.left.It(),null))._t()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.M()||i.left.Tt()||i.left.left.Tt()||(i=i.Et()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Tt()&&(i=i.Dt()),i.right.M()||i.right.Tt()||i.right.left.Tt()||(i=i.Rt()),0===n(e,i.key)){if(i.right.M())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i._t()},t.prototype.Tt=function(){return this.color},t.prototype._t=function(){var t=this;return t.right.Tt()&&!t.left.Tt()&&(t=t.St()),t.left.Tt()&&t.left.left.Tt()&&(t=t.Dt()),t.left.Tt()&&t.right.Tt()&&(t=t.At()),t},t.prototype.Et=function(){var t=this.At();return t.right.left.Tt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Dt())).St()).At()),t},t.prototype.Rt=function(){var t=this.At();return t.left.left.Tt()&&(t=(t=t.Dt()).At()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Dt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.At=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Pt();return Math.pow(2,t)<=this.size+1},t.prototype.Pt=function(){if(this.Tt()&&this.left.Tt())throw Ne("Red node has red child("+this.key+","+this.value+")");if(this.right.Tt())throw Ne("Right child of ("+this.key+","+this.value+") is red");var t=this.left.Pt();if(t!==this.right.Pt())throw Ne("Black depths differ");return t+(this.Tt()?0:1)},t.EMPTY=null,t.RED=!0,t.st=!1,t}(),N=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ne("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ne("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ne("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ne("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ne("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ut=function(t,e,n){return new k(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.M=function(){return!0},t.prototype.ct=function(t){return!1},t.prototype.at=function(t){return!1},t.prototype.ot=function(){return null},t.prototype.ht=function(){return null},t.prototype.Tt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Pt=function(){return 0},t}();k.EMPTY=new N;var O=function(){function t(t){this.F=t,this.data=new x(this.F)}return t.Vt=function(e){var n=new t(e.F);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ot()},t.prototype.last=function(){return this.data.ht()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ct((function(e,n){return t(e),!1}))},t.prototype.kt=function(t,e){for(var n=this.data.lt(t[0]);n.gt();){var r=n.bt();if(this.F(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Nt=function(t,e){var n;for(n=void 0!==e?this.data.lt(e):this.data.ft();n.gt();)if(!t(n.bt().key))return},t.prototype.Ot=function(t){var e=this.data.lt(t);return e.gt()?e.bt().key:null},t.prototype.ft=function(){return new D(this.data.ft())},t.prototype.lt=function(t){return new D(this.data.lt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ut(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.M=function(){return this.data.M()},t.prototype.Ft=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ft(),r=e.data.ft();n.gt();){var i=n.bt().key,s=r.bt().key;if(0!==this.F(i,s))return!1}return!0},t.prototype.K=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.F);return n.data=e,n},t}(),D=function(){function t(t){this.Ut=t}return t.prototype.bt=function(){return this.Ut.bt().key},t.prototype.gt=function(){return this.Ut.gt()},t}();function R(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function P(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function M(t){for(var e in Oe(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var L=function(){function t(t){this.jt=t}return t.fromBase64String=function(e){return new t(Ce.xt().atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return Ce.xt().btoa(this.jt)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.jt)},t.prototype.Lt=function(){return 2*this.jt.length},t.prototype.k=function(t){return Re(this.jt,t.jt)},t.prototype.isEqual=function(t){return this.jt===t.jt},t.Mt=new t(""),t}();function V(t){return null==t}function F(t){return-0===t&&1/t==-1/0}function U(t){return"number"==typeof t&&Number.isInteger(t)&&!F(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function j(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function q(t){var e=K(t.mapValue.fields.__local_write_time__.timestampValue);return new _(e.seconds,e.nanos)}var B=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function z(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?j(t)?4:10:Ne("Invalid value type: "+JSON.stringify(t))}function G(t,e){var n=z(t);if(n!==z(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return q(t).isEqual(q(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=K(t.timestampValue),r=K(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return J(t.bytesValue).isEqual(J(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Y(t.geoPointValue.latitude)===Y(e.geoPointValue.latitude)&&Y(t.geoPointValue.longitude)===Y(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Y(t.integerValue)===Y(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Y(t.doubleValue),r=Y(e.doubleValue);return n===r?F(n)===F(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Pe(t.arrayValue.values||[],e.arrayValue.values||[],G);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(R(n)!==R(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!G(n[i],r[i])))return!1;return!0}(t,e);default:return Ne("Unexpected value type: "+JSON.stringify(t))}}function $(t,e){return void 0!==(t.values||[]).find((function(t){return G(t,e)}))}function H(t,e){var n=z(t),r=z(e);if(n!==r)return Re(n,r);switch(n){case 0:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Y(t.integerValue||t.doubleValue),r=Y(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return W(t.timestampValue,e.timestampValue);case 4:return W(q(t),q(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(t,e){var n=J(t),r=J(e);return n.k(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=Re(n[i],r[i]);if(0!==s)return s}return Re(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Re(Y(t.latitude),Y(e.latitude));return 0!==n?n:Re(Y(t.longitude),Y(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=H(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=Re(r[o],s[o]);if(0!==a)return a;var u=H(n[r[o]],i[s[o]]);if(0!==u)return u}return Re(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Ne("Invalid value type: "+n)}}function W(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Re(t,e);var n=K(t),r=K(e),i=Re(n.seconds,r.seconds);return 0!==i?i:Re(n.nanos,r.nanos)}function Q(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?"time("+(r=K(e.timestampValue)).seconds+","+r.nanos+")":"stringValue"in e?e.stringValue:"bytesValue"in e?J(e.bytesValue).toBase64():"referenceValue"in e?I.it(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,s=e.values||[];i<s.length;i++)r?r=!1:n+=",",n+=t(s[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,s=Object.keys(e.fields||{}).sort();i<s.length;i++){var o=s[i];r?r=!1:n+=",",n+=o+":"+t(e.fields[o])}return n+"}"}(e.mapValue):Ne("Invalid value type: "+JSON.stringify(e));var n,r}(t)}function K(t){if(Oe(!!t,"Cannot normalize null or undefined timestamp."),"string"==typeof t){var e=0,n=B.exec(t);if(Oe(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Y(t.seconds),nanos:e=Y(t.nanos)}}function Y(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function J(t){return"string"==typeof t?L.fromBase64String(t):L.fromUint8Array(t)}function Z(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function X(t){return!!t&&"integerValue"in t}function tt(t){return X(t)||function(t){return!!t&&"doubleValue"in t}(t)}function et(t){return!!t&&"arrayValue"in t}function nt(t){return!!t&&"referenceValue"in t}function rt(t){return!!t&&"nullValue"in t}function it(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function st(t){return!!t&&"mapValue"in t}var ot=function(){function t(){}return t.prototype.qt=function(t,e){return function(t,e){var n,r={fields:(n={},n.__type__={stringValue:"server_timestamp"},n.__local_write_time__={timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}},n)};return e&&(r.fields.__previous_value__=e),{mapValue:r}}(e,t)},t.prototype.Bt=function(t,e){return e},t.prototype.Qt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),at=function(){function t(t){this.elements=t}return t.prototype.qt=function(t,e){return this.apply(t)},t.prototype.Bt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ct(t),n=function(t){e.some((function(e){return G(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Qt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Pe(this.elements,e.elements,G)},t}(),ut=function(){function t(t){this.elements=t}return t.prototype.qt=function(t,e){return this.apply(t)},t.prototype.Bt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ct(t),n=function(t){e=e.filter((function(e){return!G(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Qt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Pe(this.elements,e.elements,G)},t}(),lt=function(){function t(t,e){this.serializer=t,this.Gt=e,Oe(tt(e),"NumericIncrementTransform transform requires a NumberValue")}return t.prototype.qt=function(t,e){var n=this.Qt(t),r=this.asNumber(n)+this.asNumber(this.Gt);return X(n)&&X(this.Gt)?this.serializer.Wt(r):this.serializer.zt(r)},t.prototype.Bt=function(t,e){return Oe(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.Qt=function(t){return tt(t)?t:{integerValue:0}},t.prototype.isEqual=function(e){return e instanceof t&&G(this.Gt,e.Gt)},t.prototype.asNumber=function(t){return Y(t.integerValue||t.doubleValue)},t}();function ct(t){return et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ht,dt,ft=function(){function t(t){this.fields=t}return t.Kt=function(e){return new t(e)},t.Jt=function(e){var n=new O(T.F);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.Ht=function(t){var e=!1;return this.fields.forEach((function(n){n.G(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),pt=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),mt=function(t,e){this.version=t,this.transformResults=e},gt=function(){function t(t,e){this.updateTime=t,this.exists=e,Oe(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Yt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Xt=function(t){return void 0!==this.updateTime?t instanceof It&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof It:(Oe(this.Yt,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,!((null!=(e=this.updateTime)?!n||!e.isEqual(n):e!==n)||this.exists!==t.exists);var e,n},t.NONE=new t,t}(),yt=function(){function t(){}return t.prototype.$t=function(t){null!=t&&Oe(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.Zt=function(t){return t instanceof It?t.version:w.MIN},t}(),vt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.tn=r,i.type=0,i}return s.__extends(e,t),e.prototype.Bt=function(t,e){return this.$t(t),Oe(null==e.transformResults,"Transform results received by SetMutation."),new It(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.qt=function(t,e,n){if(this.$t(t),!this.tn.Xt(t))return t;var r=yt.Zt(t);return new It(this.key,r,this.value,{nn:!0})},e.prototype.in=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.tn.isEqual(t.tn)},e}(yt),bt=function(t){function e(e,n,r,i){var s=t.call(this)||this;return s.key=e,s.data=n,s.en=r,s.tn=i,s.type=1,s}return s.__extends(e,t),e.prototype.Bt=function(t,e){if(this.$t(t),Oe(null==e.transformResults,"Transform results received by PatchMutation."),!this.tn.Xt(t))return new At(this.key,e.version);var n=this.rn(t);return new It(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.qt=function(t,e,n){if(this.$t(t),!this.tn.Xt(t))return t;var r=yt.Zt(t),i=this.rn(t);return new It(this.key,r,i,{nn:!0})},e.prototype.in=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.en.isEqual(t.en)&&this.tn.isEqual(t.tn)},e.prototype.rn=function(t){var e;return e=t instanceof It?t.data():Ct.EMPTY,this.un(e)},e.prototype.un=function(t){var e=this,n=t.sn();return this.en.fields.forEach((function(t){if(!t.M()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.on()},e}(yt),_t=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=2,r.tn=gt.exists(!0),r}return s.__extends(e,t),e.prototype.Bt=function(t,e){if(this.$t(t),Oe(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.tn.Xt(t))return new At(this.key,e.version);var n=this.hn(t),r=this.cn(t,e.transformResults),i=e.version,s=this.an(n.data(),r);return new It(this.key,i,s,{hasCommittedMutations:!0})},e.prototype.qt=function(t,e,n){if(this.$t(t),!this.tn.Xt(t))return t;var r=this.hn(t),i=this.fn(n,t,e),s=this.an(r.data(),i);return new It(this.key,r.version,s,{nn:!0})},e.prototype.in=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],s=t instanceof It?t.field(i.field):void 0,o=i.transform.Qt(s||null);null!=o&&(e=null==e?Ct.ln().set(i.field,o):e.set(i.field,o))}return e?e.on():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Pe(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.tn.isEqual(t.tn)},e.prototype.hn=function(t){return Oe(t instanceof It,"Unknown MaybeDocument type "+t),Oe(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.cn=function(t,e){var n=[];Oe(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],s=i.transform,o=null;t instanceof It&&(o=t.field(i.field)),n.push(s.Bt(o,e[r]))}return n},e.prototype.fn=function(t,e,n){for(var r=[],i=0,s=this.fieldTransforms;i<s.length;i++){var o=s[i],a=o.transform,u=null;e instanceof It&&(u=e.field(o.field)),null===u&&n instanceof It&&(u=n.field(o.field)),r.push(a.qt(u,t))}return r},e.prototype.an=function(t,e){Oe(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.sn(),r=0;r<this.fieldTransforms.length;r++)n.set(this.fieldTransforms[r].field,e[r]);return n.on()},e}(yt),wt=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.tn=n,r.type=3,r}return s.__extends(e,t),e.prototype.Bt=function(t,e){return this.$t(t),Oe(null==e.transformResults,"Transform results received by DeleteMutation."),new xt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.qt=function(t,e,n){return this.$t(t),this.tn.Xt(t)?(t&&Oe(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new xt(this.key,w.V())):t},e.prototype.in=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.tn.isEqual(t.tn)},e}(yt),Et=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.tn=n,r.type=4,r}return s.__extends(e,t),e.prototype.Bt=function(t,e){Ne("VerifyMutation should only be used in Transactions.")},e.prototype.qt=function(t,e,n){Ne("VerifyMutation should only be used in Transactions.")},e.prototype.in=function(t){Ne("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.tn.isEqual(t.tn)},e}(yt),Ct=function(){function t(t){this.proto=t,Oe(!j(t),"ServerTimestamps should be converted to ServerTimestampValue")}return t.ln=function(){return t.EMPTY.sn()},t.prototype.field=function(t){if(t.M())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!st(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.B()])||null},t.prototype.en=function(){return this.dn(this.proto.mapValue)},t.prototype.dn=function(t){var e=this,n=new O(T.F);return P(t.fields||{},(function(t,r){var i=new T([t]);if(10===z(r)){var s=e.dn(r.mapValue).fields;s.M()?n=n.add(i):s.forEach((function(t){n=n.add(i.child(t))}))}else n=n.add(i)})),ft.Kt(n)},t.prototype.isEqual=function(t){return G(this.proto,t.proto)},t.prototype.sn=function(){return new St(this)},t.EMPTY=new t({mapValue:{}}),t}(),St=function(){function t(t){this.vn=t,this.wn=new Map}return t.prototype.set=function(t,e){return Oe(!t.M(),"Cannot set field for empty path on ObjectValue"),this.mn(t,e),this},t.prototype.delete=function(t){return Oe(!t.M(),"Cannot delete field for empty path on ObjectValue"),this.mn(t,null),this},t.prototype.mn=function(t,e){for(var n=this.wn,r=0;r<t.length-1;++r){var i=t.get(r),s=n.get(i);s instanceof Map?n=s:s&&10===z(s)?(s=new Map(Object.entries(s.mapValue.fields||{})),n.set(i,s),n=s):(s=new Map,n.set(i,s),n=s)}n.set(t.B(),e)},t.prototype.on=function(){var t=this.pn(T.Y,this.wn);return null!=t?new Ct(t):this.vn},t.prototype.pn=function(t,e){var n=this,r=!1,i=this.vn.field(t),o=st(i)?s.__assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.pn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}(),Tt=function(){function t(t,e){this.key=t,this.version=e}return t.bn=function(t,e){return I.F(t.key,e.key)},t}(),It=function(t){function e(e,n,r,i){var s=t.call(this,e,n)||this;return s.gn=r,s.nn=!!i.nn,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return s.__extends(e,t),e.prototype.field=function(t){return this.gn.field(t)},e.prototype.data=function(){return this.gn},e.prototype.yn=function(){return this.gn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.nn===t.nn&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gn.isEqual(t.gn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gn.toString()+", {hasLocalMutations: "+this.nn+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.nn||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e._n=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?H(r,i):Ne("Trying to compare documents on fields that don't exist")},e}(Tt),xt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Tt),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Tt),kt=function(){function t(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.In=null}return t.prototype.canonicalId=function(){if(null===this.In){var t=this.path.J();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map((function(t){return t.canonicalId()})).join(","),t+="|ob:",t+=this.orderBy.map((function(t){return t.canonicalId()})).join(","),V(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.In=t}return this.In},t.prototype.toString=function(){var t=this.path.J();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),V(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Tn=function(){return I.nt(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),Nt=function(){function t(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.En=n,this.filters=r,this.limit=i,this.Dn=s,this.startAt=o,this.endAt=a,this.Rn=null,this.Sn=null,this.startAt&&this.An(this.startAt),this.endAt&&this.An(this.endAt)}return t.Cn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Rn){var t=this.Pn(),e=this.Vn();if(null!==t&&null===e)this.Rn=t.$()?[qt]:[new jt(t),qt];else{Oe(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.Rn=[];for(var n=!1,r=0,i=this.En;r<i.length;r++){var s=i[r];this.Rn.push(s),s.field.$()&&(n=!0)}n||this.Rn.push((this.En.length>0?this.En[this.En.length-1].dir:Ft.ASCENDING)===Ft.ASCENDING?qt:Bt)}}return this.Rn},enumerable:!0,configurable:!0}),t.prototype.kn=function(e){Oe(null==this.Pn()||!(e instanceof Dt)||!e.Nn()||e.field.isEqual(this.Pn()),"Query must only have one inequality field."),Oe(!this.Tn(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.En.slice(),n,this.limit,this.Dn,this.startAt,this.endAt)},t.prototype.On=function(e){Oe(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.En.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Dn,this.startAt,this.endAt)},t.prototype.Fn=function(e){return new t(this.path,this.collectionGroup,this.En.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Un=function(e){return new t(this.path,this.collectionGroup,this.En.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.jn=function(e){return new t(this.path,this.collectionGroup,this.En.slice(),this.filters.slice(),this.limit,this.Dn,e,this.endAt)},t.prototype.xn=function(e){return new t(this.path,this.collectionGroup,this.En.slice(),this.filters.slice(),this.limit,this.Dn,this.startAt,e)},t.prototype.Ln=function(e){return new t(e,null,this.En.slice(),this.filters.slice(),this.limit,this.Dn,this.startAt,this.endAt)},t.prototype.Mn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.En.length||1===this.En.length&&this.En[0].field.$())},t.prototype.canonicalId=function(){return this.qn().canonicalId()+"|lt:"+this.Dn},t.prototype.toString=function(){return"Query(target="+this.qn().toString()+"; limitType="+this.Dn+")"},t.prototype.isEqual=function(t){return this.qn().isEqual(t.qn())&&this.Dn===t.Dn},t.prototype.Bn=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var s=i[r],o=s.compare(t,e);if(0!==o)return o;n=n||s.field.$()}return Oe(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.Qn(t)&&this.Gn(t)&&this.Wn(t)&&this.zn(t)},t.prototype.Kn=function(){return!V(this.limit)&&"F"===this.Dn},t.prototype.Jn=function(){return!V(this.limit)&&"L"===this.Dn},t.prototype.Vn=function(){return this.En.length>0?this.En[0].field:null},t.prototype.Pn=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Dt&&n.Nn())return n.field}return null},t.prototype.Hn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Dt&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Tn=function(){return this.qn().Tn()},t.prototype.Yn=function(){return null!==this.collectionGroup},t.prototype.qn=function(){if(!this.Sn)if("F"===this.Dn)this.Sn=new kt(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new jt(r.field,r.dir===Ft.DESCENDING?Ft.ASCENDING:Ft.DESCENDING))}var i=this.endAt?new Ut(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Ut(this.startAt.position,!this.startAt.before):null;this.Sn=new kt(this.path,this.collectionGroup,t,this.filters,this.limit,i,s)}return this.Sn},t.prototype.Qn=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.et(this.collectionGroup)&&this.path.G(e):I.nt(this.path)?this.path.isEqual(e):this.path.W(e)},t.prototype.Gn=function(t){for(var e=0,n=this.En;e<n.length;e++){var r=n[e];if(!r.field.$()&&null===t.field(r.field))return!1}return!0},t.prototype.Wn=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.zn=function(t){return!(this.startAt&&!this.startAt.Xn(this.orderBy,t)||this.endAt&&this.endAt.Xn(this.orderBy,t))},t.prototype.An=function(t){Oe(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Ot=function(){function t(t){this.name=t}return t.H=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return Ne("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),Dt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return s.__extends(e,t),e.create=function(t,n,r){if(t.$())return n===Ot.IN?(Oe(et(r),"Comparing on key with IN, but filter value not an ArrayValue"),Oe((r.arrayValue.values||[]).every((function(t){return nt(t)})),"Comparing on key with IN, but an array value was not a RefValue"),new Pt(t,r)):(Oe(nt(r),"Comparing on key, but filter value not a RefValue"),Oe(n!==Ot.ARRAY_CONTAINS&&n!==Ot.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Rt(t,n,r));if(rt(r)){if(n!==Ot.EQUAL)throw new f(d.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(it(r)){if(n!==Ot.EQUAL)throw new f(d.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===Ot.ARRAY_CONTAINS?new Mt(t,r):n===Ot.IN?(Oe(et(r),"IN filter has invalid value: "+r.toString()),new Lt(t,r)):n===Ot.ARRAY_CONTAINS_ANY?(Oe(et(r),"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Vt(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&z(this.value)===z(e)&&this.$n(H(e,this.value))},e.prototype.$n=function(t){switch(this.op){case Ot.LESS_THAN:return t<0;case Ot.LESS_THAN_OR_EQUAL:return t<=0;case Ot.EQUAL:return 0===t;case Ot.GREATER_THAN:return t>0;case Ot.GREATER_THAN_OR_EQUAL:return t>=0;default:return Ne("Unknown FieldFilter operator: "+this.op)}},e.prototype.Nn=function(){return[Ot.LESS_THAN,Ot.LESS_THAN_OR_EQUAL,Ot.GREATER_THAN,Ot.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.J()+this.op.toString()+Q(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&G(this.value,t.value)},e.prototype.toString=function(){return this.field.J()+" "+this.op+" "+Q(this.value)},e}((function(){})),Rt=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return Oe(nt(r),"KeyFieldFilter expects a ReferenceValue"),i.key=I.it(r.referenceValue),i}return s.__extends(e,t),e.prototype.matches=function(t){var e=I.F(t.key,this.key);return this.$n(e)},e}(Dt),Pt=function(t){function e(e,n){var r=t.call(this,e,Ot.IN,n)||this;return Oe(et(n),"KeyFieldInFilter expects an ArrayValue"),r.keys=(n.arrayValue.values||[]).map((function(t){return Oe(nt(t),"Comparing on key with IN, but an array value was not a ReferenceValue"),I.it(t.referenceValue)})),r}return s.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Dt),Mt=function(t){function e(e,n){return t.call(this,e,Ot.ARRAY_CONTAINS,n)||this}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return et(e)&&$(e.arrayValue,this.value)},e}(Dt),Lt=function(t){function e(e,n){var r=t.call(this,e,Ot.IN,n)||this;return Oe(et(n),"InFilter expects an ArrayValue"),r}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&$(this.value.arrayValue,e)},e}(Dt),Vt=function(t){function e(e,n){var r=t.call(this,e,Ot.ARRAY_CONTAINS_ANY,n)||this;return Oe(et(n),"ArrayContainsAnyFilter expects an ArrayValue"),r}return s.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!et(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return $(e.value.arrayValue,t)}))},e}(Dt),Ft=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Ut=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map((function(t){return Q(t)})).join(",")},t.prototype.Xn=function(t,e){Oe(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],s=this.position[r];if(i.field.$())Oe(nt(s),"Bound has a non-key value where the key path is being used."),n=I.F(I.it(s.referenceValue),e.key);else{var o=e.field(i.field);Oe(null!==o,"Field should exist since document matched the orderBy already."),n=H(s,o)}if(i.dir===Ft.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!G(this.position[e],t.position[e]))return!1;return!0},t}(),jt=function(){function t(t,e){this.field=t,void 0===e&&(e=Ft.ASCENDING),this.dir=e,this.Zn=t.$()}return t.prototype.compare=function(t,e){var n=this.Zn?It.bn(t,e):It._n(this.field,t,e);switch(this.dir){case Ft.ASCENDING:return n;case Ft.DESCENDING:return-1*n;default:return Ne("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.J()+this.dir.toString()},t.prototype.toString=function(){return this.field.J()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),qt=new jt(T.Z(),Ft.ASCENDING),Bt=new jt(T.Z(),Ft.DESCENDING),zt=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=w.MIN),void 0===s&&(s=w.MIN),void 0===o&&(o=L.Mt),this.target=t,this.targetId=e,this.ti=n,this.sequenceNumber=r,this.ni=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.ii=function(e){return new t(this.target,this.targetId,this.ti,e,this.ni,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ei=function(e,n){return new t(this.target,this.targetId,this.ti,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ri=function(e){return new t(this.target,this.targetId,this.ti,this.sequenceNumber,this.ni,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.ti===t.ti&&this.sequenceNumber===t.sequenceNumber&&this.ni.isEqual(t.ni)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},t}(),Gt=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function $t(t){switch(t){case d.OK:return Ne("Treated status OK as error");case d.CANCELLED:case d.UNKNOWN:case d.DEADLINE_EXCEEDED:case d.RESOURCE_EXHAUSTED:case d.INTERNAL:case d.UNAVAILABLE:case d.UNAUTHENTICATED:return!1;case d.INVALID_ARGUMENT:case d.NOT_FOUND:case d.ALREADY_EXISTS:case d.PERMISSION_DENIED:case d.FAILED_PRECONDITION:case d.ABORTED:case d.OUT_OF_RANGE:case d.UNIMPLEMENTED:case d.DATA_LOSS:return!0;default:return Ne("Unknown status code: "+t)}}function Ht(t){if(void 0===t)return Ae("GRPC error has no .code"),d.UNKNOWN;switch(t){case ht.OK:return d.OK;case ht.CANCELLED:return d.CANCELLED;case ht.UNKNOWN:return d.UNKNOWN;case ht.DEADLINE_EXCEEDED:return d.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return d.RESOURCE_EXHAUSTED;case ht.INTERNAL:return d.INTERNAL;case ht.UNAVAILABLE:return d.UNAVAILABLE;case ht.UNAUTHENTICATED:return d.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return d.INVALID_ARGUMENT;case ht.NOT_FOUND:return d.NOT_FOUND;case ht.ALREADY_EXISTS:return d.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return d.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return d.FAILED_PRECONDITION;case ht.ABORTED:return d.ABORTED;case ht.OUT_OF_RANGE:return d.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return d.UNIMPLEMENTED;case ht.DATA_LOSS:return d.DATA_LOSS;default:return Ne("Unknown status code: "+t)}}(dt=ht||(ht={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";var Wt=new x(I.F);function Qt(){return Wt}function Kt(){return Qt()}var Yt=new x(I.F);function Jt(){return Yt}var Zt=new x(I.F);function Xt(){return Zt}var te=new O(I.F);function ee(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=te,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var ne=new O(Re);function re(){return ne}var ie=function(){function t(t){this.F=t?function(e,n){return t(e,n)||I.F(e.key,n.key)}:function(t,e){return I.F(t.key,e.key)},this.ui=Jt(),this.si=new x(this.F)}return t.oi=function(e){return new t(e.F)},t.prototype.has=function(t){return null!=this.ui.get(t)},t.prototype.get=function(t){return this.ui.get(t)},t.prototype.first=function(){return this.si.ot()},t.prototype.last=function(){return this.si.ht()},t.prototype.M=function(){return this.si.M()},t.prototype.indexOf=function(t){var e=this.ui.get(t);return e?this.si.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.si.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.si.ct((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ui.ut(t.key,t),e.si.ut(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ui.remove(t),this.si.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.si.ft(),r=e.si.ft();n.gt();){var i=n.bt().key,s=r.bt().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.F=this.F,r.ui=e,r.si=n,r},t}(),se=function(){function t(){this.hi=new x(I.F)}return t.prototype.track=function(t){var e=t.doc.key,n=this.hi.get(e);n?0!==t.type&&3===n.type?this.hi=this.hi.ut(e,t):3===t.type&&1!==n.type?this.hi=this.hi.ut(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.hi=this.hi.ut(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.hi=this.hi.ut(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.hi=this.hi.remove(e):1===t.type&&2===n.type?this.hi=this.hi.ut(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.hi=this.hi.ut(e,{type:2,doc:t.doc}):Ne("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.hi=this.hi.ut(e,t)},t.prototype.ci=function(){var t=[];return this.hi.ct((function(e,n){t.push(n)})),t},t}(),oe=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.ai=n,this.docChanges=r,this.fi=i,this.fromCache=s,this.li=o,this.di=a}return t.vi=function(e,n,r,i){var s=[];return n.forEach((function(t){s.push({type:0,doc:t})})),new t(e,n,ie.oi(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.fi.M()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.li===t.li&&this.fi.isEqual(t.fi)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.ai.isEqual(t.ai)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ae=function(){function t(t,e,n,r,i){this.ni=t,this.wi=e,this.mi=n,this.pi=r,this.bi=i}return t.gi=function(e,n){var r=new Map;return r.set(e,ue.yi(e,n)),new t(w.MIN,r,re(),Qt(),ee())},t}(),ue=function(){function t(t,e,n,r,i){this.resumeToken=t,this._i=e,this.Ii=n,this.Ti=r,this.Ei=i}return t.yi=function(e,n){return new t(L.Mt,n,ee(),ee(),ee())},t}(),le=function(t,e,n,r){this.Di=t,this.removedTargetIds=e,this.key=n,this.Ri=r},ce=function(t,e){this.targetId=t,this.Si=e},he=function(t,e,n,r){void 0===n&&(n=L.Mt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},de=function(){function t(){this.Ai=0,this.Ci=me(),this.Pi=L.Mt,this.Vi=!1,this.ki=!0}return Object.defineProperty(t.prototype,"_i",{get:function(){return this.Vi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Pi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ni",{get:function(){return 0!==this.Ai},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oi",{get:function(){return this.ki},enumerable:!0,configurable:!0}),t.prototype.Fi=function(t){t.Lt()>0&&(this.ki=!0,this.Pi=t)},t.prototype.Ui=function(){var t=ee(),e=ee(),n=ee();return this.Ci.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ne("Encountered invalid change type: "+i)}})),new ue(this.Pi,this.Vi,t,e,n)},t.prototype.ji=function(){this.ki=!1,this.Ci=me()},t.prototype.xi=function(t,e){this.ki=!0,this.Ci=this.Ci.ut(t,e)},t.prototype.Li=function(t){this.ki=!0,this.Ci=this.Ci.remove(t)},t.prototype.Mi=function(){this.Ai+=1},t.prototype.qi=function(){this.Ai-=1},t.prototype.Bi=function(){this.ki=!0,this.Vi=!0},t}(),fe=function(){function t(t){this.Qi=t,this.Gi=new Map,this.Wi=Qt(),this.zi=pe(),this.Ki=new O(Re)}return t.prototype.Ji=function(t){for(var e=0,n=t.Di;e<n.length;e++){var r=n[e];t.Ri instanceof It?this.Hi(r,t.Ri):t.Ri instanceof xt&&this.Yi(r,t.key,t.Ri)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.Yi(r=s[i],t.key,t.Ri)},t.prototype.Xi=function(t){var e=this;this.$i(t,(function(n){var r=e.Zi(n);switch(t.state){case 0:e.te(n)&&r.Fi(t.resumeToken);break;case 1:r.qi(),r.Ni||r.ji(),r.Fi(t.resumeToken);break;case 2:r.qi(),r.Ni||e.removeTarget(n),Oe(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:e.te(n)&&(r.Bi(),r.Fi(t.resumeToken));break;case 4:e.te(n)&&(e.ne(n),r.Fi(t.resumeToken));break;default:Ne("Unknown target watch change state: "+t.state)}}))},t.prototype.$i=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Gi.forEach((function(t,n){return e(n)}))},t.prototype.ie=function(t){var e=t.targetId,n=t.Si.count,r=this.ee(e);if(r){var i=r.target;if(i.Tn())if(0===n){var s=new I(i.path);this.Yi(e,s,new xt(s,w.V()))}else Oe(1===n,"Single document existence filter with count: "+n);else this.re(e)!==n&&(this.ne(e),this.Ki=this.Ki.add(e))}},t.prototype.ue=function(t){var e=this,n=new Map;this.Gi.forEach((function(r,i){var s=e.ee(i);if(s){if(r._i&&s.target.Tn()){var o=new I(s.target.path);null!==e.Wi.get(o)||e.se(i,o)||e.Yi(i,o,new xt(o,t))}r.Oi&&(n.set(i,r.Ui()),r.ji())}}));var r=ee();this.zi.forEach((function(t,n){var i=!0;n.Nt((function(t){var n=e.ee(t);return!n||2===n.ti||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ae(t,n,this.Ki,this.Wi,r);return this.Wi=Qt(),this.zi=pe(),this.Ki=new O(Re),i},t.prototype.Hi=function(t,e){if(this.te(t)){var n=this.se(t,e.key)?2:0;this.Zi(t).xi(e.key,n),this.Wi=this.Wi.ut(e.key,e),this.zi=this.zi.ut(e.key,this.oe(e.key).add(t))}},t.prototype.Yi=function(t,e,n){if(this.te(t)){var r=this.Zi(t);this.se(t,e)?r.xi(e,1):r.Li(e),this.zi=this.zi.ut(e,this.oe(e).delete(t)),n&&(this.Wi=this.Wi.ut(e,n))}},t.prototype.removeTarget=function(t){this.Gi.delete(t)},t.prototype.re=function(t){var e=this.Zi(t).Ui();return this.Qi.he(t).size+e.Ii.size-e.Ei.size},t.prototype.Mi=function(t){this.Zi(t).Mi()},t.prototype.Zi=function(t){var e=this.Gi.get(t);return e||(e=new de,this.Gi.set(t,e)),e},t.prototype.oe=function(t){var e=this.zi.get(t);return e||(e=new O(Re),this.zi=this.zi.ut(t,e)),e},t.prototype.te=function(t){var e=null!==this.ee(t);return e||xe("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ee=function(t){var e=this.Gi.get(t);return e&&e.Ni?null:this.Qi.ce(t)},t.prototype.ne=function(t){var e=this;Oe(!this.Gi.get(t).Ni,"Should only reset active targets"),this.Gi.set(t,new de),this.Qi.he(t).forEach((function(n){e.Yi(t,n,null)}))},t.prototype.se=function(t,e){return this.Qi.he(t).has(e)},t}();function pe(){return new x(I.F)}function me(){return new x(I.F)}var ge,ye,ve=((ge={})[Ft.ASCENDING.name]="ASCENDING",ge[Ft.DESCENDING.name]="DESCENDING",ge),be=((ye={})[Ot.LESS_THAN.name]="LESS_THAN",ye[Ot.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",ye[Ot.GREATER_THAN.name]="GREATER_THAN",ye[Ot.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",ye[Ot.EQUAL.name]="EQUAL",ye[Ot.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",ye[Ot.IN.name]="IN",ye[Ot.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",ye);function _e(t,e){Oe(!V(t),e+" is missing")}var we=function(){function t(t,e){this.ae=t,this.options=e}return t.prototype.fe=function(t){var e=void 0===t.code?d.UNKNOWN:Ht(t.code);return new f(e,t.message||"")},t.prototype.le=function(t){return this.options.de||V(t)?t:{value:t}},t.prototype.ve=function(t){var e;return V(e="object"==typeof t?t.value:t)?null:e},t.prototype.Wt=function(t){return{integerValue:""+t}},t.prototype.zt=function(t){if(this.options.de){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F(t)?"-0":t}},t.prototype.we=function(t){return U(t)?this.Wt(t):this.zt(t)},t.prototype.O=function(t){return this.options.de?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.P=function(t){var e=K(t);return new _(e.seconds,e.nanos)},t.prototype.me=function(t){return this.options.de?t.toBase64():t.toUint8Array()},t.prototype.pe=function(t){return this.options.de?(Oe(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),L.fromBase64String(t||"")):(Oe(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),L.fromUint8Array(t||new Uint8Array))},t.prototype.toVersion=function(t){return this.O(t.O())},t.prototype.fromVersion=function(t){return Oe(!!t,"Trying to deserialize version that isn't set"),w.P(this.P(t))},t.prototype.be=function(t,e){return this.ge(e||this.ae).child("documents").child(t).J()},t.prototype.ye=function(t){var e=C.H(t);return Oe(Ee(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype._e=function(t){return this.be(t.path)},t.prototype.it=function(t){var e=this.ye(t);return Oe(e.get(1)===this.ae.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.ae.projectId),Oe(!e.get(3)&&!this.ae.database||e.get(3)===this.ae.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.ae.database),new I(this.Ie(e))},t.prototype.Te=function(t){return this.be(t)},t.prototype.Ee=function(t){var e=this.ye(t);return 4===e.length?C.Y:this.Ie(e)},Object.defineProperty(t.prototype,"De",{get:function(){return new C(["projects",this.ae.projectId,"databases",this.ae.database]).J()},enumerable:!0,configurable:!0}),t.prototype.ge=function(t){return new C(["projects",t.projectId,"databases",t.database])},t.prototype.Ie=function(t){return Oe(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.j(5)},t.prototype.Re=function(t,e){return{name:this._e(t),fields:e.proto.mapValue.fields}},t.prototype.Se=function(t){return Oe(!t.nn,"Can't serialize documents with mutations."),{name:this._e(t.key),fields:t.yn().mapValue.fields,updateTime:this.O(t.version.O())}},t.prototype.Ae=function(t,e){var n=this.it(t.name),r=this.fromVersion(t.updateTime),i=new Ct({mapValue:{fields:t.fields}});return new It(n,r,i,{hasCommittedMutations:!!e})},t.prototype.Ce=function(t){Oe(!!t.found,"Tried to deserialize a found document from a missing document."),_e(t.found.name,"doc.found.name"),_e(t.found.updateTime,"doc.found.updateTime");var e=this.it(t.found.name),n=this.fromVersion(t.found.updateTime),r=new Ct({mapValue:{fields:t.found.fields}});return new It(e,n,r,{})},t.prototype.Pe=function(t){Oe(!!t.missing,"Tried to deserialize a missing document from a found document."),Oe(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.it(t.missing),n=this.fromVersion(t.readTime);return new xt(e,n)},t.prototype.Ve=function(t){return"found"in t?this.Ce(t):"missing"in t?this.Pe(t):Ne("invalid batch get response: "+JSON.stringify(t))},t.prototype.ke=function(t){var e;if("targetChange"in t){_e(t.targetChange,"targetChange");var n=this.Ne(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.pe(t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&this.fe(s);e=new he(n,r,i,o||null)}else if("documentChange"in t){_e(t.documentChange,"documentChange");var a=t.documentChange;_e(a.document,"documentChange.name"),_e(a.document.name,"documentChange.document.name"),_e(a.document.updateTime,"documentChange.document.updateTime");var u=this.it(a.document.name),l=this.fromVersion(a.document.updateTime),c=new Ct({mapValue:{fields:a.document.fields}}),h=new It(u,l,c,{}),d=a.removedTargetIds||[];e=new le(a.targetIds||[],d,h.key,h)}else if("documentDelete"in t){_e(t.documentDelete,"documentDelete");var f=t.documentDelete;_e(f.document,"documentDelete.document"),u=this.it(f.document),l=f.readTime?this.fromVersion(f.readTime):w.V(),h=new xt(u,l),e=new le([],d=f.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){_e(t.documentRemove,"documentRemove");var p=t.documentRemove;_e(p.document,"documentRemove"),u=this.it(p.document),e=new le([],d=p.removedTargetIds||[],u,null)}else{if(!("filter"in t))return Ne("Unknown change type "+JSON.stringify(t));_e(t.filter,"filter");var m=t.filter;_e(m.targetId,"filter.targetId");var g=new Gt(m.count||0);e=new ce(m.targetId,g)}return e},t.prototype.Ne=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ne("Got unexpected TargetChange.state: "+t)},t.prototype.Oe=function(t){if(!("targetChange"in t))return w.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?w.MIN:e.readTime?this.fromVersion(e.readTime):w.MIN},t.prototype.Fe=function(t){var e,n=this;if(t instanceof vt)e={update:this.Re(t.key,t.value)};else if(t instanceof wt)e={delete:this._e(t.key)};else if(t instanceof bt)e={update:this.Re(t.key,t.data),updateMask:this.Ue(t.en)};else if(t instanceof _t)e={transform:{document:this._e(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.je(t)}))}};else{if(!(t instanceof Et))return Ne("Unknown mutation type "+t.type);e={verify:this._e(t.key)}}return t.tn.Yt||(e.currentDocument=this.xe(t.tn)),e},t.prototype.Le=function(t){var e=this,n=t.currentDocument?this.Me(t.currentDocument):gt.NONE;if(t.update){_e(t.update.name,"name");var r=this.it(t.update.name),i=new Ct({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=this.qe(t.updateMask);return new bt(r,i,s,n)}return new vt(r,i,n)}if(t.delete)return r=this.it(t.delete),new wt(r,n);if(t.transform){r=this.it(t.transform.document);var o=t.transform.fieldTransforms.map((function(t){return e.Be(t)}));return Oe(!0===n.exists,'Transforms only support precondition "exists == true"'),new _t(r,o)}return t.verify?(r=this.it(t.verify),new Et(r,n)):Ne("unknown mutation proto: "+JSON.stringify(t))},t.prototype.xe=function(t){return Oe(!t.Yt,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ne("Unknown precondition")},t.prototype.Me=function(t){return void 0!==t.updateTime?gt.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?gt.exists(t.exists):gt.NONE},t.prototype.Qe=function(t,e){var n=this.fromVersion(t.updateTime?t.updateTime:e);n.isEqual(w.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new mt(n,r)},t.prototype.Ge=function(t,e){var n=this;return t&&t.length>0?(Oe(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.Qe(t,e)}))):[]},t.prototype.je=function(t){var e=t.transform;if(e instanceof ot)return{fieldPath:t.field.J(),setToServerValue:"REQUEST_TIME"};if(e instanceof at)return{fieldPath:t.field.J(),appendMissingElements:{values:e.elements}};if(e instanceof ut)return{fieldPath:t.field.J(),removeAllFromArray:{values:e.elements}};if(e instanceof lt)return{fieldPath:t.field.J(),increment:e.Gt};throw Ne("Unknown transform: "+t.transform)},t.prototype.Be=function(t){var e=null;if("setToServerValue"in t)Oe("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),e=ot.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];e=new at(n)}else"removeAllFromArray"in t?e=new ut(n=t.removeAllFromArray.values||[]):"increment"in t?e=new lt(this,t.increment):Ne("Unknown transform proto: "+JSON.stringify(t));var r=T.tt(t.fieldPath);return new pt(r,e)},t.prototype.We=function(t){return{documents:[this.Te(t.path)]}},t.prototype.ze=function(t){var e=t.documents.length;return Oe(1===e,"DocumentsTarget contained other than 1 document: "+e),Nt.Cn(this.Ee(t.documents[0])).qn()},t.prototype.Ke=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(Oe(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Te(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(Oe(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Te(n.L()),e.structuredQuery.from=[{collectionId:n.B()}]);var r=this.Je(t.filters);r&&(e.structuredQuery.where=r);var i=this.He(t.orderBy);i&&(e.structuredQuery.orderBy=i);var s=this.le(t.limit);return null!==s&&(e.structuredQuery.limit=s),t.startAt&&(e.structuredQuery.startAt=this.Ye(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Ye(t.endAt)),e},t.prototype.Xe=function(t){var e=this.Ee(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Oe(1===r,"StructuredQuery.from with more than one collection is not supported.");var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=this.$e(n.where));var a=[];n.orderBy&&(a=this.Ze(n.orderBy));var u=null;n.limit&&(u=this.ve(n.limit));var l=null;n.startAt&&(l=this.tr(n.startAt));var c=null;return n.endAt&&(c=this.tr(n.endAt)),new Nt(e,i,a,o,u,"F",l,c).qn()},t.prototype.nr=function(t){var e=this.ir(t.ti);return null==e?null:{"goog-listen-tags":e}},t.prototype.ir=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ne("Unrecognized query purpose: "+t)}},t.prototype.qn=function(t){var e,n=t.target;return(e=n.Tn()?{documents:this.We(n)}:{query:this.Ke(n)}).targetId=t.targetId,t.resumeToken.Lt()>0&&(e.resumeToken=this.me(t.resumeToken)),e},t.prototype.Je=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Dt?e.er(t):Ne("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.$e=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.rr(t)]:void 0!==t.fieldFilter?[this.ur(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.$e(t)})).reduce((function(t,e){return t.concat(e)})):Ne("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.He=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.sr(t)}))},t.prototype.Ze=function(t){var e=this;return t.map((function(t){return e.or(t)}))},t.prototype.Ye=function(t){return{before:t.before,values:t.position}},t.prototype.tr=function(t){return new Ut(t.values||[],!!t.before)},t.prototype.hr=function(t){return ve[t.name]},t.prototype.cr=function(t){switch(t){case"ASCENDING":return Ft.ASCENDING;case"DESCENDING":return Ft.DESCENDING;default:return}},t.prototype.ar=function(t){return be[t.name]},t.prototype.lr=function(t){switch(t){case"EQUAL":return Ot.EQUAL;case"GREATER_THAN":return Ot.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Ot.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Ot.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Ot.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Ot.ARRAY_CONTAINS;case"IN":return Ot.IN;case"ARRAY_CONTAINS_ANY":return Ot.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Ne("Unspecified operator");default:return Ne("Unknown operator")}},t.prototype.dr=function(t){return{fieldPath:t.J()}},t.prototype.vr=function(t){return T.tt(t.fieldPath)},t.prototype.sr=function(t){return{field:this.dr(t.field),direction:this.hr(t.dir)}},t.prototype.or=function(t){return new jt(this.vr(t.field),this.cr(t.direction))},t.prototype.ur=function(t){return Dt.create(this.vr(t.fieldFilter.field),this.lr(t.fieldFilter.op),t.fieldFilter.value)},t.prototype.er=function(t){if(t.op===Ot.EQUAL){if(it(t.value))return{unaryFilter:{field:this.dr(t.field),op:"IS_NAN"}};if(rt(t.value))return{unaryFilter:{field:this.dr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.dr(t.field),op:this.ar(t.op),value:t.value}}},t.prototype.rr=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.vr(t.unaryFilter.field);return Dt.create(e,Ot.EQUAL,{doubleValue:NaN});case"IS_NULL":var n=this.vr(t.unaryFilter.field);return Dt.create(n,Ot.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne("Unspecified filter");default:return Ne("Unknown filter")}},t.prototype.Ue=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.J())})),{fieldPaths:e}},t.prototype.qe=function(t){var e=(t.fieldPaths||[]).map((function(t){return T.tt(t)}));return ft.Jt(e)},t}();function Ee(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ce=function(){function t(){}return t.wr=function(e){t.platform&&Ne("Platform already defined"),t.platform=e},t.xt=function(){return t.platform||Ne("Platform not set"),t.platform},t}(),Se=new o.Logger("@firebase/firestore");function Te(){return Se.logLevel}function Ie(t){Se.logLevel=t}function xe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Se.logLevel<=o.LogLevel.DEBUG){var r=e.map(ke);Se.error.apply(Se,s.__spreadArrays(["Firestore ("+c+"): "+t],r))}}function Ae(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Se.logLevel<=o.LogLevel.ERROR){var r=e.map(ke);Se.error.apply(Se,s.__spreadArrays(["Firestore ("+c+"): "+t],r))}}function ke(t){if("string"==typeof t)return t;var e=Ce.xt();try{return e.mr(t)}catch(e){return t}}function Ne(t){var e="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+t;throw Ae(e),new Error(e)}function Oe(t,e){t||Ne(e)}var De=function(){function t(){}return t.pr=function(){for(var t="";t.length<20;)for(var e=Ce.xt().randomBytes(40),n=0,r=Array.from(e);n<r.length;n++){var i=r[n];t.length<20&&i<=247&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i%62))}return Oe(20===t.length,"Invalid auto ID: "+t),t},t}();function Re(t,e){return t<e?-1:t>e?1:0}function Pe(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Me(t){return t+"\0"}var Le=function(t,e,n,r,i){this.ae=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Ve=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"br",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.k=function(t){return Re(this.projectId,t.projectId)||Re(this.database,t.database)},t}(),Fe=function(){function t(t,e,n,r){this.batchId=t,this.gr=e,this.baseMutations=n,this.mutations=r,Oe(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.Bt=function(t,e,n){e&&Oe(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.yr;Oe(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t)&&(e=s.Bt(e,r[i]))}return e},t.prototype.qt=function(t,e){e&&Oe(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.qt(e,e,this.gr));for(var i=e,s=0,o=this.mutations;s<o.length;s++){var a;(a=o[s]).key.isEqual(t)&&(e=a.qt(e,i,this.gr))}return e},t.prototype._r=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.qt(r.key,t.get(r.key));i&&(n=n.ut(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ee())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Pe(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&Pe(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),Ue=function(){function t(t,e,n,r,i){this.batch=t,this.Ir=e,this.yr=n,this.streamToken=r,this.Tr=i}return t.from=function(e,n,r,i){Oe(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var s=Xt(),o=e.mutations,a=0;a<o.length;a++)s=s.ut(o[a].key,r[a].version);return new t(e,n,r,i,s)},t}(),je=function(){function t(t){this.Er=t,this.Dr={}}return t.prototype.get=function(t){var e=this.Er(t),n=this.Dr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(s[0].isEqual(t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Er(t),r=this.Dr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Dr[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Er(t),n=this.Dr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Dr[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){P(this.Dr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}}))},t.prototype.M=function(){return M(this.Dr)},t}(),qe=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Rr=n,this.Sr=r}return t.Ar=function(e,n){for(var r=ee(),i=ee(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Be=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Cr=function(t){return n.Pr(t)},this.Vr=function(t){return e.kr(t)})}return t.prototype.Pr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Vr&&this.Vr(t),t},t.Nr=-1,t}(),ze=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Ge=function(){function t(t,e,n,r,i){this.Or=t,this.Fr=e,this.Ur=n,this.op=r,this.jr=i,this.xr=new ze,this.then=this.xr.promise.then.bind(this.xr.promise),this.catch=this.xr.promise.catch.bind(this.xr.promise),this.xr.promise.catch((function(t){}))}return t.Lr=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.Mr=setTimeout((function(){return e.qr()}),t)},t.prototype.Br=function(){return this.qr()},t.prototype.cancel=function(t){null!==this.Mr&&(this.clearTimeout(),this.xr.reject(new f(d.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.qr=function(){var t=this;this.Or.Qr((function(){return null!==t.Mr?(t.clearTimeout(),t.op().then((function(e){return t.xr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Mr&&(this.jr(this),clearTimeout(this.Mr),this.Mr=null)},t}(),$e=function(){function t(){this.Gr=Promise.resolve(),this.Wr=!1,this.zr=[],this.Kr=null,this.Jr=!1,this.Hr=[]}return Object.defineProperty(t.prototype,"Yr",{get:function(){return this.Wr},enumerable:!0,configurable:!0}),t.prototype.Qr=function(t){this.enqueue(t)},t.prototype.Xr=function(t){this.$r(),this.Zr(t)},t.prototype.tu=function(t){return this.$r(),this.Zr(t)},t.prototype.nu=function(t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return this.$r(),this.Wr?[3,2]:(this.Wr=!0,[4,this.tu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.$r(),this.Wr?new Promise((function(t){})):this.Zr(t)},t.prototype.Zr=function(t){var e=this,n=this.Gr.then((function(){return e.Jr=!0,t().catch((function(t){e.Kr=t,e.Jr=!1;var n=t.stack||t.message||"";throw Ae("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.Jr=!1,t}))}));return this.Gr=n,n},t.prototype.iu=function(t,e,n){var r=this;this.$r(),Oe(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.Hr.indexOf(t)>-1&&(e=0);var i=Ge.Lr(this,t,e,n,(function(t){return r.eu(t)}));return this.zr.push(i),i},t.prototype.$r=function(){this.Kr&&Ne("AsyncQueue is already failed: "+(this.Kr.stack||this.Kr.message))},t.prototype.ru=function(){Oe(this.Jr,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.uu=function(){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Gr];case 1:e.sent(),e.label=2;case 2:if(t!==this.Gr)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.su=function(t){for(var e=0,n=this.zr;e<n.length;e++)if(n[e].Fr===t)return!0;return!1},t.prototype.ou=function(t){var e=this;return this.uu().then((function(){Oe("all"===t||e.su(t),"Attempted to drain to missing operation "+t),e.zr.sort((function(t,e){return t.Ur-e.Ur}));for(var n=0,r=e.zr;n<r.length;n++){var i=r[n];if(i.Br(),"all"!==t&&i.Fr===t)break}return e.uu()}))},t.prototype.hu=function(t){this.Hr.push(t)},t.prototype.eu=function(t){var e=this.zr.indexOf(t);Oe(e>=0,"Delayed operation not found."),this.zr.splice(e,1)},t}(),He=function(){function t(t){var e=this;this.cu=null,this.au=null,this.result=void 0,this.error=void 0,this.fu=!1,this.lu=!1,t((function(t){e.fu=!0,e.result=t,e.cu&&e.cu(t)}),(function(t){e.fu=!0,e.error=t,e.au&&e.au(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.lu&&Ne("Called next() or catch() twice for PersistencePromise"),this.lu=!0,this.fu?this.error?this.du(n,this.error):this.vu(e,this.result):new t((function(t,i){r.cu=function(n){r.vu(e,n).next(t,i)},r.au=function(e){r.du(n,e).next(t,i)}}))},t.prototype.wu=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.mu=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.vu=function(e,n){return e?this.mu((function(){return e(n)})):t.resolve(n)},t.prototype.du=function(e,n){return e?this.mu((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.pu=function(e){return new t((function(t,n){var r=0,i=0,s=!1;e.forEach((function(e){++r,e.next((function(){++i,s&&i===r&&t()}),(function(t){return n(t)}))})),s=!0,i===r&&t()}))},t.bu=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.pu(r)},t}();function We(t,e){var n=t[1],r=e[1],i=Re(t[0],e[0]);return 0===i?Re(n,r):i}var Qe=function(){function t(t){this.gu=t,this.buffer=new O(We),this.yu=0}return t.prototype._u=function(){return++this.yu},t.prototype.Iu=function(t){var e=[t,this._u()];if(this.buffer.size<this.gu)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();We(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Ke={Tu:!1,Eu:0,Du:0,Ru:0},Ye=function(){function t(t,e,n){this.Su=t,this.Au=e,this.Cu=n}return t.Pu=function(e){return new t(e,t.Vu,t.ku)},t.Nu=-1,t.Ou=1048576,t.Uu=new t(t.Fu=41943040,t.Vu=10,t.ku=1e3),t.DISABLED=new t(t.Nu,0,0),t}(),Je=function(){function t(t,e){this.ju=t,this.Or=e,this.xu=!1,this.Lu=null}return t.prototype.start=function(t){Oe(null===this.Lu,"Cannot start an already started LruScheduler"),this.ju.params.Su!==Ye.Nu&&this.Mu(t)},t.prototype.stop=function(){this.Lu&&(this.Lu.cancel(),this.Lu=null)},Object.defineProperty(t.prototype,"qu",{get:function(){return null!==this.Lu},enumerable:!0,configurable:!0}),t.prototype.Mu=function(t){var e=this;Oe(null===this.Lu,"Cannot schedule GC while a task is pending");var n=this.xu?3e5:6e4;xe("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Lu=this.Or.iu("lru_garbage_collection",n,(function(){return e.Lu=null,e.xu=!0,t.Bu(e.ju).then((function(){return e.Mu(t)})).catch(rn)}))},t}(),Ze=function(){function t(t,e){this.Qu=t,this.params=e}return t.prototype.Gu=function(t,e){return this.Qu.Wu(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.zu=function(t,e){var n=this;if(0===e)return He.resolve(Be.Nr);var r=new Qe(e);return this.Qu.$i(t,(function(t){return r.Iu(t.sequenceNumber)})).next((function(){return n.Qu.Ku(t,(function(t){return r.Iu(t)}))})).next((function(){return r.maxValue}))},t.prototype.Ju=function(t,e,n){return this.Qu.Ju(t,e,n)},t.prototype.Hu=function(t,e){return this.Qu.Hu(t,e)},t.prototype.Yu=function(t,e){var n=this;return this.params.Su===Ye.Nu?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),He.resolve(Ke)):this.Xu(t).next((function(r){return r<n.params.Su?(xe("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Su),Ke):n.$u(t,e)}))},t.prototype.Xu=function(t){return this.Qu.Xu(t)},t.prototype.$u=function(t,e){var n,r,i,s,a,u,l,c=this,h=Date.now();return this.Gu(t,this.params.Au).next((function(e){return e>c.params.Cu?(xe("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Cu+" from "+e),r=c.params.Cu):r=e,s=Date.now(),c.zu(t,r)})).next((function(r){return n=r,a=Date.now(),c.Ju(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.Hu(t,n)})).next((function(t){return l=Date.now(),Te()<=o.LogLevel.DEBUG&&xe("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-h)+"ms"),He.resolve({Tu:!0,Eu:r,Du:i,Ru:t})}))},t}(),Xe=function(){function t(){this.Zu=new O(tn.bn),this.ts=new O(tn.ns)}return t.prototype.M=function(){return this.Zu.M()},t.prototype.es=function(t,e){var n=new tn(t,e);this.Zu=this.Zu.add(n),this.ts=this.ts.add(n)},t.prototype.rs=function(t,e){var n=this;t.forEach((function(t){return n.es(t,e)}))},t.prototype.us=function(t,e){this.ss(new tn(t,e))},t.prototype.os=function(t,e){var n=this;t.forEach((function(t){return n.us(t,e)}))},t.prototype.hs=function(t){var e=this,n=I.EMPTY,r=new tn(n,t),i=new tn(n,t+1),s=[];return this.ts.kt([r,i],(function(t){e.ss(t),s.push(t.key)})),s},t.prototype.cs=function(){var t=this;this.Zu.forEach((function(e){return t.ss(e)}))},t.prototype.ss=function(t){this.Zu=this.Zu.delete(t),this.ts=this.ts.delete(t)},t.prototype.as=function(t){var e=I.EMPTY,n=new tn(e,t),r=new tn(e,t+1),i=ee();return this.ts.kt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.fs=function(t){var e=new tn(t,0),n=this.Zu.Ot(e);return null!==n&&t.isEqual(n.key)},t}(),tn=function(){function t(t,e){this.key=t,this.ls=e}return t.bn=function(t,e){return I.F(t.key,e.key)||Re(t.ls,e.ls)},t.ns=function(t,e){return Re(t.ls,e.ls)||I.F(t.key,e.key)},t}(),en=function(){function t(){this.ds=new je((function(t){return t.toString()})),this.vs=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return Oe(void 0!==this.ws,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.ws},set:function(t){Oe(void 0===this.ws||this.ws.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.ws=t},enumerable:!0,configurable:!0}),t.prototype.ms=function(t,e){this.ps(),this.readTime=e,this.ds.set(t.key,t)},t.prototype.bs=function(t,e){this.ps(),e&&(this.readTime=e),this.ds.set(t,null)},t.prototype.gs=function(t,e){this.ps();var n=this.ds.get(e);return void 0!==n?He.resolve(n):this.ys(t,e)},t.prototype.getEntries=function(t,e){return this._s(t,e)},t.prototype.apply=function(t){return this.ps(),this.vs=!0,this.Is(t)},t.prototype.ps=function(){Oe(!this.vs,"Changes have already been applied.")},t}(),nn=function(){function t(t,e,n){this.persistence=t,this.Ts=e,this.Es=new Xe,this.Ds=new x(Re),this.Rs=new je((function(t){return t.canonicalId()})),this.Ss=w.MIN,Oe(t.qu,"LocalStore was passed an unstarted persistence implementation"),this.persistence.Cs.As(this.Es),this.Ps=t.Vs(n),this.ks=t.Ns(),this.Os=t.Fs(),this.Us=new yn(this.ks,this.Ps,this.persistence.js()),this.Ts.xs(this.Us)}return t.prototype.start=function(){return this.Ls()},t.prototype.Ms=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return s.__generator(this,(function(s){switch(s.label){case 0:return e=this.Ps,n=this.Us,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var s;return i.Ps.qs(r).next((function(o){return s=o,e=i.persistence.Vs(t),n=new yn(i.ks,e,i.persistence.js()),e.qs(r)})).next((function(t){for(var e=[],i=[],o=ee(),a=0,u=s;a<u.length;a++){var l=u[a];e.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var d=h[c];o=o.add(d.key)}}for(var f=0,p=t;f<p.length;f++){i.push((l=p[f]).batchId);for(var m=0,g=l.mutations;m<g.length;m++)o=o.add((d=g[m]).key)}return n.Bs(r,o).next((function(t){return{Qs:t,Gs:e,Ws:i}}))}))}))];case 1:return r=s.sent(),this.Ps=e,this.Us=n,this.Ts.xs(this.Us),[2,r]}}))}))},t.prototype.zs=function(t){var e,n=this,r=_.now(),i=t.reduce((function(t,e){return t.add(e.key)}),ee());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(s){return n.Us.Bs(s,i).next((function(i){e=i;for(var o=[],a=0,u=t;a<u.length;a++){var l=u[a],c=l.in(e.get(l.key));null!=c&&o.push(new bt(l.key,c,c.en(),gt.exists(!0)))}return n.Ps.Ks(s,r,o,t)}))})).then((function(t){var n=t._r(e);return{batchId:t.batchId,ds:n}}))},t.prototype.Js=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Ps.Hs(n,t).next((function(t){return t?e.Us.Bs(n,t):He.resolve(null)}))}))},t.prototype.Ys=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.ks.Xs({$s:!0});return e.Ps.Ys(n,t.batch,t.streamToken).next((function(){return e.Zs(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.Ps.to(n)})).next((function(){return e.Us.Bs(n,r)}))}))},t.prototype.no=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Ps.io(n,t).next((function(t){return Oe(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.Ps.eo(n,t)})).next((function(){return e.Ps.to(n)})).next((function(){return e.Us.Bs(n,r)}))}))},t.prototype.ro=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Ps.ro(e)}))},t.prototype.uo=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.Ps.uo(e)}))},t.prototype.so=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return e.Ps.so(n,t)}))},t.prototype.oo=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Os.oo(e)}))},t.prototype.ho=function(e){var n=this,r=e.ni,i=this.Ds;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(s){var o=n.ks.Xs({$s:!0});i=n.Ds;var a=[];e.wi.forEach((function(e,o){var u=i.get(o);if(u){a.push(n.Os.co(s,e.Ei,o).next((function(){return n.Os.ao(s,e.Ii,o)})));var l=e.resumeToken;if(l.Lt()>0){var c=u.ei(l,r).ii(s.fo);i=i.ut(o,c),t.lo(u,c,e)&&a.push(n.Os.do(s,c))}}}));var u=Qt(),l=ee();if(e.pi.forEach((function(t,e){l=l.add(t)})),a.push(o.getEntries(s,l).next((function(t){e.pi.forEach((function(i,l){var c=t.get(i);l instanceof xt&&l.version.isEqual(w.MIN)?(o.bs(i,r),u=u.ut(i,l)):null==c||l.version.k(c.version)>0||0===l.version.k(c.version)&&c.hasPendingWrites?(Oe(!w.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),o.ms(l,r),u=u.ut(i,l)):xe("LocalStore","Ignoring outdated watch update for ",i,". Current version:",c.version," Watch version:",l.version),e.bi.has(i)&&a.push(n.persistence.Cs.vo(s,i))}))}))),!r.isEqual(w.MIN)){var c=n.Os.oo(s).next((function(t){return Oe(r.k(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.Os.wo(s,s.fo,r)}));a.push(c)}return He.pu(a).next((function(){return o.apply(s)})).next((function(){return n.Us.mo(s,u)}))})).then((function(t){return n.Ds=i,t}))},t.lo=function(t,e,n){return Oe(e.resumeToken.Lt()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.Lt()||e.ni.N()-t.ni.N()>=this.po||n.Ii.size+n.Ti.size+n.Ei.size>0},t.prototype.bo=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],s=i.targetId;if(this.Es.rs(i.Rr,s),this.Es.os(i.Sr,s),!i.fromCache){var o=this.Ds.get(s);Oe(null!==o,"Can't set limbo-free snapshot version for unknown target: "+s);var a=o.ri(o.ni);this.Ds=this.Ds.ut(s,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return He.forEach(t,(function(t){return He.forEach(t.Sr,(function(t){return e.persistence.Cs.us(n,t)}))}))}))},t.prototype.yo=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Ps._o(n,t)}))},t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Us.To(n,t)}))},t.prototype.Eo=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Os.Do(n,t).next((function(i){return i?He.resolve(r=i):e.Os.Ro(n).next((function(i){return r=new zt(t,i,0,n.fo),e.Os.So(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.Ds.get(n.targetId)&&(e.Ds=e.Ds.ut(n.targetId,n),e.Rs.set(t,n.targetId)),n}))},t.prototype.Do=function(t,e){var n=this.Rs.get(e);return void 0!==n?He.resolve(this.Ds.get(n)):this.Os.Do(t,e)},t.prototype.Ao=function(t,e){var n=this,r=this.Ds.get(t);return Oe(null!==r,"Tried to release nonexistent target: "+t),this.persistence.runTransaction("Release target",e?"readwrite":"readwrite-primary",(function(i){var s=n.Es.hs(t);return e?He.resolve():He.forEach(s,(function(t){return n.persistence.Cs.us(i,t)})).next((function(){n.persistence.Cs.removeTarget(i,r)}))})).then((function(){n.Ds=n.Ds.remove(t),n.Rs.delete(r.target)}))},t.prototype.Co=function(t,e){var n=this,r=w.MIN,i=ee();return this.persistence.runTransaction("Execute query","readonly",(function(s){return n.Do(s,t.qn()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Os.Po(s,t.targetId).next((function(t){i=t}))})).next((function(){return n.Ts.Vo(s,t,e?r:w.MIN,e?i:ee())})).next((function(t){return{documents:t,ko:i}}))}))},t.prototype.No=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(n){return e.Os.Po(n,t)}))},t.prototype.Oo=function(){return this.persistence.Oo()},t.prototype.Fo=function(t){this.Ps.Uo(t)},t.prototype.jo=function(t){this.persistence.jo(t)},t.prototype.Zs=function(t,e,n){var r=this,i=e.batch,s=i.keys(),o=He.resolve();return s.forEach((function(r){o=o.next((function(){return n.gs(t,r)})).next((function(t){var s=t,o=e.Tr.get(r);Oe(null!==o,"ackVersions should contain every doc in the write."),(!s||s.version.k(o)<0)&&((s=i.Bt(r,s,e))?n.ms(s,e.Ir):Oe(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),o.next((function(){return r.Ps.eo(t,i)}))},t.prototype.Bu=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Yu(n,e.Ds)}))},t.prototype.xo=function(t){var e=this,n=this.Ds.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Os.ce(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.Lo=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.ks.Lo(e,t.Ss)})).then((function(e){var n=e.Mo;return t.Ss=e.readTime,n}))},t.prototype.Ls=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e=this;return s.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.ks.qo(t)}))];case 1:return t.Ss=n.sent(),[2]}}))}))},t.po=3e8,t}();function rn(t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){if(t.code!==d.FAILED_PRECONDITION||t.message!==mn)throw t;return xe("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function sn(t,e){return Oe(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function on(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function an(t,e){return"firestore_targets_"+t+"_"+e}var un=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,Oe(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.Bo=function(e,n,r){var i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new f(i.error.code,i.error.message)),s?new t(e,n,i.state,o):(Ae("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Qo=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ln=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,Oe(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.Bo=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new f(r.error.code,r.error.message)),i?new t(e,r.state,s):(Ae("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Qo=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cn=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bo=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=re(),o=0;i&&o<r.activeTargetIds.length;++o)i=U(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ae("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hn=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bo=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ae("SharedClientState","Failed to parse online state: "+e),null)},t}(),dn=function(){function t(){this.activeTargetIds=re()}return t.prototype.Go=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Wo=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Qo=function(){var t={activeTargetIds:this.activeTargetIds.K(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),fn=function(){function t(e,n,r,i,s){if(this.zo=e,this.platform=n,this.persistenceKey=r,this.Ko=i,this.Jo=null,this.Ho=null,this.Cr=null,this.Yo={},this.Xo=this.$o.bind(this),this.qu=!1,this.Zo=[],!t.th(this.platform))throw new f(d.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=s,this.nh=sn(this.persistenceKey,this.Ko),this.ih=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Yo[this.Ko]=new dn,this.eh=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.rh=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.uh=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.sh=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Xo)}return t.th=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,l,c,h=this;return s.__generator(this,(function(s){switch(s.label){case 0:return Oe(!this.qu,"WebStorageSharedClientState already started"),Oe(null!==this.Jo,"syncEngine property must be set before calling start()"),Oe(null!==this.Ho,"onlineStateHandler property must be set before calling start()"),[4,this.Jo.Oo()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ko&&(i=this.getItem(sn(this.persistenceKey,r)))&&(o=cn.Bo(r,i))&&(this.Yo[o.clientId]=o);for(this.oh(),(a=this.storage.getItem(this.sh))&&(u=this.hh(a))&&this.ah(u),l=0,c=this.Zo;l<c.length;l++)this.$o(c[l]);return this.Zo=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.qu=!0,[2]}}))}))},t.prototype.kr=function(t){this.setItem(this.ih,JSON.stringify(t))},t.prototype.fh=function(){var t=re();return P(this.Yo,(function(e,n){t=t.Ft(n.activeTargetIds)})),t},t.prototype.lh=function(t){for(var e in this.Yo)if(this.Yo.hasOwnProperty(e)&&this.Yo[e].activeTargetIds.has(t))return!0;return!1},t.prototype.dh=function(t){this.vh(t,"pending")},t.prototype.wh=function(t,e,n){this.vh(t,e,n),this.mh(t)},t.prototype.ph=function(t){var e="not-current";if(this.lh(t)){var n=this.storage.getItem(an(this.persistenceKey,t));if(n){var r=ln.Bo(t,n);r&&(e=r.state)}}return this.bh.Go(t),this.oh(),e},t.prototype.gh=function(t){this.bh.Wo(t),this.oh()},t.prototype.yh=function(t){return this.bh.activeTargetIds.has(t)},t.prototype._h=function(t){this.removeItem(an(this.persistenceKey,t))},t.prototype.Ih=function(t,e,n){this.Th(t,e,n)},t.prototype.Ms=function(t,e,n){var r=this;e.forEach((function(t){r.mh(t)})),this.currentUser=t,n.forEach((function(t){r.dh(t)}))},t.prototype.Eh=function(t){this.Dh(t)},t.prototype.shutdown=function(){this.qu&&(this.platform.window.removeEventListener("storage",this.Xo),this.removeItem(this.nh),this.qu=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return xe("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){xe("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){xe("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.$o=function(t){var e=this;if(t.storageArea===this.storage){if(xe("SharedClientState","EVENT",t.key,t.newValue),t.key===this.nh)return void Ae("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.zo.Qr((function(){return s.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,o,a;return s.__generator(this,(function(s){if(!this.qu)return this.Zo.push(t),[2];if(null===t.key)return[2];if(this.eh.test(t.key)){if(null==t.newValue)return n=this.Rh(t.key),[2,this.Sh(n,null)];if(e=this.Ah(t.key,t.newValue))return[2,this.Sh(e.clientId,e)]}else if(this.rh.test(t.key)){if(null!==t.newValue&&(r=this.Ch(t.key,t.newValue)))return[2,this.Ph(r)]}else if(this.uh.test(t.key)){if(null!==t.newValue&&(i=this.Vh(t.key,t.newValue)))return[2,this.kh(i)]}else if(t.key===this.sh){if(null!==t.newValue&&(o=this.hh(t.newValue)))return[2,this.ah(o)]}else t.key===this.ih&&(Oe(!!this.Cr,"Missing sequenceNumberHandler"),(a=function(t){var e=Be.Nr;if(null!=t)try{var n=JSON.parse(t);Oe("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Ae("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Be.Nr&&this.Cr(a));return[2]}))}))}))}},Object.defineProperty(t.prototype,"bh",{get:function(){return this.Yo[this.Ko]},enumerable:!0,configurable:!0}),t.prototype.oh=function(){this.setItem(this.nh,this.bh.Qo())},t.prototype.vh=function(t,e,n){var r=new un(this.currentUser,t,e,n),i=on(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Qo())},t.prototype.mh=function(t){var e=on(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Dh=function(t){this.storage.setItem(this.sh,JSON.stringify({clientId:this.Ko,onlineState:t}))},t.prototype.Th=function(t,e,n){var r=an(this.persistenceKey,t),i=new ln(t,e,n);this.setItem(r,i.Qo())},t.prototype.Rh=function(t){var e=this.eh.exec(t);return e?e[1]:null},t.prototype.Ah=function(t,e){var n=this.Rh(t);return Oe(null!==n,"Cannot parse client state key '"+t+"'"),cn.Bo(n,e)},t.prototype.Ch=function(t,e){var n=this.rh.exec(t);Oe(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return un.Bo(new h(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Vh=function(t,e){var n=this.uh.exec(t);Oe(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return ln.Bo(r,e)},t.prototype.hh=function(t){return hn.Bo(t)},t.prototype.Ph=function(t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(xe("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.Jo.Nh(t.batchId,t.state,t.error)]}))}))},t.prototype.kh=function(t){return this.Jo.Oh(t.targetId,t.state,t.error)},t.prototype.Sh=function(t,e){var n=this,r=this.fh();e?this.Yo[t]=e:delete this.Yo[t];var i=this.fh(),o=[],a=[];return i.forEach((function(t){return s.__awaiter(n,void 0,void 0,(function(){return s.__generator(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return s.__awaiter(n,void 0,void 0,(function(){return s.__generator(this,(function(e){return i.has(t)||a.push(t),[2]}))}))})),this.Jo.Fh(o,a)},t.prototype.ah=function(t){this.Yo[t.clientId]&&this.Ho(t.onlineState)},t}(),pn=function(){function t(){this.Uh=new dn,this.jh={},this.Jo=null,this.Ho=null,this.Cr=null}return t.prototype.dh=function(t){},t.prototype.wh=function(t,e,n){},t.prototype.ph=function(t){return this.Uh.Go(t),this.jh[t]||"not-current"},t.prototype.Ih=function(t,e,n){this.jh[t]=e},t.prototype.gh=function(t){this.Uh.Wo(t)},t.prototype.yh=function(t){return this.Uh.activeTargetIds.has(t)},t.prototype._h=function(t){delete this.jh[t]},t.prototype.fh=function(){return this.Uh.activeTargetIds},t.prototype.lh=function(t){return this.Uh.activeTargetIds.has(t)},t.prototype.start=function(){return this.Uh=new dn,Promise.resolve()},t.prototype.Ms=function(t,e,n){},t.prototype.Eh=function(t){},t.prototype.shutdown=function(){},t.prototype.kr=function(t){},t}(),mn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gn=function(){function t(){this.xh=[]}return t.prototype.Lh=function(t){this.xh.push(t)},t.prototype.Mh=function(){this.xh.forEach((function(t){return t()}))},t}(),yn=function(){function t(t,e,n){this.qh=t,this.Ps=e,this.Bh=n}return t.prototype.To=function(t,e){var n=this;return this.Ps.Qh(t,e).next((function(r){return n.Gh(t,e,r)}))},t.prototype.Gh=function(t,e,n){return this.qh.gs(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].qt(e,t);return t}))},t.prototype.Wh=function(t,e,n){var r=Kt();return e.forEach((function(t,e){for(var i=0,s=n;i<s.length;i++)e=s[i].qt(t,e);r=r.ut(t,e)})),r},t.prototype.Bs=function(t,e){var n=this;return this.qh.getEntries(t,e).next((function(e){return n.mo(t,e)}))},t.prototype.mo=function(t,e){var n=this;return this.Ps.zh(t,e).next((function(r){var i=n.Wh(t,e,r),s=Qt();return i.forEach((function(t,e){e||(e=new xt(t,w.V())),s=s.ut(t,e)})),s}))},t.prototype.Vo=function(t,e,n){return e.Tn()?this.Kh(t,e.path):e.Yn()?this.Jh(t,e,n):this.Hh(t,e,n)},t.prototype.Kh=function(t,e){return this.To(t,new I(e)).next((function(t){var e=Jt();return t instanceof It&&(e=e.ut(t.key,t)),e}))},t.prototype.Jh=function(t,e,n){var r=this;Oe(e.path.M(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,s=Jt();return this.Bh.Yh(t,i).next((function(o){return He.forEach(o,(function(o){var a=e.Ln(o.child(i));return r.Hh(t,a,n).next((function(t){t.forEach((function(t,e){s=s.ut(t,e)}))}))})).next((function(){return s}))}))},t.prototype.Hh=function(t,e,n){var r,i,s=this;return this.qh.Vo(t,e,n).next((function(n){return r=n,s.Ps.Xh(t,e)})).next((function(e){return s.$h(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],l=u.key,c=r.get(l),h=u.qt(c,c,s.gr);r=h instanceof It?r.ut(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.$h=function(t,e,n){for(var r=ee(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof bt&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.qh.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof It&&(l=l.ut(t,e))})),l}))},t}(),vn=function(){function t(){}return t.prototype.xs=function(t){this.Zh=t},t.prototype.Vo=function(t,e,n,r){var i=this;return Oe(void 0!==this.Zh,"setLocalDocumentsView() not called"),e.Mn()||n.isEqual(w.MIN)?this.tc(t,e):this.Zh.Bs(t,r).next((function(s){var a=i.nc(e,s);return(e.Kn()||e.Jn())&&i.ic(e.Dn,a,r,n)?i.tc(t,e):(Te()<=o.LogLevel.DEBUG&&xe("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Zh.Vo(t,e,n).next((function(t){return a.forEach((function(e){t=t.ut(e.key,e)})),t})))}))},t.prototype.nc=function(t,e){var n=new O((function(e,n){return t.Bn(e,n)}));return e.forEach((function(e,r){r instanceof It&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.ic=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.k(r)>0)},t.prototype.tc=function(t,e){return Te()<=o.LogLevel.DEBUG&&xe("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Zh.Vo(t,e,w.MIN)},t}();function bn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=wn(e)),e=_n(t.get(n),e);return wn(e)}function _n(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function wn(t){return t+"\x01\x01"}function En(t){var e=t.length;if(Oe(e>=2,"Invalid path "+t),2===e)return Oe("\x01"===t.charAt(0)&&"\x01"===t.charAt(1),"Non-empty path "+t+" had length 2"),C.Y;for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&Ne('Invalid encoded resource path: "'+t+'"'),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Ne('Invalid encoded resource path: "'+t+'"')}s=o+2}return new C(r)}var Cn=function(){function t(){this.ec=new Sn}return t.prototype.rc=function(t,e){return this.ec.add(e),He.resolve()},t.prototype.Yh=function(t,e){return He.resolve(this.ec.getEntries(e))},t}(),Sn=function(){function t(){this.index={}}return t.prototype.add=function(t){Oe(t.length%2==1,"Expected a collection path.");var e=t.B(),n=t.L(),r=this.index[e]||new O(C.F),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.B(),n=t.L(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new O(C.F)).K()},t}(),Tn=function(){function t(t,e){this.Bh=t,this.Cs=e,this.Ps=[],this.uc=1,this.lastStreamToken=L.Mt,this.sc=new O(tn.bn)}return t.prototype.oc=function(t){return He.resolve(0===this.Ps.length)},t.prototype.Ys=function(t,e,n){var r=e.batchId,i=this.hc(r,"acknowledged");Oe(0===i,"Can only acknowledge the first batch in the mutation queue");var s=this.Ps[i];return Oe(r===s.batchId,"Queue ordering failure: expected batch "+r+", got batch "+s.batchId),this.lastStreamToken=n,He.resolve()},t.prototype.uo=function(t){return He.resolve(this.lastStreamToken)},t.prototype.so=function(t,e){return this.lastStreamToken=e,He.resolve()},t.prototype.Ks=function(t,e,n,r){Oe(0!==r.length,"Mutation batches should not be empty");var i=this.uc;this.uc++,this.Ps.length>0&&Oe(this.Ps[this.Ps.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var s=new Fe(i,e,n,r);this.Ps.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.sc=this.sc.add(new tn(u.key,i)),this.Bh.rc(t,u.key.path.L())}return He.resolve(s)},t.prototype.io=function(t,e){return He.resolve(this.cc(e))},t.prototype.Hs=function(t,e){var n=this.cc(e);return Oe(null!=n,"Failed to find local mutation batch."),He.resolve(n.keys())},t.prototype._o=function(t,e){var n=this.ac(e+1),r=n<0?0:n;return He.resolve(this.Ps.length>r?this.Ps[r]:null)},t.prototype.ro=function(){return He.resolve(0===this.Ps.length?-1:this.uc-1)},t.prototype.qs=function(t){return He.resolve(this.Ps.slice())},t.prototype.Qh=function(t,e){var n=this,r=new tn(e,0),i=new tn(e,Number.POSITIVE_INFINITY),s=[];return this.sc.kt([r,i],(function(t){Oe(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.cc(t.ls);Oe(null!==r,"Batches in the index must exist in the main table"),s.push(r)})),He.resolve(s)},t.prototype.zh=function(t,e){var n=this,r=new O(Re);return e.forEach((function(t){var e=new tn(t,0),i=new tn(t,Number.POSITIVE_INFINITY);n.sc.kt([e,i],(function(e){Oe(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.ls)}))})),He.resolve(this.fc(r))},t.prototype.Xh=function(t,e){Oe(!e.Yn(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;I.nt(i)||(i=i.child(""));var s=new tn(new I(i),0),o=new O(Re);return this.sc.Nt((function(t){var e=t.key.path;return!!n.G(e)&&(e.length===r&&(o=o.add(t.ls)),!0)}),s),He.resolve(this.fc(o))},t.prototype.fc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.cc(t);null!==r&&n.push(r)})),n},t.prototype.eo=function(t,e){var n=this;Oe(0===this.hc(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.Ps.shift();var r=this.sc;return He.forEach(e.mutations,(function(i){var s=new tn(i.key,e.batchId);return r=r.delete(s),n.Cs.lc(t,i.key)})).next((function(){n.sc=r}))},t.prototype.Uo=function(t){},t.prototype.fs=function(t,e){var n=new tn(e,0),r=this.sc.Ot(n);return He.resolve(e.isEqual(r&&r.key))},t.prototype.to=function(t){return 0===this.Ps.length&&Oe(this.sc.M(),"Document leak -- detected dangling mutation references when queue is empty."),He.resolve()},t.prototype.hc=function(t,e){var n=this.ac(t);return Oe(n>=0&&n<this.Ps.length,"Batches must exist to be "+e),n},t.prototype.ac=function(t){return 0===this.Ps.length?0:t-this.Ps[0].batchId},t.prototype.cc=function(t){var e=this.ac(t);if(e<0||e>=this.Ps.length)return null;var n=this.Ps[e];return Oe(n.batchId===t,"If found batch must match"),n},t}(),In=function(){function t(t,e){this.Bh=t,this.dc=e,this.docs=new x(I.F),this.size=0}return t.prototype.ms=function(t,e,n){Oe(!n.isEqual(w.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.dc(e);return this.docs=this.docs.ut(r,{vc:e,size:o,readTime:n}),this.size+=o-s,this.Bh.rc(t,r.path.L())},t.prototype.bs=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.gs=function(t,e){var n=this.docs.get(e);return He.resolve(n?n.vc:null)},t.prototype.getEntries=function(t,e){var n=this,r=Kt();return e.forEach((function(t){var e=n.docs.get(t);r=r.ut(t,e?e.vc:null)})),He.resolve(r)},t.prototype.Vo=function(t,e,n){Oe(!e.Yn(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Jt(),i=new I(e.path.child("")),s=this.docs.lt(i);s.gt();){var o=s.bt(),a=o.value,u=a.vc,l=a.readTime;if(!e.path.G(o.key.path))break;l.k(n)<=0||u instanceof It&&e.matches(u)&&(r=r.ut(u.key,u))}return He.resolve(r)},t.prototype.wc=function(t,e){return He.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Lo=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.qo=function(t){return He.resolve(w.MIN)},t.prototype.Xs=function(e){return new t.mc(this)},t.prototype.pc=function(t){return He.resolve(this.size)},t.mc=function(t){function e(e){var n=t.call(this)||this;return n.bc=e,n}return s.__extends(e,t),e.prototype.Is=function(t){var e=this,n=[];return this.ds.forEach((function(r,i){i?n.push(e.bc.ms(t,i,e.readTime)):e.bc.bs(r)})),He.pu(n)},e.prototype.ys=function(t,e){return this.bc.gs(t,e)},e.prototype._s=function(t,e){return this.bc.getEntries(t,e)},e}(en),t}(),xn=function(){function t(t,e){this.gc=t,Oe((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.yc(void 0!==e?e:this.gc)}return t.prototype.next=function(){var t=this._c;return this._c+=2,t},t.prototype.after=function(t){return this.yc(t+2),this.next()},t.prototype.yc=function(t){Oe((1&t)===this.gc,"Cannot supply target ID from different generator ID"),this._c=t},t.Ic=function(){return new t(0,2)},t.Tc=function(){return new t(1)},t}(),An=function(){function t(t){this.persistence=t,this.Ec=new je((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=w.MIN,this.highestTargetId=0,this.Dc=0,this.Rc=new Xe,this.targetCount=0,this.Sc=xn.Ic()}return t.prototype.$i=function(t,e){return this.Ec.forEach((function(t,n){return e(n)})),He.resolve()},t.prototype.oo=function(t){return He.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ac=function(t){return He.resolve(this.Dc)},t.prototype.Ro=function(t){var e=this.Sc.after(this.highestTargetId);return this.highestTargetId=e,He.resolve(e)},t.prototype.wo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Dc&&(this.Dc=e),He.resolve()},t.prototype.Cc=function(t){this.Ec.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.Dc&&(this.Dc=t.sequenceNumber)},t.prototype.So=function(t,e){return Oe(!this.Ec.has(e.target),"Adding a target that already exists"),this.Cc(e),this.targetCount+=1,He.resolve()},t.prototype.do=function(t,e){return Oe(this.Ec.has(e.target),"Updating a non-existent target"),this.Cc(e),He.resolve()},t.prototype.Pc=function(t,e){return Oe(this.targetCount>0,"Removing a target from an empty cache"),Oe(this.Ec.has(e.target),"Removing a non-existent target from the cache"),this.Ec.delete(e.target),this.Rc.hs(e.targetId),this.targetCount-=1,He.resolve()},t.prototype.Ju=function(t,e,n){var r=this,i=0,s=[];return this.Ec.forEach((function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Ec.delete(o),s.push(r.Vc(t,a.targetId)),i++)})),He.pu(s).next((function(){return i}))},t.prototype.kc=function(t){return He.resolve(this.targetCount)},t.prototype.Do=function(t,e){var n=this.Ec.get(e)||null;return He.resolve(n)},t.prototype.ce=function(t,e){return Ne("Not yet implemented.")},t.prototype.ao=function(t,e,n){this.Rc.rs(e,n);var r=this.persistence.Cs,i=[];return r&&e.forEach((function(e){i.push(r.es(t,e))})),He.pu(i)},t.prototype.co=function(t,e,n){this.Rc.os(e,n);var r=this.persistence.Cs,i=[];return r&&e.forEach((function(e){i.push(r.us(t,e))})),He.pu(i)},t.prototype.Vc=function(t,e){return this.Rc.hs(e),He.resolve()},t.prototype.Po=function(t,e){var n=this.Rc.as(e);return He.resolve(n)},t.prototype.fs=function(t,e){return He.resolve(this.Rc.fs(e))},t}(),kn="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Nn=function(){function t(t,e){var n=this;this.clientId=t,this.Nc={},this.Oc=new Be(0),this.Fc=!1,this.Fc=!0,this.Cs=e(this),this.Os=new An(this),this.Bh=new Cn,this.qh=new In(this.Bh,(function(t){return n.Cs.Uc(t)}))}return t.prototype.shutdown=function(){return this.Fc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"qu",{get:function(){return this.Fc},enumerable:!0,configurable:!0}),t.prototype.Oo=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.jc=function(t){return t(!0)},t.prototype.xc=function(){},t.prototype.jo=function(t){},t.prototype.js=function(){return this.Bh},t.prototype.Vs=function(t){var e=this.Nc[t.i()];return e||(e=new Tn(this.Bh,this.Cs),this.Nc[t.i()]=e),e},t.prototype.Fs=function(){return this.Os},t.prototype.Ns=function(){return this.qh},t.prototype.runTransaction=function(t,e,n){var r=this;xe("MemoryPersistence","Starting transaction:",t);var i=new On(this.Oc.next());return this.Cs.Lc(),n(i).next((function(t){return r.Cs.Mc(i).next((function(){return t}))})).wu().then((function(t){return i.Mh(),t}))},t.prototype.qc=function(t,e){return He.bu(Object.values(this.Nc).map((function(n){return function(){return n.fs(t,e)}})))},t}(),On=function(t){function e(e){var n=t.call(this)||this;return n.fo=e,n}return s.__extends(e,t),e}(gn),Dn=function(){function t(t){this.persistence=t,this.Bc=null,this.Qc=null}return Object.defineProperty(t.prototype,"Gc",{get:function(){if(this.Qc)return this.Qc;throw Ne("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.As=function(t){this.Bc=t},t.prototype.es=function(t,e){return this.Gc.delete(e),He.resolve()},t.prototype.us=function(t,e){return this.Gc.add(e),He.resolve()},t.prototype.lc=function(t,e){return this.Gc.add(e),He.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Fs();return r.Po(t,e.targetId).next((function(t){t.forEach((function(t){return n.Gc.add(t)}))})).next((function(){return r.Pc(t,e)}))},t.prototype.Lc=function(){this.Qc=new Set},t.prototype.Mc=function(t){var e=this,n=this.persistence.Ns().Xs();return He.forEach(this.Gc,(function(r){return e.Wc(t,r).next((function(t){t||n.bs(r)}))})).next((function(){return e.Qc=null,n.apply(t)}))},t.prototype.vo=function(t,e){var n=this;return this.Wc(t,e).next((function(t){t?n.Gc.delete(e):n.Gc.add(e)}))},t.prototype.Uc=function(t){return 0},t.prototype.Wc=function(t,e){var n=this;return He.bu([function(){return n.persistence.Fs().fs(t,e)},function(){return n.persistence.qc(t,e)},function(){return He.resolve(n.Bc.fs(e))}])},t}(),Rn=function(){function t(){}return t.prototype.initialize=function(t,e,n,r,i,s){if(s.zc)throw new f(d.FAILED_PRECONDITION,kn);return this.clientId=r,Promise.resolve()},t.prototype.Kc=function(){var t=!1;return{qu:t,start:function(){return t=!0},stop:function(){return t=!1}}},t.prototype.Jc=function(){return Oe(!!this.clientId,"initialize() not called"),new Nn(this.clientId,(function(t){return new Dn(t)}))},t.prototype.Hc=function(){return new pn},t.prototype.clearPersistence=function(){throw new f(d.FAILED_PRECONDITION,kn)},t}(),Pn=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.zo=t,this.Fr=e,this.Yc=n,this.Xc=r,this.$c=i,this.Zc=0,this.ta=null,this.na=Date.now(),this.reset()}return t.prototype.reset=function(){this.Zc=0},t.prototype.ia=function(){this.Zc=this.$c},t.prototype.ea=function(t){var e=this;this.cancel();var n=Math.floor(this.Zc+this.ra()),r=Math.max(0,Date.now()-this.na),i=Math.max(0,n-r);this.Zc>0&&xe("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Zc+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ta=this.zo.iu(this.Fr,i,(function(){return e.na=Date.now(),t()})),this.Zc*=this.Xc,this.Zc<this.Yc&&(this.Zc=this.Yc),this.Zc>this.$c&&(this.Zc=this.$c)},t.prototype.cancel=function(){null!==this.ta&&(this.ta.cancel(),this.ta=null)},t.prototype.ra=function(){return(Math.random()-.5)*this.Zc},t}(),Mn=function(){function t(t,e,n,r,i,s){this.zo=t,this.ua=n,this.connection=r,this.sa=i,this.listener=s,this.state=0,this.oa=0,this.ha=null,this.stream=null,this.ca=new Pn(t,e)}return t.prototype.aa=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.fa=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?(Oe(0===this.state,"Already started"),this.auth()):this.la()},t.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.aa()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.da=function(){Oe(!this.aa(),"Can only inhibit backoff in a stopped state"),this.state=0,this.ca.reset()},t.prototype.va=function(){var t=this;this.fa()&&null===this.ha&&(this.ha=this.zo.iu(this.ua,6e4,(function(){return t.wa()})))},t.prototype.ma=function(t){this.pa(),this.stream.send(t)},t.prototype.wa=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){return this.fa()?[2,this.close(0)]:[2]}))}))},t.prototype.pa=function(){this.ha&&(this.ha.cancel(),this.ha=null)},t.prototype.close=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){switch(n.label){case 0:return Oe(this.aa(),"Only started streams should be closed."),Oe(3===t||V(e),"Can't provide an error when not in an error state."),this.pa(),this.ca.cancel(),this.oa++,3!==t?this.ca.reset():e&&e.code===d.RESOURCE_EXHAUSTED?(Ae(e.toString()),Ae("Using maximum backoff delay to prevent overloading the backend."),this.ca.ia()):e&&e.code===d.UNAUTHENTICATED&&this.sa.l(),null!==this.stream&&(this.ba(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ga(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ba=function(){},t.prototype.auth=function(){var t=this;Oe(0===this.state,"Must be in initial state to auth"),this.state=1;var e=this.ya(this.oa),n=this.oa;this.sa.getToken().then((function(e){t.oa===n&&t._a(e)}),(function(n){e((function(){var e=new f(d.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ia(e)}))}))},t.prototype._a=function(t){var e=this;Oe(1===this.state,"Trying to start stream in a non-starting state");var n=this.ya(this.oa);this.stream=this.Ta(t),this.stream.Ea((function(){n((function(){return Oe(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Ea()}))})),this.stream.ga((function(t){n((function(){return e.Ia(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.la=function(){var t=this;Oe(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.ca.ea((function(){return s.__awaiter(t,void 0,void 0,(function(){return s.__generator(this,(function(t){return Oe(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),Oe(this.aa(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.Ia=function(t){return Oe(this.aa(),"Can't handle server close on non-started stream"),xe("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ya=function(t){var e=this;return function(n){e.zo.Qr((function(){return e.oa===t?n():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ln=function(t){function e(e,n,r,i,s){var o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this;return o.serializer=i,o}return s.__extends(e,t),e.prototype.Ta=function(t){return this.connection.Da("Listen",t)},e.prototype.onMessage=function(t){this.ca.reset();var e=this.serializer.ke(t),n=this.serializer.Oe(t);return this.listener.Ra(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.De,e.addTarget=this.serializer.qn(t);var n=this.serializer.nr(t);n&&(e.labels=n),this.ma(e)},e.prototype.Sa=function(t){var e={};e.database=this.serializer.De,e.removeTarget=t,this.ma(e)},e}(Mn),Vn=function(t){function e(e,n,r,i,s){var o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this;return o.serializer=i,o.Aa=!1,o.lastStreamToken=L.Mt,o}return s.__extends(e,t),Object.defineProperty(e.prototype,"Ca",{get:function(){return this.Aa},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.Aa=!1,t.prototype.start.call(this)},e.prototype.ba=function(){this.Aa&&this.Pa([])},e.prototype.Ta=function(t){return this.connection.Da("Write",t)},e.prototype.onMessage=function(t){if(Oe(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.pe(t.streamToken),this.Aa){this.ca.reset();var e=this.serializer.Ge(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Va(n,e)}return Oe(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Aa=!0,this.listener.ka()},e.prototype.Na=function(){Oe(this.fa(),"Writing handshake requires an opened stream"),Oe(!this.Aa,"Handshake already completed");var t={};t.database=this.serializer.De,this.ma(t)},e.prototype.Pa=function(t){var e=this;Oe(this.fa(),"Writing mutations requires an opened stream"),Oe(this.Aa,"Handshake must be complete before writing mutations"),Oe(this.lastStreamToken.Lt()>0,"Trying to write mutation without a token");var n={streamToken:this.serializer.me(this.lastStreamToken),writes:t.map((function(t){return e.serializer.Fe(t)}))};this.ma(n)},e}(Mn),Fn=function(){function t(t,e,n,r){this.zo=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.Oa=function(t){return new Vn(this.zo,this.connection,this.credentials,this.serializer,t)},t.prototype.Fa=function(t){return new Ln(this.zo,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.De,writes:t.map((function(t){return e.serializer.Fe(t)}))};return this.Ua("Commit",n).then((function(t){return e.serializer.Ge(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.De,documents:t.map((function(t){return e.serializer._e(t)}))};return this.ja("BatchGetDocuments",n).then((function(n){var r=Qt();n.forEach((function(t){var n=e.serializer.Ve(t);r=r.ut(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);Oe(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.Ua=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Ua(t,e,r)})).catch((function(t){throw t.code===d.UNAUTHENTICATED&&n.credentials.l(),t}))},t.prototype.ja=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.ja(t,e,r)})).catch((function(t){throw t.code===d.UNAUTHENTICATED&&n.credentials.l(),t}))},t}();function Un(t,e){if(0!==e.length)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ir(e.length,"argument")+".")}function jn(t,e,n){if(e.length!==n)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires "+ir(n,"argument")+", but was called with "+ir(e.length,"argument")+".")}function qn(t,e,n){if(e.length<n)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ir(n,"argument")+", but was called with "+ir(e.length,"argument")+".")}function Bn(t,e,n,r){if(e.length<n||e.length>r)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ir(e.length,"argument")+".")}function zn(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+ir(r,"element")+".")}function Gn(t,e,n,r){Yn(t,e,rr(n)+" argument",r)}function $n(t,e,n,r){void 0!==r&&Gn(t,e,n,r)}function Hn(t,e,n,r){Yn(t,e,n+" option",r)}function Wn(t,e,n,r){void 0!==r&&Hn(t,e,n,r)}function Qn(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var s=[],o=0,a=i;o<a.length;o++){var u=a[o];if(u===r)return;s.push(Zn(u))}var l=Zn(r);throw new f(d.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+s.join(", "))}(t,0,n,r,i)}function Kn(t,e,n,r){if(!e.some((function(t){return t===r})))throw new f(d.INVALID_ARGUMENT,"Invalid value "+Zn(r)+" provided to function "+t+"() for its "+rr(n)+" argument. Acceptable values: "+e.join(", "))}function Yn(t,e,n,r){if(!("object"===e?Jn(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Zn(r);throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Jn(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Zn(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ne("Unknown wrong type: "+typeof t)}function Xn(t,e,n){if(void 0===n)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+rr(e)+" argument, but it was undefined.")}function tr(t,e,n){P(e,(function(e,r){if(n.indexOf(e)<0)throw new f(d.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function er(t,e,n,r){var i=Zn(r);return new f(d.INVALID_ARGUMENT,"Function "+t+"() requires its "+rr(n)+" argument to be a "+e+", but it was: "+i)}function nr(t,e,n){if(n<=0)throw new f(d.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+rr(e)+" argument to be a positive number, but it was: "+n+".")}function rr(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ir(t,e){return t+" "+e+(1===t?"":"s")}function sr(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new f(d.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function or(){if("undefined"==typeof Uint8Array)throw new f(d.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ar(){if(!Ce.xt().xa)throw new f(d.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ur=function(){function t(t){ar(),this.La=t}return t.fromBase64String=function(e){jn("Blob.fromBase64String",arguments,1),Gn("Blob.fromBase64String","string",1,e),ar();try{return new t(L.fromBase64String(e))}catch(t){throw new f(d.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(jn("Blob.fromUint8Array",arguments,1),or(),!(e instanceof Uint8Array))throw er("Blob.fromUint8Array","Uint8Array",1,e);return new t(L.fromUint8Array(e))},t.prototype.toBase64=function(){return jn("Blob.toBase64",arguments,0),ar(),this.La.toBase64()},t.prototype.toUint8Array=function(){return jn("Blob.toUint8Array",arguments,0),or(),this.La.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.La.isEqual(t.La)},t}(),lr=sr(ur,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),cr=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];zn("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(Gn("FieldPath","string",n,t[n]),0===t[n].length)throw new f(d.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Ma=new T(t)}return t.documentId=function(){return t.qa},t.prototype.isEqual=function(e){if(!(e instanceof t))throw er("isEqual","FieldPath",1,e);return this.Ma.isEqual(e.Ma)},t.qa=new t(T.Z().J()),t}(),hr=new RegExp("[~\\*/\\[\\]]"),dr=function(){function t(t){this.Ba=t}return t.delete=function(){return Un("FieldValue.delete",arguments),fr.instance},t.serverTimestamp=function(){return Un("FieldValue.serverTimestamp",arguments),pr.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qn("FieldValue.arrayUnion",arguments,1),new mr(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qn("FieldValue.arrayRemove",arguments,1),new gr(t)},t.increment=function(t){return Gn("FieldValue.increment","number",1,t),jn("FieldValue.increment",arguments,1),new yr(t)},t.prototype.isEqual=function(t){return this===t},t}(),fr=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return s.__extends(e,t),e.instance=new e,e}(dr),pr=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(e,t),e.instance=new e,e}(dr),mr=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n.Qa=e,n}return s.__extends(e,t),e}(dr),gr=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n.Qa=e,n}return s.__extends(e,t),e}(dr),yr=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n.Ga=e,n}return s.__extends(e,t),e}(dr),vr=sr(dr,"Use FieldValue.<field>() instead."),br=function(){function t(t,e){if(jn("GeoPoint",arguments,2),Gn("GeoPoint","number",1,t),Gn("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new f(d.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new f(d.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Wa=t,this.za=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Wa},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.za},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Wa===t.Wa&&this.za===t.za},t.prototype.A=function(t){return Re(this.Wa,t.Wa)||Re(this.za,t.za)},t}(),_r=/^__.*__$/,wr=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.Ka=function(t,e){var n=[];return n.push(null!==this.en?new bt(t,this.data,this.en,e):new vt(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new _t(t,this.fieldTransforms)),n},t}(),Er=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.Ka=function(t,e){var n=[new bt(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new _t(t,this.fieldTransforms)),n},t}();function Cr(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne("Unexpected case for UserDataSource: "+t)}}var Sr=function(){function t(t,e,n,r,i,s){this.Ja=t,this.methodName=e,this.path=n,this.Ha=r,void 0===i&&this.Ya(),this.Ha=void 0!==r&&r,this.fieldTransforms=i||[],this.en=s||[]}return t.prototype.Xa=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Ja,this.methodName,n,!1,this.fieldTransforms,this.en);return r.$a(e),r},t.prototype.Za=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Ja,this.methodName,n,!1,this.fieldTransforms,this.en);return r.Ya(),r},t.prototype.tf=function(e){return new t(this.Ja,this.methodName,null,!0,this.fieldTransforms,this.en)},t.prototype.nf=function(t){var e=null===this.path||this.path.M()?"":" (found in field "+this.path.toString()+")";return new f(d.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.en.find((function(e){return t.G(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.G(e.field)}))},t.prototype.Ya=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.$a(this.path.get(t))},t.prototype.$a=function(t){if(0===t.length)throw this.nf("Document fields must not be empty");if(Cr(this.Ja)&&_r.test(t))throw this.nf('Document fields cannot begin and end with "__"')},t}(),Tr=function(t,e){this.ae=t,this.key=e},Ir=function(){function t(t,e){this.serializer=t,this.if=e}return t.prototype.ef=function(t,e){var n=new Sr(0,t,T.Y);Ar("Data must be an object, but it was:",n,e);var r=this.rf(e,n);return new wr(new Ct(r),null,n.fieldTransforms)},t.prototype.uf=function(t,e,n){var r=new Sr(2,t,T.Y);Ar("Data must be an object, but it was:",r,e);var i,s,o=this.rf(e,r);if(n){for(var a=new O(T.F),u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof cr)h=c.Ma;else{if("string"!=typeof c)throw Ne("Expected stringOrFieldPath to be a string or a FieldPath");h=Nr(t,c)}if(!r.contains(h))throw new f(d.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=ft.Kt(a),s=r.fieldTransforms.filter((function(t){return i.Ht(t.field)}))}else i=ft.Jt(r.en),s=r.fieldTransforms;return new wr(new Ct(o),i,s)},t.prototype.sf=function(t,e){var n=this,r=new Sr(1,t,T.Y);Ar("Data must be an object, but it was:",r,e);var i=new O(T.F),s=Ct.ln();P(e,(function(e,o){var a=Nr(t,e),u=r.Za(a);if((o=n.hf(o,u))instanceof fr)i=i.add(a);else{var l=n.cf(o,u);null!=l&&(i=i.add(a),s.set(a,l))}}));var o=ft.Kt(i);return new Er(s.on(),o,r.fieldTransforms)},t.prototype.af=function(t,e,n,r){var i=new Sr(1,t,T.Y),s=[kr(t,e)],o=[n];if(r.length%2!=0)throw new f(d.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)s.push(kr(t,r[a])),o.push(r[a+1]);var u=new O(T.F),l=Ct.ln();for(a=0;a<s.length;++a){var c=s[a],h=i.Za(c),p=this.hf(o[a],h);if(p instanceof fr)u=u.add(c);else{var m=this.cf(p,h);null!=m&&(u=u.add(c),l.set(c,m))}}var g=ft.Kt(u);return new Er(l.on(),g,i.fieldTransforms)},t.prototype.ff=function(t,e,n){void 0===n&&(n=!1);var r=new Sr(n?4:3,t,T.Y),i=this.cf(e,r);return Oe(null!=i,"Parsed data should not be null."),Oe(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.hf=function(t,e){try{return this.if(t)}catch(t){var n=Or(t);throw e.nf(n)}},t.prototype.cf=function(t,e){if(xr(t=this.hf(t,e)))return Ar("Unsupported field value:",e,t),this.rf(t,e);if(t instanceof dr)return this.lf(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.Ha&&4!==e.Ja)throw e.nf("Nested arrays are not supported");return this.df(t,e)}return this.vf(t,e)},t.prototype.rf=function(t,e){var n=this,r={};return M(t)?e.path&&e.path.length>0&&e.en.push(e.path):P(t,(function(t,i){var s=n.cf(i,e.Xa(t));null!=s&&(r[t]=s)})),{mapValue:{fields:r}}},t.prototype.df=function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=this.cf(s[i],e.tf(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}},t.prototype.lf=function(t,e){if(!Cr(e.Ja))throw e.nf(t.Ba+"() can only be used with update() and set()");if(null===e.path)throw e.nf(t.Ba+"() is not currently supported inside arrays");if(t instanceof fr){if(2!==e.Ja)throw 1===e.Ja?(Oe(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.nf("FieldValue.delete() can only appear at the top level of your update data")):e.nf("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.en.push(e.path)}else if(t instanceof pr)e.fieldTransforms.push(new pt(e.path,ot.instance));else if(t instanceof mr){var n=this.wf(t.Ba,t.Qa),r=new at(n);e.fieldTransforms.push(new pt(e.path,r))}else if(t instanceof gr){n=this.wf(t.Ba,t.Qa);var i=new ut(n);e.fieldTransforms.push(new pt(e.path,i))}else if(t instanceof yr){var s=this.ff("FieldValue.increment",t.Ga),o=new lt(this.serializer,s);e.fieldTransforms.push(new pt(e.path,o))}else Ne("Unknown FieldValue type: "+t)},t.prototype.vf=function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return this.serializer.we(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_.fromDate(t);return{timestampValue:this.serializer.O(n)}}if(t instanceof _)return n=new _(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:this.serializer.O(n)};if(t instanceof br)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ur)return{bytesValue:this.serializer.me(t)};if(t instanceof Tr)return{referenceValue:this.serializer.be(t.key.path,t.ae)};throw e.nf("Unsupported field value: "+Zn(t))},t.prototype.wf=function(t,e){var n=this;return e.map((function(e,r){var i=new Sr(3,t,T.Y);return n.cf(e,i.tf(r))}))},t}();function xr(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _||t instanceof br||t instanceof ur||t instanceof Tr||t instanceof dr)}function Ar(t,e,n){if(!xr(n)||!Jn(n)){var r=Zn(n);throw e.nf("an object"===r?t+" a custom object":t+" "+r)}}function kr(t,e){if(e instanceof cr)return e.Ma;if("string"==typeof e)return Nr(t,e);throw new f(d.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Nr(t,e){try{return function(t){if(t.search(hr)>=0)throw new f(d.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(cr.bind.apply(cr,s.__spreadArrays([void 0],t.split("."))))}catch(e){throw new f(d.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Ma}catch(e){var n=Or(e);throw new f(d.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Or(t){return t instanceof Error?t.message:t.toString()}var Dr=function(){function t(t){this.mf=t,this.pf=Xt(),this.mutations=[],this.bf=!1,this.gf=null,this.yf=new Set}return t.prototype.lookup=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n=this;return s.__generator(this,(function(r){switch(r.label){case 0:if(this._f(),this.mutations.length>0)throw new f(d.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.mf.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof xt||t instanceof It?n.If(t):Ne("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.Ka(t,this.tn(t))),this.yf.add(t)},t.prototype.update=function(t,e){try{this.write(e.Ka(t,this.Tf(t)))}catch(t){this.gf=t}this.yf.add(t)},t.prototype.delete=function(t){this.write([new wt(t,this.tn(t))]),this.yf.add(t)},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e=this;return s.__generator(this,(function(n){switch(n.label){case 0:if(this._f(),this.gf)throw this.gf;return t=this.pf,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Et(t,e.tn(t)))})),[4,this.mf.commit(this.mutations)];case 1:return n.sent(),this.bf=!0,[2]}}))}))},t.prototype.If=function(t){var e;if(t instanceof It)e=t.version;else{if(!(t instanceof xt))throw Ne("Document in a transaction was a "+t.constructor.name);e=w.V()}var n=this.pf.get(t.key);if(null!==n){if(!e.isEqual(n))throw new f(d.ABORTED,"Document version changed between two reads.")}else this.pf=this.pf.ut(t.key,e)},t.prototype.tn=function(t){var e=this.pf.get(t);return!this.yf.has(t)&&e?gt.updateTime(e):gt.NONE},t.prototype.Tf=function(t){var e=this.pf.get(t);if(!this.yf.has(t)&&e){if(e.isEqual(w.V()))throw new f(d.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(e)}return gt.exists(!0)},t.prototype.write=function(t){this._f(),this.mutations=this.mutations.concat(t)},t.prototype._f=function(){Oe(!this.bf,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Rr=function(){function t(t,e){this.Or=t,this.Ho=e,this.state="Unknown",this.Ef=0,this.Df=null,this.Rf=!0}return t.prototype.Sf=function(){var t=this;0===this.Ef&&(this.Af("Unknown"),Oe(null===this.Df,"onlineStateTimer shouldn't be started yet"),this.Df=this.Or.iu("online_state_timeout",1e4,(function(){return t.Df=null,Oe("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Cf("Backend didn't respond within 10 seconds."),t.Af("Offline"),Promise.resolve()})))},t.prototype.Pf=function(t){"Online"===this.state?(this.Af("Unknown"),Oe(0===this.Ef,"watchStreamFailures must be 0"),Oe(null===this.Df,"onlineStateTimer must be null")):(this.Ef++,this.Ef>=1&&(this.Vf(),this.Cf("Connection failed 1 times. Most recent error: "+t.toString()),this.Af("Offline")))},t.prototype.set=function(t){this.Vf(),this.Ef=0,"Online"===t&&(this.Rf=!1),this.Af(t)},t.prototype.Af=function(t){t!==this.state&&(this.state=t,this.Ho(t))},t.prototype.Cf=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rf?(Ae(e),this.Rf=!1):xe("OnlineStateTracker",e)},t.prototype.Vf=function(){null!==this.Df&&(this.Df.cancel(),this.Df=null)},t}(),Pr=function(){function t(t,e,n,r,i){var o=this;this.kf=t,this.mf=e,this.Nf=[],this.Of=new Map,this.Ff=null,this.networkEnabled=!1,this.isPrimary=!1,this.Uf=i,this.Uf.jf((function(t){n.Qr((function(){return s.__awaiter(o,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.xf()?(xe("RemoteStore","Restarting streams for network reachability change."),[4,this.Lf()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mf=new Rr(n,r),this.qf=this.mf.Fa({Ea:this.Bf.bind(this),ga:this.Qf.bind(this),Ra:this.Gf.bind(this)}),this.Wf=this.mf.Oa({Ea:this.zf.bind(this),ga:this.Kf.bind(this),ka:this.Jf.bind(this),Va:this.Va.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.xf()?(t=this.Wf,[4,this.kf.uo()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.Hf()?this.Yf():this.Mf.set("Unknown"),[4,this.Xf()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$f()];case 1:return t.sent(),this.Mf.set("Offline"),[2]}}))}))},t.prototype.$f=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return[4,this.Wf.stop()];case 1:return t.sent(),[4,this.qf.stop()];case 2:return t.sent(),this.Nf.length>0&&(xe("RemoteStore","Stopping write stream with "+this.Nf.length+" pending writes"),this.Nf=[]),this.Zf(),[2]}}))}))},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return xe("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.$f()];case 1:return t.sent(),this.Uf.shutdown(),this.Mf.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Of.has(t.targetId)||(this.Of.set(t.targetId,t),this.Hf()?this.Yf():this.qf.fa()&&this.tl(t))},t.prototype.nl=function(t){Oe(this.Of.has(t),"unlisten called on target no currently watched: "+t),this.Of.delete(t),this.qf.fa()&&this.il(t),0===this.Of.size&&(this.qf.fa()?this.qf.va():this.xf()&&this.Mf.set("Unknown"))},t.prototype.ce=function(t){return this.Of.get(t)||null},t.prototype.he=function(t){return this.Jo.he(t)},t.prototype.tl=function(t){this.Ff.Mi(t.targetId),this.qf.watch(t)},t.prototype.il=function(t){this.Ff.Mi(t),this.qf.Sa(t)},t.prototype.Yf=function(){Oe(this.Hf(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Ff=new fe(this),this.qf.start(),this.Mf.Sf()},t.prototype.Hf=function(){return this.xf()&&!this.qf.aa()&&this.Of.size>0},t.prototype.xf=function(){return this.isPrimary&&this.networkEnabled},t.prototype.Zf=function(){this.Ff=null},t.prototype.Bf=function(){return s.__awaiter(this,void 0,void 0,(function(){var t=this;return s.__generator(this,(function(e){return this.Of.forEach((function(e,n){t.tl(e)})),[2]}))}))},t.prototype.Qf=function(t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){return void 0===t&&Oe(!this.Hf(),"Watch stream was stopped gracefully while still needed."),this.Zf(),this.Hf()?(this.Mf.Pf(t),this.Yf()):this.Mf.set("Unknown"),[2]}))}))},t.prototype.Gf=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:return this.Mf.set("Online"),t instanceof he&&2===t.state&&t.cause?[2,this.el(t)]:(t instanceof le?this.Ff.Ji(t):t instanceof ce?this.Ff.ie(t):(Oe(t instanceof he,"Expected watchChange to be an instance of WatchTargetChange"),this.Ff.Xi(t)),e.isEqual(w.MIN)?[3,3]:[4,this.kf.oo()]);case 1:return n=r.sent(),e.k(n)>=0?[4,this.rl(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.rl=function(t){var e=this;Oe(!t.isEqual(w.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.Ff.ue(t);return n.wi.forEach((function(n,r){if(n.resumeToken.Lt()>0){var i=e.Of.get(r);i&&e.Of.set(r,i.ei(n.resumeToken,t))}})),n.mi.forEach((function(t){var n=e.Of.get(t);if(n){e.Of.set(t,n.ei(L.Mt,n.ni)),e.il(t);var r=new zt(n.target,t,1,n.sequenceNumber);e.tl(r)}})),this.Jo.ho(n)},t.prototype.el=function(t){var e=this;Oe(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return s.__awaiter(e,void 0,void 0,(function(){return s.__generator(this,(function(e){return this.Of.has(t)?(this.Of.delete(t),this.Ff.removeTarget(t),[2,this.Jo.ul(t,n)]):[2]}))}))}))})),r},t.prototype.Xf=function(){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(e){switch(e.label){case 0:return this.sl()?[4,this.kf.yo(this.Nf.length>0?this.Nf[this.Nf.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.Nf.length&&this.Wf.va(),[3,4]);case 2:return this.ol(t),[4,this.Xf()];case 3:e.sent(),e.label=4;case 4:return this.hl()&&this.cl(),[2]}}))}))},t.prototype.sl=function(){return this.xf()&&this.Nf.length<10},t.prototype.al=function(){return this.Nf.length},t.prototype.ol=function(t){Oe(this.sl(),"addToWritePipeline called when pipeline is full"),this.Nf.push(t),this.Wf.fa()&&this.Wf.Ca&&this.Wf.Pa(t.mutations)},t.prototype.hl=function(){return this.xf()&&!this.Wf.aa()&&this.Nf.length>0},t.prototype.cl=function(){Oe(this.hl(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Wf.start()},t.prototype.zf=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){return this.Wf.Na(),[2]}))}))},t.prototype.Jf=function(){var t=this;return this.kf.so(this.Wf.lastStreamToken).then((function(){for(var e=0,n=t.Nf;e<n.length;e++)t.Wf.Pa(n[e].mutations)})).catch(rn)},t.prototype.Va=function(t,e){var n=this;Oe(this.Nf.length>0,"Got result for empty write pipeline");var r=this.Nf.shift(),i=Ue.from(r,t,e,this.Wf.lastStreamToken);return this.Jo.fl(i).then((function(){return n.Xf()}))},t.prototype.Kf=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e=this;return s.__generator(this,(function(n){return void 0===t&&Oe(!this.hl(),"Write stream was stopped gracefully while still needed."),t&&this.Nf.length>0?[2,(this.Wf.Ca?this.ll(t):this.dl(t)).then((function(){e.hl()&&e.cl()}))]:[2]}))}))},t.prototype.dl=function(t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){return $t(t.code)?(xe("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.Wf.lastStreamToken),this.Wf.lastStreamToken=L.Mt,[2,this.kf.so(L.Mt).catch(rn)]):[2]}))}))},t.prototype.ll=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n=this;return s.__generator(this,(function(r){return $t(i=t.code)&&i!==d.ABORTED?(e=this.Nf.shift(),this.Wf.da(),[2,this.Jo.vl(e.batchId,t).then((function(){return n.Xf()}))]):[2];var i}))}))},t.prototype.wl=function(){return new Dr(this.mf)},t.prototype.Lf=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$f()];case 1:return t.sent(),this.Mf.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.ml=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.xf()?(xe("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Lf()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.pl=function(t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.$f()];case 3:e.sent(),this.Mf.set("Unknown"),e.label=4;case 4:return[2]}}))}))},t}(),Mr=function(t){this.key=t},Lr=function(t){this.key=t},Vr=function(){function t(t,e){this.query=t,this.bl=e,this.gl=null,this._i=!1,this.yl=ee(),this.fi=ee(),this._l=new ie(t.Bn.bind(t))}return Object.defineProperty(t.prototype,"Il",{get:function(){return this.bl},enumerable:!0,configurable:!0}),t.prototype.Tl=function(t,e){var n=this,r=e?e.El:new se,i=e?e._l:this._l,s=e?e.fi:this.fi,o=i,a=!1,u=this.query.Kn()&&i.size===this.query.limit?i.last():null,l=this.query.Jn()&&i.size===this.query.limit?i.first():null;if(t.ct((function(t,e){var c=i.get(t),h=e instanceof It?e:null;h&&(Oe(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!c&&n.fi.has(c.key),f=!!h&&(h.nn||n.fi.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Dl(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.query.Bn(h,u)>0||l&&n.query.Bn(h,l)<0)&&(a=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(a=!0)),p&&(h?(o=o.add(h),s=f?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))})),this.query.Kn()||this.query.Jn())for(;o.size>this.query.limit;){var c=this.query.Kn()?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return Oe(!a||!e,"View was refilled using docs that themselves needed refilling."),{_l:o,El:r,ic:a,fi:s}},t.prototype.Dl=function(t,e){return t.nn&&e.hasCommittedMutations&&!e.nn},t.prototype.Is=function(t,e,n){var r=this;Oe(!t.ic,"Cannot apply changes that need a refill");var i=this._l;this._l=t._l,this.fi=t.fi;var s=t.El.ci();s.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.Bn(t.doc,e.doc)})),this.Rl(n);var o=e?this.Sl():[],a=0===this.yl.size&&this._i?1:0,u=a!==this.gl;return this.gl=a,0!==s.length||u?{snapshot:new oe(this.query,t._l,i,s,t.fi,0===a,u,!1),Al:o}:{Al:o}},t.prototype.Cl=function(t){return this._i&&"Offline"===t?(this._i=!1,this.Is({_l:this._l,El:new se,fi:this.fi,ic:!1},!1)):{Al:[]}},t.prototype.Pl=function(t){return!this.bl.has(t)&&!!this._l.has(t)&&!this._l.get(t).nn},t.prototype.Rl=function(t){var e=this;t&&(t.Ii.forEach((function(t){return e.bl=e.bl.add(t)})),t.Ti.forEach((function(t){return Oe(e.bl.has(t),"Modified document "+t+" not found in view.")})),t.Ei.forEach((function(t){return e.bl=e.bl.delete(t)})),this._i=t._i)},t.prototype.Sl=function(){var t=this;if(!this._i)return[];var e=this.yl;this.yl=ee(),this._l.forEach((function(e){t.Pl(e.key)&&(t.yl=t.yl.add(e.key))}));var n=[];return e.forEach((function(e){t.yl.has(e)||n.push(new Lr(e))})),this.yl.forEach((function(t){e.has(t)||n.push(new Mr(t))})),n},t.prototype.Vl=function(t){this.bl=t.ko,this.yl=ee();var e=this.Tl(t.documents);return this.Is(e,!0)},t.prototype.kl=function(){return oe.vi(this.query,this._l,this.fi,0===this.gl)},t}(),Fr=function(){function t(t,e,n,r){this.Or=t,this.Nl=e,this.updateFunction=n,this.xr=r,this.Ol=5,this.ca=new Pn(this.Or,"retry_transaction")}return t.prototype.run=function(){this.Fl()},t.prototype.Fl=function(){var t=this;this.ca.ea((function(){return s.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return s.__generator(this,(function(r){return t=this.Nl.wl(),(e=this.Ul(t))&&e.then((function(e){n.Or.Qr((function(){return t.commit().then((function(){n.xr.resolve(e)})).catch((function(t){n.jl(t)}))}))})).catch((function(t){n.jl(t)})),[2]}))}))}))},t.prototype.Ul=function(t){try{var e=this.updateFunction(t);return!V(e)&&e.catch&&e.then?e:(this.xr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.xr.reject(t),null}},t.prototype.jl=function(t){var e=this;this.Ol>0&&this.xl(t)?(this.Ol-=1,this.Or.Qr((function(){return e.Fl(),Promise.resolve()}))):this.xr.reject(t)},t.prototype.xl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!$t(e)}return!1},t}(),Ur=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jr=function(t){this.key=t,this.Ll=!1},qr=function(){function t(t,e,n,r,i){this.kf=t,this.Nl=e,this.Ml=n,this.currentUser=r,this.ql=i,this.Bl=null,this.Ql=new je((function(t){return t.canonicalId()})),this.Gl=new Map,this.Wl=[],this.zl=new x(I.F),this.Kl=new Map,this.Jl=new Xe,this.Hl={},this.Yl=new Map,this.Xl=xn.Tc(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){Oe(null!==t,"SyncEngine listener cannot be null"),Oe(null===this.Bl,"SyncEngine already has a subscriber."),this.Bl=t},t.prototype.listen=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return this.Zl("listen()"),(r=this.Ql.get(t))?(this.Ml.ph(e=r.targetId),n=r.view.kl(),[3,4]):[3,1];case 1:return[4,this.kf.Eo(t.qn())];case 2:return i=s.sent(),o=this.Ml.ph(i.targetId),[4,this.td(t,e=i.targetId,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.Nl.listen(i),s.label=4;case 4:return this.Bl.Ra([n]),[2,e]}}))}))},t.prototype.td=function(t,e,n){return s.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,u,l;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,this.kf.Co(t,!0)];case 1:return r=s.sent(),i=new Vr(t,r.ko),o=i.Tl(r.documents),a=ue.yi(e,n&&"Offline"!==this.onlineState),Oe(0===(u=i.Is(o,!0===this.isPrimary,a)).Al.length,"View returned limbo docs before target ack from the server."),Oe(!!u.snapshot,"applyChanges for new view should always return a snapshot"),l=new Ur(t,e,i),this.Ql.set(t,l),this.Gl.has(e)?this.Gl.get(e).push(t):this.Gl.set(e,[t]),[2,u.snapshot]}}))}))},t.prototype.nd=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this.kf.Co(t.query,!0)];case 1:return e=r.sent(),n=t.view.Vl(e),this.isPrimary&&this.ed(t.targetId,n.Al),[2,n]}}))}))},t.prototype.nl=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return s.__generator(this,(function(i){switch(i.label){case 0:return this.Zl("unlisten()"),Oe(!!(e=this.Ql.get(t)),"Trying to unlisten on query not found:"+t),(n=this.Gl.get(e.targetId)).length>1?(this.Gl.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),this.Ql.delete(t),[2]):this.isPrimary?(this.Ml.gh(e.targetId),this.Ml.lh(e.targetId)?[3,2]:[4,this.kf.Ao(e.targetId,!1).then((function(){r.Ml._h(e.targetId),r.Nl.nl(e.targetId),r.rd(e.targetId)})).catch(rn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.rd(e.targetId),[4,this.kf.Ao(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:return this.Zl("write()"),[4,this.kf.zs(t)];case 1:return n=r.sent(),this.Ml.dh(n.batchId),this.ud(n.batchId,e),[4,this.sd(n.ds)];case 2:return r.sent(),[4,this.Nl.Xf()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new Fr(t,this.Nl,e,n).run()},t.prototype.ho=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n=this;return s.__generator(this,(function(r){switch(r.label){case 0:this.Zl("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.kf.ho(t)];case 2:return e=r.sent(),t.wi.forEach((function(t,e){var r=n.Kl.get(e);r&&(Oe(t.Ii.size+t.Ti.size+t.Ei.size<=1,"Limbo resolution for single document contains multiple changes."),t.Ii.size>0?r.Ll=!0:t.Ti.size>0?Oe(r.Ll,"Received change for limbo target document without add."):t.Ei.size>0&&(Oe(r.Ll,"Received remove for limbo target document without add."),r.Ll=!1))})),[4,this.sd(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,rn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Cl=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this.Zl("applyOnlineStateChange()");var n=[];this.Ql.forEach((function(e,r){var i=r.view.Cl(t);Oe(0===i.Al.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.Bl.od(t),this.Bl.Ra(n),this.onlineState=t,this.isPrimary&&this.Ml.Eh(t)}},t.prototype.ul=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,u=this;return s.__generator(this,(function(s){switch(s.label){case 0:return this.Zl("rejectListens()"),this.Ml.Ih(t,"rejected",e),n=this.Kl.get(t),(r=n&&n.key)?(this.zl=this.zl.remove(r),this.Kl.delete(t),this.hd(),i=(i=new x(I.F)).ut(r,new xt(r,w.V())),o=ee().add(r),a=new ae(w.MIN,new Map,new O(Re),i,o),[2,this.ho(a)]):[3,1];case 1:return[4,this.kf.Ao(t,!1).then((function(){return u.rd(t,e)})).catch(rn)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},t.prototype.Nh=function(t,e,n){return s.__awaiter(this,void 0,void 0,(function(){var r;return s.__generator(this,(function(i){switch(i.label){case 0:return this.Zl("applyBatchState()"),[4,this.kf.Js(t)];case 1:return null===(r=i.sent())?(xe("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Nl.Xf()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.ad(t,n||null),this.kf.Fo(t)):Ne("Unknown batchState: "+e),i.label=4;case 4:return[4,this.sd(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.fl=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n;return s.__generator(this,(function(r){switch(r.label){case 0:this.Zl("applySuccessfulWrite()"),this.ad(e=t.batch.batchId,null),this.fd(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.kf.Ys(t)];case 2:return n=r.sent(),this.Ml.wh(e,"acknowledged"),[4,this.sd(n)];case 3:return r.sent(),[3,6];case 4:return[4,rn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.vl=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:this.Zl("rejectFailedWrite()"),this.ad(t,e),this.fd(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.kf.no(t)];case 2:return n=r.sent(),this.Ml.wh(t,"rejected",e),[4,this.sd(n)];case 3:return r.sent(),[3,6];case 4:return[4,rn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.ld=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n;return s.__generator(this,(function(r){switch(r.label){case 0:return this.Nl.xf()||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.kf.ro()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.Yl.get(e)||[]).push(t),this.Yl.set(e,n),[2])}}))}))},t.prototype.fd=function(t){(this.Yl.get(t)||[]).forEach((function(t){t.resolve()})),this.Yl.delete(t)},t.prototype.dd=function(t){this.Yl.forEach((function(e){e.forEach((function(e){e.reject(new f(d.CANCELLED,t))}))})),this.Yl.clear()},t.prototype.ud=function(t,e){var n=this.Hl[this.currentUser.i()];n||(n=new x(Re)),n=n.ut(t,e),this.Hl[this.currentUser.i()]=n},t.prototype.ad=function(t,e){var n=this.Hl[this.currentUser.i()];if(n){var r=n.get(t);r&&(Oe(t===n.ot(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.Hl[this.currentUser.i()]=n}},t.prototype.rd=function(t,e){var n=this;void 0===e&&(e=null),this.Ml.gh(t),Oe(this.Gl.has(t)&&0!==this.Gl.get(t).length,"There are no queries mapped to target id "+t);for(var r=0,i=this.Gl.get(t);r<i.length;r++){var s=i[r];this.Ql.delete(s),e&&this.Bl.vd(s,e)}if(this.Gl.delete(t),this.isPrimary){var o=this.Jl.as(t);this.Jl.hs(t),o.forEach((function(t){n.Jl.fs(t)||n.wd(t)}))}},t.prototype.wd=function(t){var e=this.zl.get(t);null!==e&&(this.Nl.nl(e),this.zl=this.zl.remove(t),this.Kl.delete(e),this.hd())},t.prototype.ed=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Mr?(this.Jl.es(i.key,t),this.md(i)):i instanceof Lr?(xe("SyncEngine","Document no longer in limbo: "+i.key),this.Jl.us(i.key,t),this.Jl.fs(i.key)||this.wd(i.key)):Ne("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.md=function(t){var e=t.key;this.zl.get(e)||(xe("SyncEngine","New document in limbo: "+e),this.Wl.push(e),this.hd())},t.prototype.hd=function(){for(;this.Wl.length>0&&this.zl.size<this.ql;){var t=this.Wl.shift(),e=this.Xl.next();this.Kl.set(e,new jr(t)),this.zl=this.zl.ut(t,e),this.Nl.listen(new zt(Nt.Cn(t.path).qn(),e,2,Be.Nr))}},t.prototype.pd=function(){return this.zl},t.prototype.bd=function(){return this.Wl},t.prototype.sd=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return s.__generator(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.Ql.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Tl(t);return e.ic?o.kf.Co(a.query,!1).then((function(t){return a.view.Tl(t.documents,e)})):e})).then((function(t){var i=e&&e.wi.get(a.targetId),s=a.view.Is(t,!0===o.isPrimary,i);if(o.ed(a.targetId,s.Al),s.snapshot){o.isPrimary&&o.Ml.Ih(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=qe.Ar(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.Bl.Ra(n),[4,this.kf.bo(r)];case 2:return s.sent(),[2]}}))}))},t.prototype.Zl=function(t){Oe(null!==this.Bl,"Trying to call "+t+" before calling subscribe().")},t.prototype.ml=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n;return s.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.dd("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.kf.Ms(t)]):[3,3];case 1:return n=r.sent(),this.Ml.Ms(t,n.Gs,n.Ws),[4,this.sd(n.Qs)];case 2:r.sent(),r.label=3;case 3:return[4,this.Nl.ml()];case 4:return r.sent(),[2]}}))}))},t.prototype.pl=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a=this;return s.__generator(this,(function(s){switch(s.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Nl.pl(!0)]);case 1:return s.sent(),i=this.Ml.fh(),[4,this.gd(i.K())];case 2:for(e=s.sent(),n=0,r=e;n<r.length;n++)this.Nl.listen(r[n]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,i=[],o=Promise.resolve(),this.Gl.forEach((function(t,e){a.Ml.yh(e)?i.push(e):o=o.then((function(){return a.rd(e),a.kf.Ao(e,!0)})),a.Nl.nl(e)})),[4,o]);case 4:return s.sent(),[4,this.gd(i)];case 5:return s.sent(),this.yd(),[4,this.Nl.pl(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))},t.prototype.yd=function(){var t=this;this.Kl.forEach((function(e,n){t.Nl.nl(n)})),this.Jl.cs(),this.Kl=new Map,this.zl=new x(I.F)},t.prototype.gd=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a,u,l,c,h,d,f,p;return s.__generator(this,(function(s){switch(s.label){case 0:e=[],n=[],r=0,i=t,s.label=1;case 1:return r<i.length?(a=void 0,(u=this.Gl.get(o=i[r]))&&0!==u.length?[4,this.kf.Ao(o,!0)]:[3,8]):[3,14];case 2:return s.sent(),[4,this.kf.Eo(u[0].qn())];case 3:a=s.sent(),l=0,c=u,s.label=4;case 4:return l<c.length?(Oe(!!(d=this.Ql.get(h=c[l])),"No query view found for "+h),[4,this.nd(d)]):[3,7];case 5:(f=s.sent()).snapshot&&n.push(f.snapshot),s.label=6;case 6:return l++,[3,4];case 7:return[3,12];case 8:return Oe(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.kf.xo(o)];case 9:return Oe(!!(p=s.sent()),"Target for id "+o+" not found"),[4,this.kf.Eo(p)];case 10:return a=s.sent(),[4,this.td(this._d(p),o,!1)];case 11:s.sent(),s.label=12;case 12:e.push(a),s.label=13;case 13:return r++,[3,1];case 14:return this.Bl.Ra(n),[2,e]}}))}))},t.prototype._d=function(t){return new Nt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},t.prototype.Oo=function(){return this.kf.Oo()},t.prototype.Oh=function(t,e,n){return s.__awaiter(this,void 0,void 0,(function(){var r,i;return s.__generator(this,(function(s){switch(s.label){case 0:if(this.isPrimary)return xe("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.Gl.has(t))return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.kf.Lo()];case 2:return r=s.sent(),i=ae.gi(t,"current"===e),[4,this.sd(r,i)];case 3:return s.sent(),[3,7];case 4:return[4,this.kf.Ao(t,!0)];case 5:return s.sent(),this.rd(t,n),[3,7];case 6:Ne("Unexpected target state: "+e),s.label=7;case 7:return[2]}}))}))},t.prototype.Fh=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,u,l,c,h,d=this;return s.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(Oe(!this.Gl.has(h=r[n]),"Trying to add an already active target"),[4,this.kf.xo(h)]):[3,6];case 2:return Oe(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.kf.Eo(i)];case 3:return o=f.sent(),[4,this.td(this._d(i),o.targetId,!1)];case 4:f.sent(),this.Nl.listen(o),f.label=5;case 5:return n++,[3,1];case 6:a=function(t){return s.__generator(this,(function(e){switch(e.label){case 0:return u.Gl.has(t)?[4,u.kf.Ao(t,!1).then((function(){d.Nl.nl(t),d.rd(t)})).catch(rn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},u=this,l=0,c=e,f.label=7;case 7:return l<c.length?[5,a(h=c[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.kf.jo(!0),this.Nl.enableNetwork()},t.prototype.disableNetwork=function(){return this.kf.jo(!1),this.Nl.disableNetwork()},t.prototype.he=function(t){var e=this.Kl.get(t);if(e&&e.Ll)return ee().add(e.key);var n=ee(),r=this.Gl.get(t);if(!r)return n;for(var i=0,s=r;i<s.length;i++){var o=s[i],a=this.Ql.get(o);Oe(!!a,"No query view found for "+o),n=n.Ft(a.view.Il)}return n},t}(),Br=function(){this.Id=null,this.targetId=0,this.listeners=[]},zr=function(){function t(t){this.Jo=t,this.Td=new je((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.Ed=new Set,this.Jo.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.Td.get(e);return r||(n=!0,r=new Br,this.Td.set(e,r)),r.listeners.push(t),Oe(!t.Cl(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.Id&&t.Dd(r.Id)&&this.Rd(),n?this.Jo.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.nl=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return s.__generator(this,(function(s){return n=!1,(r=this.Td.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.Td.delete(e),[2,this.Jo.nl(e)]):[2]}))}))},t.prototype.Ra=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],s=this.Td.get(i.query);if(s){for(var o=0,a=s.listeners;o<a.length;o++)a[o].Dd(i)&&(e=!0);s.Id=i}}e&&this.Rd()},t.prototype.vd=function(t,e){var n=this.Td.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.Td.delete(t)},t.prototype.od=function(t){this.onlineState=t;var e=!1;this.Td.forEach((function(n,r){for(var i=0,s=r.listeners;i<s.length;i++)s[i].Cl(t)&&(e=!0)})),e&&this.Rd()},t.prototype.Sd=function(t){this.Ed.add(t),t.next()},t.prototype.Ad=function(t){this.Ed.delete(t)},t.prototype.Rd=function(){this.Ed.forEach((function(t){t.next()}))},t}(),Gr=function(){function t(t,e,n){this.query=t,this.Cd=e,this.Pd=!1,this.Vd=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Dd=function(t){if(Oe(t.docChanges.length>0||t.li,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new oe(t.query,t.docs,t.ai,e,t.fi,t.fromCache,t.li,!0)}var s=!1;return this.Pd?this.kd(t)&&(this.Cd.next(t),s=!0):this.Nd(t,this.onlineState)&&(this.Od(t),s=!0),this.Vd=t,s},t.prototype.onError=function(t){this.Cd.error(t)},t.prototype.Cl=function(t){this.onlineState=t;var e=!1;return this.Vd&&!this.Pd&&this.Nd(this.Vd,t)&&(this.Od(this.Vd),e=!0),e},t.prototype.Nd=function(t,e){return Oe(!this.Pd,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.Fd&&"Offline"!==e?(Oe(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.M()||"Offline"===e)},t.prototype.kd=function(t){return t.docChanges.length>0||!!(t.li||this.Vd&&this.Vd.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Od=function(t){Oe(!this.Pd,"Trying to raise initial events for second time"),t=oe.vi(t.query,t.docs,t.fi,t.fromCache),this.Pd=!0,this.Cd.next(t)},t}(),$r=function(){function t(t,e,n,r){this.platform=t,this.Ud=e,this.credentials=n,this.Or=r,this.clientId=De.pr()}return t.prototype.start=function(t,e){var n=this;this.jd();var r=new ze,i=new ze,s=!1;return this.credentials.v((function(o){s?n.Or.Qr((function(){return n.ml(o)})):(s=!0,n.xd(t,e,o,i).then((function(){return n.Ld(o)})).then(r.resolve,r.reject))})),this.Or.Qr((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.jd(),this.Or.enqueue((function(){return t.Jo.enableNetwork()}))},t.prototype.xd=function(t,e,n,r){return s.__awaiter(this,void 0,void 0,(function(){var i;return s.__generator(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t.initialize(this.Or,this.Ud,this.platform,this.clientId,n,e)];case 1:return s.sent(),this.persistence=t.Jc(),this.Md=t.Kc(),this.Ml=t.Hc(),r.resolve(),[3,3];case 2:if(i=s.sent(),r.reject(i),!this.qd(i))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),[2,this.xd(new Rn,{zc:!1},n,r)];case 3:return[2]}}))}))},t.prototype.qd=function(t){return"FirebaseError"===t.name?t.code===d.FAILED_PRECONDITION||t.code===d.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.jd=function(){if(this.Or.Yr)throw new f(d.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ld=function(t){var e=this;return xe("FirestoreClient","Initializing. user=",t.uid),this.platform.Bd(this.Ud).then((function(n){return s.__awaiter(e,void 0,void 0,(function(){var e,r,i,o,a,u=this;return s.__generator(this,(function(l){switch(l.label){case 0:return e=new vn,this.kf=new nn(this.persistence,e,t),[4,this.kf.start()];case 1:return l.sent(),r=this.platform.Qd(),i=this.platform.Gd(this.Ud.ae),o=new Fn(this.Or,n,this.credentials,i),a=function(t){return u.Jo.Cl(t,1)},this.Nl=new Pr(this.kf,o,this.Or,(function(t){return u.Jo.Cl(t,0)}),r),this.Jo=new qr(this.kf,this.Nl,this.Ml,t,100),this.Ml.Ho=a,this.Nl.Jo=this.Jo,this.Ml.Jo=this.Jo,this.Wd=new zr(this.Jo),[4,this.Ml.start()];case 2:return l.sent(),[4,this.Nl.start()];case 3:return l.sent(),[4,this.persistence.jc((function(t){return s.__awaiter(u,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return[4,this.Jo.pl(t)];case 1:return e.sent(),t&&!this.Md.qu?this.Md.start(this.kf):t||this.Md.stop(),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.xc((function(){return s.__awaiter(u,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},t.prototype.ml=function(t){return this.Or.ru(),xe("FirestoreClient","Credential Changed. Current user: "+t.uid),this.Jo.ml(t)},t.prototype.disableNetwork=function(){var t=this;return this.jd(),this.Or.enqueue((function(){return t.Jo.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Or.nu((function(){return s.__awaiter(t,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.Md.stop(),[4,this.Nl.shutdown()];case 1:return t.sent(),[4,this.Ml.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.m(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.jd();var e=new ze;return this.Or.Qr((function(){return t.Jo.ld(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.jd();var i=new Gr(t,e,n);return this.Or.Qr((function(){return r.Wd.listen(i)})),i},t.prototype.nl=function(t){var e=this;this.zd||this.Or.Qr((function(){return e.Wd.nl(t)}))},t.prototype.Kd=function(t){var e=this;return this.jd(),this.Or.enqueue((function(){return e.kf.Io(t)})).then((function(t){if(t instanceof It)return t;if(t instanceof xt)return null;throw new f(d.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.Jd=function(t){var e=this;return this.jd(),this.Or.enqueue((function(){return s.__awaiter(e,void 0,void 0,(function(){var e,n,r;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,this.kf.Co(t,!0)];case 1:return e=i.sent(),n=new Vr(t,e.ko),r=n.Tl(e.documents),[2,n.Is(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.jd();var n=new ze;return this.Or.Qr((function(){return e.Jo.write(t,n)})),n.promise},t.prototype.ae=function(){return this.Ud.ae},t.prototype.Sd=function(t){var e=this;this.jd(),this.Or.Qr((function(){return e.Wd.Sd(t),Promise.resolve()}))},t.prototype.Ad=function(t){this.zd||this.Wd.Ad(t)},Object.defineProperty(t.prototype,"zd",{get:function(){return this.Or.Yr},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.jd();var n=new ze;return this.Or.Qr((function(){return e.Jo.runTransaction(e.Or,t,n),Promise.resolve()})),n.promise},t}(),Hr=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Hd(this.observer.next,t)},t.prototype.error=function(t){this.Hd(this.observer.error,t)},t.prototype.Yd=function(){this.muted=!0},t.prototype.Hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Wr(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}var Qr=function(){function t(t,e,n,r){this.firestore=t,this.timestampsInSnapshots=e,this.Xd=n,this.converter=r}return t.prototype.$d=function(t){switch(z(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Y(t.integerValue||t.doubleValue);case 3:return this.Zd(t.timestampValue);case 4:return this.tv(t);case 5:return t.stringValue;case 6:return new ur(J(t.bytesValue));case 7:return this.nv(t.referenceValue);case 8:return new br(t.geoPointValue.latitude,t.geoPointValue.longitude);case 9:return this.iv(t.arrayValue);case 10:return this.ev(t.mapValue);default:throw Ne("Invalid value type: "+JSON.stringify(t))}},t.prototype.ev=function(t){var e=this,n={};return P(t.fields||{},(function(t,r){n[t]=e.$d(r)})),n},t.prototype.iv=function(t){var e=this;return(t.values||[]).map((function(t){return e.$d(t)}))},t.prototype.tv=function(t){switch(this.Xd){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return j(n)?t(n):n}(t);return null==e?null:this.$d(e);case"estimate":return this.Zd(q(t));default:return null}},t.prototype.Zd=function(t){var e=K(t),n=new _(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.nv=function(t){var e=C.H(t);Oe(Ee(e),"ReferenceValue is not valid "+t);var n=new Ve(e.get(1),e.get(3)),r=new I(e.j(5));return n.isEqual(this.firestore.rv)||Ae("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.rv.projectId+"/"+this.firestore.rv.database+") instead."),new ti(r,this.firestore,this.converter)},t}(),Kr=Ye.Nu,Yr=function(){function t(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new f(d.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Hn("settings","non-empty string","host",t.host),this.host=t.host,Wn("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(tr("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Wn("settings","object","credentials",t.credentials),this.credentials=t.credentials,Wn("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Ae("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Ae("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,Wn("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ye.Fu;else{if(t.cacheSizeBytes!==Kr&&t.cacheSizeBytes<Ye.Ou)throw new f(d.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ye.Ou);this.cacheSizeBytes=t.cacheSizeBytes}Wn("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Jr=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Rn),this.uv=null,this.sv=new $e,this.INTERNAL={delete:function(){return s.__awaiter(i,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.ov(),[4,this.hv.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.uv=o,this.rv=t.cv(o),this.av=o.name,this.fv=new g(n)}else{var a=e;if(!a.projectId)throw new f(d.INVALID_ARGUMENT,"Must provide projectId");this.rv=new Ve(a.projectId,a.database),this.av="[DEFAULT]",this.fv=new m}this.lv=r,this.dv=new Yr({}),this.vv=this.wv(this.rv)}return t.prototype.settings=function(t){if(jn("Firestore.settings",arguments,1),Gn("Firestore.settings","object",1,t),fi(t,"persistence"))throw new f(d.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Yr(t);if(this.hv&&!this.dv.isEqual(e))throw new f(d.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.dv=e,void 0!==e.credentials&&(this.fv=b(e.credentials))},t.prototype.enableNetwork=function(){return this.ov(),this.hv.enableNetwork()},t.prototype.disableNetwork=function(){return this.ov(),this.hv.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.hv)throw new f(d.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Ae("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n),this.mv(this.lv,{zc:!0,cacheSizeBytes:this.dv.cacheSizeBytes,synchronizeTabs:r})},t.prototype.clearPersistence=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e=this;return s.__generator(this,(function(n){if(void 0!==this.hv&&!this.hv.zd)throw new f(d.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new ze,this.sv.Xr((function(){return s.__awaiter(e,void 0,void 0,(function(){var e,n;return s.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.pv(),[4,this.lv.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),[2,t.promise]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"bv",{get:function(){return this.ov(),this.hv.zd},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ov(),this.hv.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.ov(),Wr(t)?this.gv(t):(Gn("Firestore.onSnapshotsInSync","function",1,t),this.gv({next:t}))},t.prototype.gv=function(t){var e=this,n=new Hr({next:function(){t.next&&t.next()},error:function(t){throw Ne("Uncaught Error in onSnapshotsInSync")}});return this.hv.Sd(n),function(){n.Yd(),e.hv.Ad(n)}},t.prototype.ov=function(){return this.hv||this.mv(new Rn,{zc:!1}),this.hv},t.prototype.pv=function(){return new Le(this.rv,this.av,this.dv.host,this.dv.ssl,this.dv.forceLongPolling)},t.prototype.mv=function(t,e){Oe(!!this.dv.host,"FirestoreSettings.host is not set"),Oe(!this.hv,"configureClient() called multiple times");var n=this.pv();return this.hv=new $r(Ce.xt(),n,this.fv,this.sv),this.hv.start(t,e)},t.prototype.wv=function(t){var e=new we(t,{de:Ce.xt().de});return new Ir(e,(function(e){if(e instanceof ti){var n=t,r=e.firestore.rv;if(!r.isEqual(n))throw new f(d.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Tr(t,e.yv)}return e}))},t.cv=function(t){if(!fi(t.options,"projectId"))throw new f(d.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new f(d.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ve(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.uv)throw new f(d.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.uv},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return jn("Firestore.collection",arguments,1),Gn("Firestore.collection","non-empty string",1,t),this.ov(),new oi(C.H(t),this)},t.prototype.doc=function(t){return jn("Firestore.doc",arguments,1),Gn("Firestore.doc","non-empty string",1,t),this.ov(),ti._v(C.H(t),this)},t.prototype.collectionGroup=function(t){if(jn("Firestore.collectionGroup",arguments,1),Gn("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new f(d.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ov(),new ii(new Nt(C.Y,t),this)},t.prototype.runTransaction=function(t){var e=this;return jn("Firestore.runTransaction",arguments,1),Gn("Firestore.runTransaction","function",1,t),this.ov().transaction((function(n){return t(new Zr(e,n))}))},t.prototype.batch=function(){return this.ov(),new Xr(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(Te()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(jn("Firestore.setLogLevel",arguments,1),Gn("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Ie(o.LogLevel.DEBUG);break;case"error":Ie(o.LogLevel.ERROR);break;case"silent":Ie(o.LogLevel.SILENT);break;default:throw new f(d.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.Iv=function(){return this.dv.timestampsInSnapshots},t}(),Zr=function(){function t(t,e){this.Tv=t,this.Ev=e}return t.prototype.get=function(t){var e=this;jn("Transaction.get",arguments,1);var n=ci("Transaction.get",t,this.Tv);return this.Ev.lookup([n.yv]).then((function(t){if(!t||1!==t.length)return Ne("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof xt)return new ni(e.Tv,n.yv,null,!1,!1,n.Dv);if(r instanceof It)return new ni(e.Tv,n.yv,r,!1,!1,n.Dv);throw Ne("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){Bn("Transaction.set",arguments,2,3);var r=ci("Transaction.set",t,this.Tv);n=ai("Transaction.set",n);var i=di(r.Dv,e,"Transaction.set"),s=i[0],o=i[1],a=n.merge||n.mergeFields?this.Tv.vv.uf(o,s,n.mergeFields):this.Tv.vv.ef(o,s);return this.Ev.set(r.yv,a),this},t.prototype.update=function(t,e,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return"string"==typeof e||e instanceof cr?(qn("Transaction.update",arguments,3),r=ci("Transaction.update",t,this.Tv),i=this.Tv.vv.af("Transaction.update",e,n,s)):(jn("Transaction.update",arguments,2),r=ci("Transaction.update",t,this.Tv),i=this.Tv.vv.sf("Transaction.update",e)),this.Ev.update(r.yv,i),this},t.prototype.delete=function(t){jn("Transaction.delete",arguments,1);var e=ci("Transaction.delete",t,this.Tv);return this.Ev.delete(e.yv),this},t}(),Xr=function(){function t(t){this.Tv=t,this.Rv=[],this.Sv=!1}return t.prototype.set=function(t,e,n){Bn("WriteBatch.set",arguments,2,3),this.Av();var r=ci("WriteBatch.set",t,this.Tv);n=ai("WriteBatch.set",n);var i=di(r.Dv,e,"WriteBatch.set"),s=i[0],o=i[1],a=n.merge||n.mergeFields?this.Tv.vv.uf(o,s,n.mergeFields):this.Tv.vv.ef(o,s);return this.Rv=this.Rv.concat(a.Ka(r.yv,gt.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return this.Av(),"string"==typeof e||e instanceof cr?(qn("WriteBatch.update",arguments,3),r=ci("WriteBatch.update",t,this.Tv),i=this.Tv.vv.af("WriteBatch.update",e,n,s)):(jn("WriteBatch.update",arguments,2),r=ci("WriteBatch.update",t,this.Tv),i=this.Tv.vv.sf("WriteBatch.update",e)),this.Rv=this.Rv.concat(i.Ka(r.yv,gt.exists(!0))),this},t.prototype.delete=function(t){jn("WriteBatch.delete",arguments,1),this.Av();var e=ci("WriteBatch.delete",t,this.Tv);return this.Rv=this.Rv.concat(new wt(e.yv,gt.NONE)),this},t.prototype.commit=function(){return this.Av(),this.Sv=!0,this.Rv.length>0?this.Tv.ov().write(this.Rv):Promise.resolve()},t.prototype.Av=function(){if(this.Sv)throw new f(d.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),ti=function(){function t(t,e,n){this.yv=t,this.firestore=e,this.Dv=n,this.hv=this.firestore.ov()}return t._v=function(e,n,r){if(e.length%2!=0)throw new f(d.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.J()+" has "+e.length);return new t(new I(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.yv.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new oi(this.yv.path.L(),this.firestore,this.Dv)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.yv.path.J()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(jn("DocumentReference.collection",arguments,1),Gn("DocumentReference.collection","non-empty string",1,t),!t)throw new f(d.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=C.H(t);return new oi(this.yv.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw er("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.yv.isEqual(e.yv)&&this.Dv===e.Dv},t.prototype.set=function(t,e){Bn("DocumentReference.set",arguments,1,2),e=ai("DocumentReference.set",e);var n=di(this.Dv,t,"DocumentReference.set"),r=n[0],i=n[1],s=e.merge||e.mergeFields?this.firestore.vv.uf(i,r,e.mergeFields):this.firestore.vv.ef(i,r);return this.hv.write(s.Ka(this.yv,gt.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof cr?(qn("DocumentReference.update",arguments,2),n=this.firestore.vv.af("DocumentReference.update",t,e,r)):(jn("DocumentReference.update",arguments,1),n=this.firestore.vv.sf("DocumentReference.update",t)),this.hv.write(n.Ka(this.yv,gt.exists(!0)))},t.prototype.delete=function(){return jn("DocumentReference.delete",arguments,0),this.hv.write([new wt(this.yv,gt.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Bn("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Wr(t[i])||(tr("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Wn("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var s={includeMetadataChanges:r.includeMetadataChanges};return Wr(t[i])?n=t[i]:(Gn("DocumentReference.onSnapshot","function",i,t[i]),$n("DocumentReference.onSnapshot","function",i+1,t[i+1]),$n("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Cv(s,n)},t.prototype.Cv=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Hr({next:function(t){if(e.next){Oe(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n.yv);e.next(new ni(n.firestore,n.yv,r,t.fromCache,t.hasPendingWrites,n.Dv))}},error:r}),s=this.hv.listen(Nt.Cn(this.yv.path),i,t);return function(){i.Yd(),n.hv.nl(s)}},t.prototype.get=function(t){var e=this;return Bn("DocumentReference.get",arguments,0,1),li("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ov().Kd(e.yv).then((function(t){n(new ni(e.firestore,e.yv,t,!0,t instanceof It&&t.nn,e.Dv))}),r):e.Pv(n,r,t)}))},t.prototype.Pv=function(t,e,n){var r=this.Cv({includeMetadataChanges:!0,Fd:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new f(d.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new f(d.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this.yv,this.firestore,e)},t}(),ei=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ni=function(){function t(t,e,n,r,i,s){this.Tv=t,this.yv=e,this.Vv=n,this.kv=r,this.Nv=i,this.Dv=s}return t.prototype.data=function(t){if(Bn("DocumentSnapshot.data",arguments,0,1),t=ui("DocumentSnapshot.data",t),this.Vv){if(this.Dv){var e=new ri(this.Tv,this.yv,this.Vv,this.kv,this.Nv);return this.Dv.fromFirestore(e,t)}var n=new Qr(this.Tv,this.Tv.Iv(),t.serverTimestamps,void 0);return n.$d(this.Vv.yn())}},t.prototype.get=function(t,e){if(Bn("DocumentSnapshot.get",arguments,1,2),e=ui("DocumentSnapshot.get",e),this.Vv){var n=this.Vv.data().field(kr("DocumentSnapshot.get",t));if(null!==n){var r=new Qr(this.Tv,this.Tv.Iv(),e.serverTimestamps,this.Dv);return r.$d(n)}}},Object.defineProperty(t.prototype,"id",{get:function(){return this.yv.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ti(this.yv,this.Tv,this.Dv)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Vv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ei(this.Nv,this.kv)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw er("isEqual","DocumentSnapshot",1,e);return this.Tv===e.Tv&&this.kv===e.kv&&this.yv.isEqual(e.yv)&&(null===this.Vv?null===e.Vv:this.Vv.isEqual(e.Vv))&&this.Dv===e.Dv},t}(),ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return Oe(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},e}(ni),ii=function(){function t(t,e,n){this.Ov=t,this.firestore=e,this.Dv=n}return t.prototype.where=function(e,n,r){jn("Query.where",arguments,3),Xn("Query.where",3,r);var i,s=["<","<=","==",">=",">","array-contains","in","array-contains-any"];Kn("Query.where",s,2,n);var o=kr("Query.where",e),a=Ot.H(n);if(o.$()){if(a===Ot.ARRAY_CONTAINS||a===Ot.ARRAY_CONTAINS_ANY)throw new f(d.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Ot.IN){this.Fv(r,a);for(var u=[],l=0,c=r;l<c.length;l++){var h=c[l];u.push(this.Uv(h))}i={arrayValue:{values:u}}}else i=this.Uv(r)}else a!==Ot.IN&&a!==Ot.ARRAY_CONTAINS_ANY||this.Fv(r,a),i=this.firestore.vv.ff("Query.where",r,a===Ot.IN);var p=Dt.create(o,a,i);return this.jv(p),new t(this.Ov.kn(p),this.firestore,this.Dv)},t.prototype.orderBy=function(e,n){var r;if(Bn("Query.orderBy",arguments,1,2),$n("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Ft.ASCENDING;else{if("desc"!==n)throw new f(d.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Ft.DESCENDING}if(null!==this.Ov.startAt)throw new f(d.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.Ov.endAt)throw new f(d.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=kr("Query.orderBy",e),s=new jt(i,r);return this.xv(s),new t(this.Ov.On(s),this.firestore,this.Dv)},t.prototype.limit=function(e){return jn("Query.limit",arguments,1),Gn("Query.limit","number",1,e),nr("Query.limit",1,e),new t(this.Ov.Fn(e),this.firestore,this.Dv)},t.prototype.limitToLast=function(e){return jn("Query.limitToLast",arguments,1),Gn("Query.limitToLast","number",1,e),nr("Query.limitToLast",1,e),new t(this.Ov.Un(e),this.firestore,this.Dv)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qn("Query.startAt",arguments,1);var i=this.Lv("Query.startAt",e,n,!0);return new t(this.Ov.jn(i),this.firestore,this.Dv)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qn("Query.startAfter",arguments,1);var i=this.Lv("Query.startAfter",e,n,!1);return new t(this.Ov.jn(i),this.firestore,this.Dv)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qn("Query.endBefore",arguments,1);var i=this.Lv("Query.endBefore",e,n,!0);return new t(this.Ov.xn(i),this.firestore,this.Dv)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qn("Query.endAt",arguments,1);var i=this.Lv("Query.endAt",e,n,!1);return new t(this.Ov.xn(i),this.firestore,this.Dv)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw er("isEqual","Query",1,e);return this.firestore===e.firestore&&this.Ov.isEqual(e.Ov)},t.prototype.withConverter=function(e){return new t(this.Ov,this.firestore,e)},t.prototype.Lv=function(t,e,n,r){if(Xn(t,1,e),e instanceof ni){if(n.length>0)throw new f(d.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new f(d.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Mv(i.Vv,r)}var s=[e].concat(n);return this.qv(t,s,r)},t.prototype.Mv=function(t,e){for(var n=[],r=0,i=this.Ov.orderBy;r<i.length;r++){var s=i[r];if(s.field.$())n.push(Z(this.firestore.rv,t.key));else{var o=t.field(s.field);if(j(o))throw new f(d.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===o){var a=s.field.J();throw new f(d.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}n.push(o)}}return new Ut(n,e)},t.prototype.qv=function(t,e,n){var r=this.Ov.En;if(e.length>r.length)throw new f(d.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],s=0;s<e.length;s++){var o=e[s];if(r[s].field.$()){if("string"!=typeof o)throw new f(d.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof o);if(!this.Ov.Yn()&&-1!==o.indexOf("/"))throw new f(d.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+o+"' contains a slash.");var a=this.Ov.path.child(C.H(o));if(!I.nt(a))throw new f(d.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new I(a);i.push(Z(this.firestore.rv,u))}else{var l=this.firestore.vv.ff(t,o);i.push(l)}}return new Ut(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Bn("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Wr(t[i])||(tr("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Wn("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Wr(t[i])?n=t[i]:(Gn("Query.onSnapshot","function",i,t[i]),$n("Query.onSnapshot","function",i+1,t[i+1]),$n("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Bv(this.Ov),this.Cv(r,n)},t.prototype.Cv=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Hr({next:function(t){e.next&&e.next(new si(n.firestore,n.Ov,t,n.Dv))},error:r}),s=this.firestore.ov(),o=s.listen(this.Ov,i,t);return function(){i.Yd(),s.nl(o)}},t.prototype.Bv=function(t){if(t.Jn()&&0===t.En.length)throw new f(d.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return Bn("Query.get",arguments,0,1),li("Query.get",t),this.Bv(this.Ov),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ov().Jd(e.Ov).then((function(t){n(new si(e.firestore,e.Ov,t,e.Dv))}),r):e.Pv(n,r,t)}))},t.prototype.Pv=function(t,e,n){var r=this.Cv({includeMetadataChanges:!0,Fd:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new f(d.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.Uv=function(t){if("string"==typeof t){if(""===t)throw new f(d.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Ov.Yn()&&-1!==t.indexOf("/"))throw new f(d.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.Ov.path.child(C.H(t));if(!I.nt(e))throw new f(d.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Z(this.firestore.rv,new I(e))}if(t instanceof ti)return Z(this.firestore.rv,t.yv);throw new f(d.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Zn(t)+".")},t.prototype.Fv=function(t,e){if(!Array.isArray(t)||0===t.length)throw new f(d.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new f(d.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new f(d.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new f(d.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.jv=function(t){if(t instanceof Dt){var e=[Ot.ARRAY_CONTAINS,Ot.ARRAY_CONTAINS_ANY],n=[Ot.IN,Ot.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Nn()){var s=this.Ov.Pn();if(null!==s&&!s.isEqual(t.field))throw new f(d.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+s.toString()+"' and '"+t.field.toString()+"'");var o=this.Ov.Vn();null!==o&&this.Qv(t.field,o)}else if(i||r){var a=null;if(i&&(a=this.Ov.Hn(n)),null===a&&r&&(a=this.Ov.Hn(e)),null!=a)throw new f(d.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.xv=function(t){if(null===this.Ov.Vn()){var e=this.Ov.Pn();null!==e&&this.Qv(e,t.field)}},t.prototype.Qv=function(t,e){if(!e.isEqual(t))throw new f(d.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),si=function(){function t(t,e,n,r){this.Tv=t,this.Gv=e,this.Wv=n,this.Dv=r,this.zv=null,this.Kv=null,this.metadata=new ei(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Wv.docs.M()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Wv.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Bn("QuerySnapshot.forEach",arguments,1,2),Gn("QuerySnapshot.forEach","function",1,t),this.Wv.docs.forEach((function(r){t.call(e,n.Jv(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new ii(this.Gv,this.Tv,this.Dv)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(tr("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Wn("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Wv.di)throw new f(d.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.zv&&this.Kv===e||(this.zv=function(t,e,n,r){if(n.ai.M()){var i,s=0;return n.docChanges.map((function(e){var o=new ri(t,e.doc.key,e.doc,n.fromCache,n.fi.has(e.doc.key),r);return Oe(0===e.type,"Invalid event type for first snapshot"),Oe(!i||n.query.Bn(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:s++}}))}var o=n.ai;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new ri(t,e.doc.key,e.doc,n.fromCache,n.fi.has(e.doc.key),r),s=-1,a=-1;return 0!==e.type&&(Oe((s=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),1!==e.type&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:hi(e.type),doc:i,oldIndex:s,newIndex:a}}))}(this.Tv,e,this.Wv,this.Dv),this.Kv=e),this.zv},t.prototype.isEqual=function(e){if(!(e instanceof t))throw er("isEqual","QuerySnapshot",1,e);return this.Tv===e.Tv&&this.Gv.isEqual(e.Gv)&&this.Wv.isEqual(e.Wv)&&this.Dv===e.Dv},t.prototype.Jv=function(t){return new ri(this.Tv,t.key,t,this.metadata.fromCache,this.Wv.fi.has(t.key),this.Dv)},t}();s.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(si.prototype.docChanges,t,{get:function(){return function(){throw new f(d.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var oi=function(t){function e(e,n,r){var i=t.call(this,Nt.Cn(e),n,r)||this;if(i.Hv=e,e.length%2!=1)throw new f(d.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.J()+" has "+e.length);return i}return s.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Ov.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Ov.path.L();return t.M()?null:new ti(new I(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ov.path.J()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(Bn("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=De.pr()),Gn("CollectionReference.doc","non-empty string",1,t),""===t)throw new f(d.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=C.H(t);return ti._v(this.Ov.path.child(e),this.firestore,this.Dv)},e.prototype.add=function(t){jn("CollectionReference.add",arguments,1);var e=this.Dv?this.Dv.toFirestore(t):t;Gn("CollectionReference.add","object",1,e);var n=this.doc();return n.set(t).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Hv,this.firestore,t)},e}(ii);function ai(t,e){if(void 0===e)return{merge:!1};if(tr(t,e,["merge","mergeFields"]),Wn(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Zn(r));for(var s=0;s<r.length;++s)if(!i(r[s]))throw new f(d.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+s+" was: "+Zn(r[s]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof cr}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new f(d.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ui(t,e){return void 0===e?{}:(tr(t,e,["serverTimestamps"]),Qn(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function li(t,e){$n(t,"object",1,e),e&&(tr(t,e,["source"]),Qn(t,0,"source",e.source,["default","server","cache"]))}function ci(t,e,n){if(e instanceof ti){if(e.firestore!==n)throw new f(d.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw er(t,"DocumentReference",1,e)}function hi(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne("Unknown change type: "+t)}}function di(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}function fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var pi=sr(Jr,"Use firebase.firestore() instead."),mi=sr(Zr,"Use firebase.firestore().runTransaction() instead."),gi=sr(Xr,"Use firebase.firestore().batch() instead."),yi=sr(ti,"Use firebase.firestore().doc() instead."),vi=sr(ni),bi=sr(ri),_i=sr(ii),wi=sr(si),Ei=sr(oi,"Use firebase.firestore().collection() instead."),Ci=function(){function t(e){this.db=e,12.2===t.Yv(a.getUA())&&Ae("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Xv=function(e,n,r){return Oe(t.th(),"IndexedDB not supported in current environment."),xe("SimpleDb","Opening database:",e),new He((function(i,s){var o=window.indexedDB.open(e,n);o.onsuccess=function(e){i(new t(e.target.result))},o.onblocked=function(){s(new f(d.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(t){var e=t.target.error;s("VersionError"===e.name?new f(d.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},o.onupgradeneeded=function(t){xe("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,o.transaction,t.oldVersion,Hi).next((function(){xe("SimpleDb","Database upgrade to version "+Hi+" complete")}))}})).wu()},t.delete=function(t){return xe("SimpleDb","Removing database:",t),xi(window.indexedDB.deleteDatabase(t)).wu()},t.th=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.$v())return!0;if(void 0===window.navigator)return!1;var e=a.getUA(),n=t.Yv(e),r=0<n&&n<10,i=t.Zv(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.$v=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.tw)},t.nw=function(t,e){return t.store(e)},t.Yv=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Zv=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.iw=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return s.__awaiter(this,void 0,void 0,(function(){var r,i,o,a,u;return s.__generator(this,(function(l){switch(l.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,u,l;return s.__generator(this,(function(s){switch(s.label){case 0:++i,t=Ti.open(a.db,r?"readonly":"readwrite",e),s.label=1;case 1:return s.trys.push([1,3,,4]),(o=n(t).catch((function(e){return t.abort(e),He.reject(e)})).wu()).catch((function(){})),[4,t.ew];case 2:return s.sent(),[2,{value:o}];case 3:return xe("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(u=s.sent()).message,l="FirebaseError"!==u.name&&i<3),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},a=this,l.label=1;case 1:return[5,o()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Si=function(){function t(t){this.rw=t,this.uw=!1,this.sw=null}return Object.defineProperty(t.prototype,"fu",{get:function(){return this.uw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ow",{get:function(){return this.sw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.rw=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.uw=!0},t.prototype.hw=function(t){this.sw=t},t.prototype.delete=function(){return xi(this.rw.delete())},t}(),Ti=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.cw=new ze,this.transaction.oncomplete=function(){e.cw.resolve()},this.transaction.onabort=function(){t.error?e.cw.reject(t.error):e.cw.resolve()},this.transaction.onerror=function(t){var n=ki(t.target.error);e.cw.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"ew",{get:function(){return this.cw.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.cw.reject(t),this.aborted||(xe("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return Oe(!!e,"Object store not part of transaction: "+t),new Ii(e)},t}(),Ii=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(xe("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),xi(n)},t.prototype.add=function(t){return xe("SimpleDb","ADD",this.store.name,t,t),xi(this.store.add(t))},t.prototype.get=function(t){var e=this;return xi(this.store.get(t)).next((function(n){return void 0===n&&(n=null),xe("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return xe("SimpleDb","DELETE",this.store.name,t),xi(this.store.delete(t))},t.prototype.count=function(){return xe("SimpleDb","COUNT",this.store.name),xi(this.store.count())},t.prototype.aw=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.fw(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.lw=function(t,e){xe("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.dw=!1;var r=this.cursor(n);return this.fw(r,(function(t,e,n){return n.delete()}))},t.prototype.vw=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.fw(r,e)},t.prototype.ww=function(t){var e=this.cursor({});return new He((function(n,r){e.onerror=function(t){var e=ki(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.fw=function(t,e){var n=[];return new He((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Si(i),o=e(i.primaryKey,i.value,s);if(o instanceof He){var a=o.catch((function(t){return s.done(),He.reject(t)}));n.push(a)}s.fu?r():null===s.ow?i.continue():i.continue(s.ow)}else r()}})).next((function(){return He.pu(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(Oe(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.dw?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function xi(t){return new He((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ki(t.target.error);n(e)}}))}var Ai=!1;function ki(t){var e=Ci.Yv(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new f("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ai||(Ai=!0,setTimeout((function(){throw r}),0)),r}}return t}var Ni=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Bh=n,this.Cs=r,this.mw={}}return t.pw=function(e,n,r,i){return Oe(""!==e.uid,"UserID must not be an empty string."),new t(e.t()?e.uid:"",n,r,i)},t.prototype.oc=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ri(t).vw({index:Ji.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ys=function(t,e,n){return this.bw(t).next((function(e){return e.lastStreamToken=n.toBase64(),Mi(t).put(e)}))},t.prototype.uo=function(t){return this.bw(t).next((function(t){return L.fromBase64String(t.lastStreamToken)}))},t.prototype.so=function(t,e){return this.bw(t).next((function(n){return n.lastStreamToken=e.toBase64(),Mi(t).put(n)}))},t.prototype.Ks=function(t,e,n,r){var i=this,s=Pi(t),o=Ri(t);return o.add({}).next((function(a){Oe("number"==typeof a,"Auto-generated key is not a number");for(var u=new Fe(a,e,n,r),l=i.serializer.gw(i.userId,u),c=[],h=new O((function(t,e){return Re(t.J(),e.J())})),d=0,f=r;d<f.length;d++){var p=f[d],m=Zi.key(i.userId,p.key.path,a);h=h.add(p.key.path.L()),c.push(o.put(l)),c.push(s.put(m,Zi.PLACEHOLDER))}return h.forEach((function(e){c.push(i.Bh.rc(t,e))})),t.Lh((function(){i.mw[a]=u.keys()})),He.pu(c).next((function(){return u}))}))},t.prototype.io=function(t,e){var n=this;return Ri(t).get(e).next((function(t){return t?(Oe(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.yw(t)):null}))},t.prototype.Hs=function(t,e){var n=this;return this.mw[e]?He.resolve(this.mw[e]):this.io(t,e).next((function(t){if(t){var r=t.keys();return n.mw[e]=r,r}return null}))},t.prototype._o=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Ri(t).vw({index:Ji.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Oe(e.batchId>=r,"Should have found mutation after "+r),s=n.serializer.yw(e)),i.done()})).next((function(){return s}))},t.prototype.ro=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ri(t).vw({index:Ji.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.qs=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ri(t).aw(Ji.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.yw(t)}))}))},t.prototype.Qh=function(t,e){var n=this,r=Zi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Pi(t).vw({range:i},(function(r,i,o){var a=r[0],u=r[2],l=En(r[1]);if(a===n.userId&&e.path.isEqual(l))return Ri(t).get(u).next((function(t){if(!t)throw Ne("Dangling document-mutation reference found: "+r+" which points to "+u);Oe(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),s.push(n.serializer.yw(t))}));o.done()})).next((function(){return s}))},t.prototype.zh=function(t,e){var n=this,r=new O(Re),i=[];return e.forEach((function(e){var s=Zi.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Pi(t).vw({range:o},(function(t,i,s){var o=t[0],a=t[2],u=En(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()}));i.push(a)})),He.pu(i).next((function(){return n._w(t,r)}))},t.prototype.Xh=function(t,e){var n=this;Oe(!e.Tn(),"Document queries shouldn't go down this path"),Oe(!e.Yn(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,s=Zi.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new O(Re);return Pi(t).vw({range:o},(function(t,e,s){var o=t[0],u=t[2],l=En(t[1]);o===n.userId&&r.G(l)?l.length===i&&(a=a.add(u)):s.done()})).next((function(){return n._w(t,a)}))},t.prototype._w=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ri(t).get(e).next((function(t){if(null===t)throw Ne("Dangling document-mutation reference found, which points to "+e);Oe(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.yw(t))})))})),He.pu(i).next((function(){return r}))},t.prototype.eo=function(t,e){var n=this;return Di(t.Iw,this.userId,e).next((function(r){return t.Lh((function(){n.Uo(e.batchId)})),He.forEach(r,(function(e){return n.Cs.lc(t,e)}))}))},t.prototype.Uo=function(t){delete this.mw[t]},t.prototype.to=function(t){var e=this;return this.oc(t).next((function(n){if(!n)return He.resolve();var r=IDBKeyRange.lowerBound(Zi.prefixForUser(e.userId)),i=[];return Pi(t).vw({range:r},(function(t,n,r){if(t[0]===e.userId){var s=En(t[1]);i.push(s)}else r.done()})).next((function(){Oe(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.J()})))}))}))},t.prototype.fs=function(t,e){return Oi(t,this.userId,e)},t.prototype.bw=function(t){var e=this;return Mi(t).get(this.userId).next((function(t){return t||new Yi(e.userId,-1,"")}))},t}();function Oi(t,e,n){var r=Zi.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Pi(t).vw({range:s,dw:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()})).next((function(){return o}))}function Di(t,e,n){var r=t.store(Ji.store),i=t.store(Zi.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.vw({range:o},(function(t,e,n){return a++,n.delete()}));s.push(u.next((function(){Oe(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],f=Zi.key(e,d.key.path,n.batchId);s.push(i.delete(f)),l.push(d.key)}return He.pu(s).next((function(){return l}))}function Ri(t){return ys.nw(t,Ji.store)}function Pi(t){return ys.nw(t,Zi.store)}function Mi(t){return ys.nw(t,Yi.store)}var Li=function(){function t(t,e){this.Cs=t,this.serializer=e,this.Sc=xn.Ic()}return t.prototype.Ro=function(t){var e=this;return this.Tw(t).next((function(n){return n.highestTargetId=e.Sc.after(n.highestTargetId),e.Ew(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.oo=function(t){return this.Tw(t).next((function(t){return w.P(new _(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ac=function(t){return Ui(t.Iw)},t.prototype.wo=function(t,e,n){var r=this;return this.Tw(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.O()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ew(t,i)}))},t.prototype.So=function(t,e){var n=this;return this.Cc(t,e).next((function(){return n.Tw(t).next((function(r){return r.targetCount+=1,n.Dw(e,r),n.Ew(t,r)}))}))},t.prototype.do=function(t,e){return this.Cc(t,e)},t.prototype.Pc=function(t,e){var n=this;return this.Vc(t,e.targetId).next((function(){return Vi(t).delete(e.targetId)})).next((function(){return n.Tw(t)})).next((function(e){return Oe(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.Ew(t,e)}))},t.prototype.Ju=function(t,e,n){var r=this,i=0,s=[];return Vi(t).vw((function(o,a){var u=r.serializer.Rw(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.Pc(t,u)))})).next((function(){return He.pu(s)})).next((function(){return i}))},t.prototype.$i=function(t,e){var n=this;return Vi(t).vw((function(t,r){var i=n.serializer.Rw(r);e(i)}))},t.prototype.Tw=function(t){return Fi(t.Iw)},t.prototype.Ew=function(t,e){return(n=t,ys.nw(n,ss.store)).put(ss.key,e);var n},t.prototype.Cc=function(t,e){return Vi(t).put(this.serializer.Sw(e))},t.prototype.Dw=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.kc=function(t){return this.Tw(t).next((function(t){return t.targetCount}))},t.prototype.Do=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Vi(t).vw({range:i,index:rs.queryTargetsIndexName},(function(t,r,i){var o=n.serializer.Rw(r);e.isEqual(o.target)&&(s=o,i.done())})).next((function(){return s}))},t.prototype.ao=function(t,e,n){var r=this,i=[],s=ji(t);return e.forEach((function(e){var o=bn(e.path);i.push(s.put(new is(n,o))),i.push(r.Cs.es(t,e))})),He.pu(i)},t.prototype.co=function(t,e,n){var r=this,i=ji(t);return He.forEach(e,(function(e){var s=bn(e.path);return He.pu([i.delete([n,s]),r.Cs.us(t,e)])}))},t.prototype.Vc=function(t,e){var n=ji(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Po=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ji(t),i=ee();return r.vw({range:n,dw:!0},(function(t,e,n){var r=En(t[1]),s=new I(r);i=i.add(s)})).next((function(){return i}))},t.prototype.fs=function(t,e){var n=bn(e.path),r=IDBKeyRange.bound([n],[Me(n)],!1,!0),i=0;return ji(t).vw({index:is.documentTargetsIndex,dw:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.ce=function(t,e){var n=this;return Vi(t).get(e).next((function(t){return t?n.serializer.Rw(t):null}))},t}();function Vi(t){return ys.nw(t,rs.store)}function Fi(t){return Ci.nw(t,ss.store).get(ss.key).next((function(t){return Oe(null!==t,"Missing metadata row."),t}))}function Ui(t){return Fi(t).next((function(t){return t.highestListenSequenceNumber}))}function ji(t){return ys.nw(t,is.store)}var qi=function(){function t(t,e){this.serializer=t,this.Bh=e}return t.prototype.ms=function(t,e,n){return zi(t).put(Gi(e),n)},t.prototype.bs=function(t,e){var n=zi(t),r=Gi(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Aw(t,r)}))},t.prototype.gs=function(t,e){var n=this;return zi(t).get(Gi(e)).next((function(t){return n.Cw(t)}))},t.prototype.Pw=function(t,e){var n=this;return zi(t).get(Gi(e)).next((function(t){var e=n.Cw(t);return e?{vc:e,size:$i(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Kt();return this.Vw(t,e,(function(t,e){var i=n.Cw(e);r=r.ut(t,i)})).next((function(){return r}))},t.prototype.kw=function(t,e){var n=this,r=Kt(),i=new x(I.F);return this.Vw(t,e,(function(t,e){var s=n.Cw(e);s?(r=r.ut(t,s),i=i.ut(t,$i(e))):(r=r.ut(t,null),i=i.ut(t,0))})).next((function(){return{Nw:r,Ow:i}}))},t.prototype.Vw=function(t,e,n){if(e.M())return He.resolve();var r=IDBKeyRange.bound(e.first().path.K(),e.last().path.K()),i=e.ft(),s=i.bt();return zi(t).vw({range:r},(function(t,e,r){for(var o=I.rt(t);s&&I.F(s,o)<0;)n(s,null),s=i.bt();s&&s.isEqual(o)&&(n(s,e),s=i.gt()?i.bt():null),s?r.hw(s.path.K()):r.done()})).next((function(){for(;s;)n(s,null),s=i.gt()?i.bt():null}))},t.prototype.Vo=function(t,e,n){var r=this;Oe(!e.Yn(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Jt(),s=e.path.length+1,o={};if(n.isEqual(w.MIN)){var a=e.path.K();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.K(),l=this.serializer.Fw(n);o.range=IDBKeyRange.lowerBound([u,l],!0),o.index=es.collectionReadTimeIndex}return zi(t).vw(o,(function(t,n,o){if(t.length===s){var a=r.serializer.Uw(n);e.path.G(a.key.path)?a instanceof It&&e.matches(a)&&(i=i.ut(a.key,a)):o.done()}})).next((function(){return i}))},t.prototype.Lo=function(t,e){var n=this,r=Qt(),i=this.serializer.Fw(e),s=zi(t),o=IDBKeyRange.lowerBound(i,!0);return s.vw({index:es.readTimeIndex,range:o},(function(t,e){var s=n.serializer.Uw(e);r=r.ut(s.key,s),i=e.readTime})).next((function(){return{Mo:r,readTime:n.serializer.jw(i)}}))},t.prototype.qo=function(t){var e=this,n=zi(t),r=w.MIN;return n.vw({index:es.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.jw(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Xs=function(e){return new t.mc(this,!!e&&e.$s)},t.prototype.pc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Bi(t).get(ns.key).next((function(t){return Oe(!!t,"Missing document cache metadata"),t}))},t.prototype.Aw=function(t,e){return Bi(t).put(ns.key,e)},t.prototype.Cw=function(t){if(t){var e=this.serializer.Uw(t);return e instanceof xt&&e.version.isEqual(w.V())?null:e}return null},t.mc=function(t){function e(e,n){var r=t.call(this)||this;return r.bc=e,r.$s=n,r.xw=new je((function(t){return t.toString()})),r}return s.__extends(e,t),e.prototype.Is=function(t){var e=this,n=[],r=0,i=new O((function(t,e){return Re(t.J(),e.J())}));return this.ds.forEach((function(s,o){var a=e.xw.get(s);if(Oe(void 0!==a,"Cannot modify a document that wasn't read (for "+s+")"),o){Oe(!e.readTime.isEqual(w.MIN),"Cannot add a document with a read time of zero");var u=e.bc.serializer.Lw(o,e.readTime);i=i.add(s.path.L());var l=$i(u);r+=l-a,n.push(e.bc.ms(t,s,u))}else if(r-=a,e.$s){var c=e.bc.serializer.Lw(new xt(s,w.V()),e.readTime);n.push(e.bc.ms(t,s,c))}else n.push(e.bc.bs(t,s))})),i.forEach((function(r){n.push(e.bc.Bh.rc(t,r))})),n.push(this.bc.updateMetadata(t,r)),He.pu(n)},e.prototype.ys=function(t,e){var n=this;return this.bc.Pw(t,e).next((function(t){return null===t?(n.xw.set(e,0),null):(n.xw.set(e,t.size),t.vc)}))},e.prototype._s=function(t,e){var n=this;return this.bc.kw(t,e).next((function(t){var e=t.Nw;return t.Ow.forEach((function(t,e){n.xw.set(t,e)})),e}))},e}(en),t}();function Bi(t){return ys.nw(t,ns.store)}function zi(t){return ys.nw(t,es.store)}function Gi(t){return t.path.K()}function $i(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ne("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Hi=10,Wi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Oe(n<r&&n>=0&&r<=Hi,"Unexpected schema upgrade from v"+n+" to v"+r+".");var s=new Ti(e);n<1&&r>=1&&(function(t){t.createObjectStore(Ki.store)}(t),function(t){t.createObjectStore(Yi.store,{keyPath:Yi.keyPath}),t.createObjectStore(Ji.store,{keyPath:Ji.keyPath,autoIncrement:!0}).createIndex(Ji.userMutationsIndex,Ji.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Zi.store)}(t),as(t),function(t){t.createObjectStore(es.store)}(t));var o=He.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(is.store),t.deleteObjectStore(rs.store),t.deleteObjectStore(ss.store)}(t),as(t)),o=o.next((function(){return function(t){var e=t.store(ss.store),n=new ss(0,0,w.MIN.O(),0);return e.put(ss.key,n)}(s)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(t,e){return e.store(Ji.store).aw().next((function(n){t.deleteObjectStore(Ji.store),t.createObjectStore(Ji.store,{keyPath:Ji.keyPath,autoIncrement:!0}).createIndex(Ji.userMutationsIndex,Ji.userMutationsKeyPath,{unique:!0});var r=e.store(Ji.store),i=n.map((function(t){return r.put(t)}));return He.pu(i)}))}(t,s)}))),o=o.next((function(){!function(t){t.createObjectStore(us.store,{keyPath:us.keyPath})}(t)}))),n<5&&r>=5&&(o=o.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&r>=6&&(o=o.next((function(){return function(t){t.createObjectStore(ns.store)}(t),i.addDocumentGlobal(s)}))),n<7&&r>=7&&(o=o.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&r>=8&&(o=o.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&r>=9&&(o=o.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(es.store);e.createIndex(es.readTimeIndex,es.readTimeIndexPath,{unique:!1}),e.createIndex(es.collectionReadTimeIndex,es.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.rewriteCanonicalIds(s)}))),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(es.store).vw((function(t,n){e+=$i(n)})).next((function(){var n=new ns(e);return t.store(ns.store).put(ns.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Yi.store),r=t.store(Ji.store);return n.aw().next((function(n){return He.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.aw(Ji.userMutationsIndex,i).next((function(r){return He.forEach(r,(function(r){Oe(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.yw(r);return Di(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(is.store),n=t.store(es.store);return Ui(t).next((function(t){var r=[];return n.vw((function(n,i){var s=new C(n),o=function(t){return[0,bn(t)]}(s);r.push(e.get(o).next((function(n){return n?He.resolve():function(n){return e.put(new is(0,bn(n),t))}(s)})))})).next((function(){return He.pu(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(os.store,{keyPath:os.keyPath});var n=e.store(os.store),r=new Sn,i=function(t){if(r.add(t)){var e=t.B(),i=t.L();return n.put({collectionId:e,parent:bn(i)})}};return e.store(es.store).vw({dw:!0},(function(t,e){var n=new C(t);return i(n.L())})).next((function(){return e.store(Zi.store).vw({dw:!0},(function(t,e){var n=En(t[1]);return i(n.L())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(rs.store);return n.vw((function(t,r){var i=e.serializer.Rw(r),s=e.serializer.Sw(i);return n.put(s)}))},t}(),Qi=function(t,e){this.seconds=t,this.nanoseconds=e},Ki=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),Yi=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Ji=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Zi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,bn(e)]},t.key=function(t,e,n){return[t,bn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Xi=function(t,e){this.path=t,this.readTime=e},ts=function(t,e){this.path=t,this.version=e},es=function(){function t(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),ns=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),rs=function(){function t(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),is=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,Oe(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),ss=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),os=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function as(t){t.createObjectStore(is.store,{keyPath:is.keyPath}).createIndex(is.documentTargetsIndex,is.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(rs.store,{keyPath:rs.keyPath}).createIndex(rs.queryTargetsIndexName,rs.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ss.store)}var us=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}(),ls=s.__spreadArrays([Yi.store,Ji.store,Zi.store,es.store,rs.store,Ki.store,ss.store,is.store],[us.store]),cs=s.__spreadArrays(ls,[ns.store]),hs=s.__spreadArrays(cs,[os.store]),ds=function(){function t(){this.Mw=new Sn}return t.prototype.rc=function(t,e){var n=this;if(Oe(e.length%2==1,"Expected a collection path."),!this.Mw.has(e)){var r=e.B(),i=e.L();t.Lh((function(){n.Mw.add(e)}));var s={collectionId:r,parent:bn(i)};return fs(t).put(s)}return He.resolve()},t.prototype.Yh=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Me(e),""],!1,!0);return fs(t).aw(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(En(s.parent))}return n}))},t}();function fs(t){return ys.nw(t,os.store)}var ps=function(){function t(t){this.qw=t}return t.prototype.Uw=function(t){if(t.document)return this.qw.Ae(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=I.rt(t.noDocument.path),n=this.Bw(t.noDocument.readTime);return new xt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=I.rt(t.unknownDocument.path),n=this.Bw(t.unknownDocument.version),new At(e,n)):Ne("Unexpected DbRemoteDocument")},t.prototype.Lw=function(t,e){var n=this.Fw(e),r=t.key.path.L().K();if(t instanceof It){var i=this.qw.Se(t),s=t.hasCommittedMutations;return new es(null,null,i,s,n,r)}if(t instanceof xt){var o=t.key.path.K(),a=this.Qw(t.version);return s=t.hasCommittedMutations,new es(null,new Xi(o,a),null,s,n,r)}if(t instanceof At){o=t.key.path.K();var u=this.Qw(t.version);return new es(new ts(o,u),null,null,!0,n,r)}return Ne("Unexpected MaybeDocument")},t.prototype.Fw=function(t){var e=t.O();return[e.seconds,e.nanoseconds]},t.prototype.jw=function(t){var e=new _(t[0],t[1]);return w.P(e)},t.prototype.Qw=function(t){var e=t.O();return new Qi(e.seconds,e.nanoseconds)},t.prototype.Bw=function(t){var e=new _(t.seconds,t.nanoseconds);return w.P(e)},t.prototype.gw=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.qw.Fe(t)})),i=e.mutations.map((function(t){return n.qw.Fe(t)}));return new Ji(t,e.batchId,e.gr.toMillis(),r,i)},t.prototype.yw=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.qw.Le(t)})),r=t.mutations.map((function(t){return e.qw.Le(t)})),i=_.fromMillis(t.localWriteTimeMs);return new Fe(t.batchId,i,n,r)},t.prototype.Gw=function(t){var e=[];return t.forEach((function(t){e.push(bn(t.path))})),e},t.prototype.Ww=function(t){for(var e=ee(),n=0,r=t;n<r.length;n++)e=e.add(new I(En(r[n])));return e},t.prototype.Rw=function(t){var e,n=this.Bw(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Bw(t.lastLimboFreeSnapshotVersion):w.MIN;return e=void 0!==t.query.documents?this.qw.ze(t.query):this.qw.Xe(t.query),new zt(e,t.targetId,0,t.lastListenSequenceNumber,n,r,L.fromBase64String(t.resumeToken))},t.prototype.Sw=function(t){Oe(0===t.ti,"Only queries with purpose 0 may be stored, got "+t.ti);var e,n=this.Qw(t.ni),r=this.Qw(t.lastLimboFreeSnapshotVersion);e=t.target.Tn()?this.qw.We(t.target):this.qw.Ke(t.target);var i=t.resumeToken.toBase64();return new rs(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),ms="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",gs=function(t){function e(e,n){var r=t.call(this)||this;return r.Iw=e,r.fo=n,r}return s.__extends(e,t),e}(gn),ys=function(){function t(e,n,r,i,s,o,a,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.zo=o,this.zw=u,this.Fc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Kw=null,this.inForeground=!1,this.Jw=null,this.Hw=null,this.Yw=Number.NEGATIVE_INFINITY,this.Xw=function(t){return Promise.resolve()},this.Cs=new _s(this,s),this.$w=n+t.Zw,this.serializer=new ps(a),this.document=i.document,this.Os=new Li(this.Cs,this.serializer),this.Bh=new ds,this.qh=new qi(this.serializer,this.Bh),!i.window||!i.window.localStorage)throw new f(d.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.tm=this.window.localStorage}return t.nw=function(t,e){if(t instanceof gs)return Ci.nw(t.Iw,e);throw Ne("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.nm=function(e){return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:if(!t.th())throw new f(d.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.im,e.zo,e.serializer,e.zw)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return Oe(!this.qu,"IndexedDbPersistence double-started!"),Oe(null!==this.window,"Expected 'window' to be defined"),Ci.Xv(this.$w,Hi,new Wi(this.serializer)).then((function(e){return t.em=e,t.rm()})).then((function(){return t.um(),t.sm(),t.om(),t.em.runTransaction("readonly",[ss.store],(function(t){return Ui(t)}))})).then((function(e){t.Oc=new Be(e,t.zw)})).then((function(){t.Fc=!0})).catch((function(e){return t.em&&t.em.close(),Promise.reject(e)}))},t.prototype.jc=function(t){var e=this;return this.Xw=function(n){return s.__awaiter(e,void 0,void 0,(function(){return s.__generator(this,(function(e){return this.qu?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.xc=function(t){var e=this;this.em.iw((function(n){return s.__awaiter(e,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.jo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.zo.Qr((function(){return s.__awaiter(e,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return this.qu?[4,this.rm()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.rm=function(){var t=this;return this.em.runTransaction("readwrite",hs,(function(e){return bs(e).put(new us(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.hm(e).next((function(e){e||(t.isPrimary=!1,t.zo.Qr((function(){return t.Xw(!1)})))}))})).next((function(){return t.cm(e)})).next((function(n){return t.isPrimary&&!n?t.am(e).next((function(){return!1})):!!n&&t.fm(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.zo.Qr((function(){return t.Xw(e)})),t.isPrimary=e}))},t.prototype.hm=function(t){var e=this;return vs(t).get(Ki.key).next((function(t){return He.resolve(e.lm(t))}))},t.prototype.dm=function(t){return bs(t).delete(this.clientId)},t.prototype.vm=function(){return s.__awaiter(this,void 0,void 0,(function(){var e=this;return s.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.wm(this.Yw,18e5)?[3,2]:(this.Yw=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(n){var r=t.nw(n,us.store);return r.aw().next((function(t){var n=e.mm(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return He.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.pm(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.om=function(){var t=this;this.Hw=this.zo.iu("client_metadata_refresh",4e3,(function(){return t.rm().then((function(){return t.vm()})).then((function(){return t.om()}))}))},t.prototype.lm=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.cm=function(t){var e=this;return vs(t).get(Ki.key).next((function(n){if(null!==n&&e.wm(n.leaseTimestampMs,5e3)&&!e.bm(n.ownerId)){if(e.lm(n)&&e.networkEnabled)return!0;if(!e.lm(n)){if(!n.allowTabSynchronization)throw new f(d.FAILED_PRECONDITION,ms);return!1}}return!(!e.networkEnabled||!e.inForeground)||bs(t).aw().next((function(t){return void 0===e.mm(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&xe("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,(function(){var t=this;return s.__generator(this,(function(e){switch(e.label){case 0:return this.Fc=!1,this.gm(),this.Hw&&(this.Hw.cancel(),this.Hw=null),this.ym(),this._m(),[4,this.em.runTransaction("readwrite",[Ki.store,us.store],(function(e){return t.am(e).next((function(){return t.dm(e)}))}))];case 1:return e.sent(),this.em.close(),this.Im(),[2]}}))}))},t.prototype.mm=function(t,e){var n=this;return t.filter((function(t){return n.wm(t.updateTimeMs,e)&&!n.bm(t.clientId)}))},t.prototype.Oo=function(){var t=this;return this.em.runTransaction("readonly",[us.store],(function(e){return bs(e).aw().next((function(e){return t.mm(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){switch(n.label){case 0:return t.th()?[4,Ci.delete(e+t.Zw)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"qu",{get:function(){return this.Fc},enumerable:!0,configurable:!0}),t.prototype.Vs=function(t){return Oe(this.qu,"Cannot initialize MutationQueue before persistence is started."),Ni.pw(t,this.serializer,this.Bh,this.Cs)},t.prototype.Fs=function(){return Oe(this.qu,"Cannot initialize TargetCache before persistence is started."),this.Os},t.prototype.Ns=function(){return Oe(this.qu,"Cannot initialize RemoteDocumentCache before persistence is started."),this.qh},t.prototype.js=function(){return Oe(this.qu,"Cannot initialize IndexManager before persistence is started."),this.Bh},t.prototype.runTransaction=function(t,e,n){var r,i=this;return xe("IndexedDbPersistence","Starting transaction:",t),this.em.runTransaction("readonly"===e?"readonly":"readwrite",hs,(function(s){return r=new gs(s,i.Oc.next()),"readwrite-primary"===e?i.hm(s).next((function(t){return!!t||i.cm(s)})).next((function(e){if(!e)throw Ae("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.zo.Qr((function(){return i.Xw(!1)})),new f(d.FAILED_PRECONDITION,mn);return n(r)})).next((function(t){return i.fm(s).next((function(){return t}))})):i.Tm(s).next((function(){return n(r)}))})).then((function(t){return r.Mh(),t}))},t.prototype.Tm=function(t){var e=this;return vs(t).get(Ki.key).next((function(t){if(null!==t&&e.wm(t.leaseTimestampMs,5e3)&&!e.bm(t.ownerId)&&!e.lm(t)&&!t.allowTabSynchronization)throw new f(d.FAILED_PRECONDITION,ms)}))},t.prototype.fm=function(t){var e=new Ki(this.clientId,this.allowTabSynchronization,Date.now());return vs(t).put(Ki.key,e)},t.th=function(){return Ci.th()},t.Em=function(t){var e=t.ae.projectId;return t.ae.br||(e+="."+t.ae.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.am=function(t){var e=this,n=vs(t);return n.get(Ki.key).next((function(t){return e.lm(t)?(xe("IndexedDbPersistence","Releasing primary lease."),n.delete(Ki.key)):He.resolve()}))},t.prototype.wm=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ae("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.um=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Jw=function(){t.zo.Qr((function(){return t.inForeground="visible"===t.document.visibilityState,t.rm()}))},this.document.addEventListener("visibilitychange",this.Jw),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ym=function(){this.Jw&&(Oe(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Jw),this.Jw=null)},t.prototype.sm=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Kw=function(){t.gm(),t.zo.Qr((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Kw))},t.prototype._m=function(){this.Kw&&(Oe("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Kw),this.Kw=null)},t.prototype.bm=function(t){try{var e=null!==this.tm.getItem(this.pm(t));return xe("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Ae("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.gm=function(){try{this.tm.setItem(this.pm(this.clientId),String(Date.now()))}catch(t){Ae("Failed to set zombie client id.",t)}},t.prototype.Im=function(){try{this.tm.removeItem(this.pm(this.clientId))}catch(t){}},t.prototype.pm=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.Zw="main",t}();function vs(t){return t.store(Ki.store)}function bs(t){return t.store(us.store)}var _s=function(){function t(t,e){this.db=t,this.Bc=null,this.ju=new Ze(this,e)}return t.prototype.Wu=function(t){var e=this.Dm(t);return this.db.Fs().kc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dm=function(t){var e=0;return this.Ku(t,(function(t){e++})).next((function(){return e}))},t.prototype.$i=function(t,e){return this.db.Fs().$i(t,e)},t.prototype.Ku=function(t,e){return this.Rm(t,(function(t,n){return e(n)}))},t.prototype.As=function(t){this.Bc=t},t.prototype.es=function(t,e){return ws(t,e)},t.prototype.us=function(t,e){return ws(t,e)},t.prototype.Ju=function(t,e,n){return this.db.Fs().Ju(t,e,n)},t.prototype.lc=function(t,e){return ws(t,e)},t.prototype.Sm=function(t,e){return this.Bc.fs(e)?He.resolve(!0):function(t,e){var n=!1;return Mi(t).ww((function(r){return Oi(t,r,e).next((function(t){return t&&(n=!0),He.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Hu=function(t,e){var n=this,r=this.db.Ns().Xs(),i=[],s=0;return this.Rm(t,(function(o,a){if(a<=e){var u=n.Sm(t,o).next((function(e){if(!e)return s++,r.gs(t,o).next((function(){return r.bs(o),ji(t).delete([0,bn(o.path)])}))}));i.push(u)}})).next((function(){return He.pu(i)})).next((function(){return r.apply(t)})).next((function(){return s}))},t.prototype.removeTarget=function(t,e){var n=e.ii(t.fo);return this.db.Fs().do(t,n)},t.prototype.vo=function(t,e){return ws(t,e)},t.prototype.Rm=function(t,e){var n,r=ji(t),i=Be.Nr;return r.vw({index:is.documentTargetsIndex},(function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Be.Nr&&e(new I(En(n)),i),i=o,n=s):i=Be.Nr})).next((function(){i!==Be.Nr&&e(new I(En(n)),i)}))},t.prototype.Xu=function(t){return this.db.Ns().pc(t)},t}();function ws(t,e){return ji(t).put(function(t,e){return new is(0,bn(t.path),e)}(e,t.fo))}var Es=function(){function t(){}return t.prototype.initialize=function(t,e,n,r,i,o){return s.__awaiter(this,void 0,void 0,(function(){var a,u,l;return s.__generator(this,(function(s){switch(s.label){case 0:if(Oe(o.zc,"IndexedDbPersistenceProvider can only provide durable persistence"),Oe(!this.persistence,"configure() already called"),a=ys.Em(e),u=new we(e.ae,{de:Ce.xt().de}),!fn.th(n))throw new f(d.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return this.Ml=o.synchronizeTabs?new fn(t,n,a,r,i):new pn,l=this,[4,ys.nm({allowTabSynchronization:o.synchronizeTabs,persistenceKey:a,clientId:r,platform:n,zo:t,serializer:u,im:Ye.Pu(o.cacheSizeBytes),zw:this.Ml})];case 1:return l.persistence=s.sent(),this.Md=new Je(this.persistence.Cs.ju,t),[2]}}))}))},t.prototype.Jc=function(){return Oe(!!this.persistence,"initialize() not called"),this.persistence},t.prototype.Hc=function(){return Oe(!!this.Ml,"initialize() not called"),this.Ml},t.prototype.Kc=function(){return Oe(!!this.Md,"initialize() not called"),this.Md},t.prototype.clearPersistence=function(t){var e=ys.Em(t);return ys.clearPersistence(e)},t}(),Cs={Firestore:pi,GeoPoint:br,Timestamp:_,Blob:lr,Transaction:mi,WriteBatch:gi,DocumentReference:yi,DocumentSnapshot:vi,Query:_i,QueryDocumentSnapshot:bi,QuerySnapshot:wi,CollectionReference:Ei,FieldPath:cr,FieldValue:vr,setLogLevel:Jr.setLogLevel,CACHE_SIZE_UNLIMITED:Kr},Ss=function(){function t(){}return t.prototype.jf=function(t){},t.prototype.shutdown=function(){},t}(),Ts=function(){function t(){var t=this;this.Am=function(){return t.Cm()},this.Pm=function(){return t.Vm()},this.km=[],this.Nm()}return t.prototype.jf=function(t){this.km.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Am),window.removeEventListener("offline",this.Pm)},t.prototype.Nm=function(){window.addEventListener("online",this.Am),window.addEventListener("offline",this.Pm)},t.prototype.Cm=function(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.km;t<e.length;t++)(0,e[t])(0)},t.prototype.Vm=function(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.km;t<e.length;t++)(0,e[t])(1)},t.th=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Is=function(){function t(t){this.Om=t.Om,this.Fm=t.Fm}return t.prototype.Ea=function(t){Oe(!this.Um,"Called onOpen on stream twice!"),this.Um=t},t.prototype.ga=function(t){Oe(!this.jm,"Called onClose on stream twice!"),this.jm=t},t.prototype.onMessage=function(t){Oe(!this.xm,"Called onMessage on stream twice!"),this.xm=t},t.prototype.close=function(){this.Fm()},t.prototype.send=function(t){this.Om(t)},t.prototype.Lm=function(){Oe(void 0!==this.Um,"Cannot call onOpen because no callback was set"),this.Um()},t.prototype.Mm=function(t){Oe(void 0!==this.jm,"Cannot call onClose because no callback was set"),this.jm(t)},t.prototype.qm=function(t){Oe(void 0!==this.xm,"Cannot call onMessage because no callback was set"),this.xm(t)},t}(),xs={BatchGetDocuments:"batchGet",Commit:"commit"},As="gl-js/ fire/"+c,ks=function(){function t(t){this.ae=t.ae,this.Bm=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Qm=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=As},t.prototype.Ua=function(t,e,n){var r=this,i=this.Gm(t);return new Promise((function(o,a){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var e=u.getResponseJson();xe("Connection","XHR received:",JSON.stringify(e)),o(e);break;case l.ErrorCode.TIMEOUT:xe("Connection",'RPC "'+t+'" timed out'),a(new f(d.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(xe("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(s=r.status.toLowerCase().replace("_","-"),Object.values(d).indexOf(s)>=0?s:d.UNKNOWN);a(new f(i,r.message))}else a(new f(d.UNKNOWN,"Server responded with status "+u.getStatus()))}else xe("Connection",'RPC "'+t+'" failed'),a(new f(d.UNAVAILABLE,"Connection failed."));break;default:Ne('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{xe("Connection",'RPC "'+t+'" completed.')}var s}));var c=s.__assign({},e);delete c.database;var h=JSON.stringify(c);xe("Connection","XHR sending: ",i+" "+h);var p={"Content-Type":"text/plain"};r.Qm(p,n),u.send(i,"POST",h,p,15)}))},t.prototype.ja=function(t,e,n){return this.Ua(t,e,n)},t.prototype.Da=function(t,e){var n=[this.Bm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=l.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.ae.projectId+"/databases/"+this.ae.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Qm(i.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");xe("Connection","Creating WebChannel: "+s+" "+i);var o=r.createWebChannel(s,i),u=!1,c=!1,h=new Is({Om:function(t){c?xe("Connection","Not sending because WebChannel is closed:",t):(u||(xe("Connection","Opening WebChannel transport."),o.open(),u=!0),xe("Connection","WebChannel sending:",t),o.send(t))},Fm:function(){return o.close()}}),p=function(t,e){o.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(l.WebChannel.EventType.OPEN,(function(){c||xe("Connection","WebChannel transport opened.")})),p(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,xe("Connection","WebChannel transport closed"),h.Mm())})),p(l.WebChannel.EventType.ERROR,(function(t){c||(c=!0,xe("Connection","WebChannel transport errored:",t),h.Mm(new f(d.UNAVAILABLE,"The operation could not be completed")))})),p(l.WebChannel.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Oe(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){xe("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=ht[t];if(void 0!==e)return Ht(e)}(i),a=r.message;void 0===s&&(s=d.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,h.Mm(new f(s,a)),o.close()}else xe("Connection","WebChannel received:",n),h.qm(n)}})),setTimeout((function(){h.Lm()}),0),h},t.prototype.Gm=function(t){var e=xs[t];return Oe(void 0!==e,"Unknown REST mapping for: "+t),this.Bm+"/v1/projects/"+this.ae.projectId+"/databases/"+this.ae.database+"/documents:"+e},t}(),Ns=window.crypto||window.__PRIVATE_msCrypto,Os=function(){function t(){this.de=!0,this.xa="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.Bd=function(t){return Promise.resolve(new ks(t))},t.prototype.Qd=function(){return Ts.th()?new Ts:new Ss},t.prototype.Gd=function(t){return new we(t,{de:!0})},t.prototype.mr=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t.prototype.randomBytes=function(t){if(t<=0)return new Uint8Array;var e=new Uint8Array(t);return Ns.getRandomValues(e),e},t}();function Ds(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){return new Jr(t,e,new Es)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(s.__assign({},Cs)))}(t),t.registerVersion("@firebase/firestore","1.13.1")}Ce.wr(new Os),Ds(i),e.__PRIVATE_registerFirestore=Ds},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),o=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var s=this.getOrInitializeService(i);if(!s){if(n)return null;throw Error("Service "+this.name+" is not available")}return s}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(c){}try{for(var i=r.__values(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=r.__read(s.value,2),a=o[1],u=this.normalizeInstanceIdentifier(o[0]);try{var l=this.getOrInitializeService(u);a.resolve(l)}catch(c){}}}catch(h){e={error:h}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new o(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=s,e.ComponentContainer=a,e.Provider=o},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.13.2","app"),t.exports=i},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return s})),n.d(e,"__rest",(function(){return o})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return l})),n.d(e,"__awaiter",(function(){return c})),n.d(e,"__generator",(function(){return h})),n.d(e,"__exportStar",(function(){return d})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return p})),n.d(e,"__spread",(function(){return m})),n.d(e,"__spreadArrays",(function(){return g})),n.d(e,"__await",(function(){return y})),n.d(e,"__asyncGenerator",(function(){return v})),n.d(e,"__asyncDelegator",(function(){return b})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return w})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return C})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return T}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){s.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,l):c(s[0][2],n)}catch(r){c(s[0][3],r)}var n}function u(t){a("next",t)}function l(t){a("throw",t)}function c(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return d})),n.d(e,"setUserLogHandler",(function(){return f}));var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,l=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),c=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){var e="string"==typeof t?a[t]:t;s.forEach((function(t){t.logLevel=e}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,s=n("mrSG"),o=n("zVF4"),a=n("S+S0"),u=n("q/0M"),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),c=new o.ErrorFactory("app","Firebase",l),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),f=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var l=s.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next())this._addComponent(c.value)}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name="[DEFAULT]");var a=s.name;if("string"!=typeof a||!a)throw c.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw c.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&o&&u.push("and"),o&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}l(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw c.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.13.2",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!o.contains(e,t=t||"[DEFAULT]"))throw c.create("no-app",{appName:t});return e[t]}function l(a){var u,l,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw c.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&o.deepExtend(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var p=s.__values(Object.keys(e)),m=p.next();!m.done;m=p.next())e[m.value]._addComponent(a)}catch(g){u={error:g}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(f);return e.INTERNAL=s.__assign(s.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(o.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,t)};var v=p;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.1",void 0),t.registerVersion("fire-js","")}(v),e.default=v,e.firebase=v},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return ar})),n.d(e,"EventType",(function(){return ur})),n.d(e,"WebChannel",(function(){return lr})),n.d(e,"XhrIo",(function(){return cr})),n.d(e,"createWebChannelTransport",(function(){return or}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=s||{},o=i;function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t,e){t=t.split("."),e=e||o;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[m]||(this[m]=++g))},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function x(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var k,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var R=o.navigator;if(R){var P=R.userAgent;if(P){k=P;break t}}k=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e,n={};for(e in t)n[e]=t[e];return n}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<V.length;s++)n=V[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=c;var j,q,B=O(k,"Opera"),z=O(k,"Trident")||O(k,"MSIE"),G=O(k,"Edge"),$=G||z,H=O(k,"Gecko")&&!(O(k.toLowerCase(),"webkit")&&!O(k,"Edge"))&&!(O(k,"Trident")||O(k,"MSIE"))&&!O(k,"Edge"),W=O(k.toLowerCase(),"webkit")&&!O(k,"Edge");function Q(){var t=o.document;return t?t.documentMode:void 0}t:{var K="",Y=(q=k,H?/rv:([^\);]+)(\)|;)/.exec(q):G?/Edge\/([\d\.]+)/.exec(q):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):W?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Y&&(K=Y?Y[1]:""),z){var J=Q();if(null!=J&&J>parseFloat(K)){j=String(J);break t}}j=K}var Z,X={};function tt(t){return function(t,e){var n=X;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=N(String(j)).split("."),r=N(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=D(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==o[2].length,0==a[2].length)||D(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}var et=o.document;Z=et&&z?Q()||("CSS1Compat"==et.compatMode?parseInt(j,10):5):void 0;var nt=!z||9<=Number(Z),rt=z&&!tt("9"),it=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{o.addEventListener("test",c,e),o.removeEventListener("test",c,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function ot(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(H){t:{try{U(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.Ia=!1},E(ot,st);var at={2:"touch",3:"pen",4:"mouse"};ot.prototype.b=function(){ot.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++lt,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function dt(t){this.src=t,this.a={},this.b=0}function ft(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=S(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.X&&s.listener==e&&s.capture==!!n&&s.da==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=pt(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new ct(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var mt="closure_lm_"+(1e6*Math.random()|0),gt={};function yt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,s){if(d(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=St(r),e&&e[ut]?e.Aa(n,r,p(i)?!!i.capture:!!i,s):vt(e,n,r,!0,i,s)}(t,e,n,r,i);if(d(e)){for(var s=0;s<e.length;s++)yt(t,e[s],n,r,i);return null}return n=St(n),t&&t[ut]?t.za(e,n,p(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=p(i)?!!i.capture:!!i;if(o&&!nt)return null;var a=Et(t);if(a||(t[mt]=a=new dt(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=wt,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_t(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])ft(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_t(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(ft(n,t),0==n.b&&(n.src=null,e[mt]=null)):ht(t)}}}function _t(t){return t in gt?gt[t]:gt[t]="on"+t}function wt(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&bt(t),n.call(r,e)}(t,nt?new ot(e,this):e=new ot(e||l("window.event"),this))}function Et(t){return(t=t[mt])instanceof dt?t:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(t){return"function"==h(t)?t:(t[Ct]||(t[Ct]=function(e){return t.handleEvent(e)}),t[Ct])}function Tt(){C.call(this),this.c=new dt(this),this.J=this,this.B=null}function It(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.X&&o.capture==n){var a=o.listener,u=o.da||o.src;o.Z&&ft(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}E(Tt,C),Tt.prototype[ut]=!0,(r=Tt.prototype).addEventListener=function(t,e,n,r){yt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,s){if(d(n))for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);else i=p(i)?!!i.capture:!!i,r=St(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=pt(o=e.a[n],r,i,s))&&(ht(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete e.a[n],e.b--))):e&&(e=Et(e))&&(n=e.a[n.toString()],e=-1,n&&(e=pt(n,r,i,s)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(a(t))t=new st(t,n);else if(t instanceof st)t.target=t.target||n;else{var i=t;F(t=new st(r,n),i)}if(i=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.a=e[s];i=It(o,r,!0,t)&&i}if(i=It(o=t.a=n,r,!0,t)&&i,i=It(o,r,!1,t)&&i,e)for(s=0;s<e.length;s++)i=It(o=t.a=e[s],r,!1,t)&&i;return i},r.G=function(){if(Tt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=o.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function kt(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nt,Ot=new At((function(){return new Rt}),(function(t){t.reset()}));function Dt(){var t=Vt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Rt(){this.next=this.b=this.a=null}function Pt(t){o.setTimeout((function(){throw t}),0)}function Mt(t,e){Nt||function(){var t=o.Promise.resolve(void 0);Nt=function(){t.then(Ft)}}(),Lt||(Nt(),Lt=!0),Vt.add(t,e)}kt.prototype.add=function(t,e){var n=Ot.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Rt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Rt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,Vt=new kt;function Ft(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(n){Pt(n)}var e=Ot;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Ut(t,e){Tt.call(this),this.b=t||1,this.a=e||o,this.f=b(this.gb,this),this.g=w()}function jt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function qt(t,e,n){if("function"==h(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:o.setTimeout(t,e||0)}function Bt(t,e,n){C.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.$a,this),this.a=[]}function zt(t){t.U=qt(t.b,t.c),t.f.apply(null,t.a)}function Gt(t){C.call(this),this.b=t,this.a={}}E(Ut,Tt),(r=Ut.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=w()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(jt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){Ut.N.G.call(this),jt(this),delete this.a},E(Bt,C),(r=Bt.prototype).ea=!1,r.U=null,r.Ta=function(t){this.a=arguments,this.U?this.ea=!0:zt(this)},r.G=function(){Bt.N.G.call(this),this.U&&(o.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,zt(this))},E(Gt,C);var $t=[];function Ht(t,e,n,r){d(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var s=yt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Wt(t){M(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function Qt(){}Gt.prototype.G=function(){Gt.N.G.call(this),Wt(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=new Tt;function Yt(t){st.call(this,"serverreachability",t)}function Jt(t){Kt.dispatchEvent(new Yt(Kt,t))}function Zt(t){st.call(this,"statevent",t)}function Xt(t){Kt.dispatchEvent(new Zt(Kt,t))}function te(t){st.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return o.setTimeout((function(){t()}),e)}E(Yt,st),E(Zt,st),E(te,st);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function se(){}ie.prototype.a=null;var oe,ae={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ue(){st.call(this,"d")}function le(){st.call(this,"c")}function ce(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Gt(this),this.O=de,this.P=new Ut(t=$?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ue,st),E(le,st),E(ce,ie),oe=new ce;var de=45e3,fe={},pe={};function me(t,e,n){t.F=1,t.f=je(Re(e)),t.l=n,t.H=!0,ye(t,null)}function ge(t,e,n,r){t.F=1,t.f=je(Re(e)),t.l=null,t.H=n,ye(t,r)}function ye(t,e){t.v=w(),_e(t),t.D=Re(t.f),Ue(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Bt(b(t.Ja,t,t.a),t.J)),Ht(t.I,t.a,"readystatechange",t.cb),e=t.h?L(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Jt(1)}function ve(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=be(t,n);if(i==pe){4==e&&(t.c=4,Xt(14),r=!1);break}if(i==fe){t.c=4,Xt(15),r=!1;break}Te(t,i)}4==e&&0==n.length&&(t.c=1,Xt(16),r=!1),t.b=t.b&&r,r||(Se(t),Ce(t))}function be(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?fe:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function _e(t){t.R=w()+t.O,we(t,t.O)}function we(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(b(t.ab,t),e)}function Ee(t){t.i&&(o.clearTimeout(t.i),t.i=null)}function Ce(t){t.g.Ca()||t.m||t.g.na(t)}function Se(t){Ee(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,jt(t.P),Wt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Te(t,e){try{t.g.Fa(t,e),Jt(4)}catch(n){}}function Ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||a(t))T(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(f(t)||a(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t,e){Ne(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ke(t))}function ke(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ne(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ne(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=he.prototype).setTimeout=function(t){this.O=t},r.cb=function(t){t=t.target;var e=this.B;e&&3==Rn(t)?e.Ta():this.Ja(t)},r.Ja=function(t){try{if(t==this.a)t:{var e=Rn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!$&&!this.a.aa())){this.m||4!=e||7==n||Jt(8==n||0>=r?3:2),Ee(this);var i=this.a.T();this.o=i;var s=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var o=Pn(this.a,"X-HTTP-Initial-Response");if(o&&!A(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.c=3,Xt(12),Se(this),Ce(this);break t}this.s=!0,Te(this,a)}this.H?(ve(this,e,s),$&&this.b&&3==e&&(Ht(this.I,this.P,"tick",this.bb),this.P.start())):Te(this,s),4==e&&Se(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,_e(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.c=3,Xt(12)):(this.c=0,Xt(13)),Se(this),Ce(this)}}}catch(u){}},r.bb=function(){if(this.a){var t=Rn(this.a),e=this.a.aa();this.A<e.length&&(Ee(this),ve(this,t,e),this.b&&4!=t&&_e(this))}},r.cancel=function(){this.m=!0,Se(this)},r.ab=function(){this.i=null;var t=w();0<=t-this.R?(2!=this.F&&(Jt(3),Xt(17)),Se(this),this.c=2,Ce(this)):we(this,this.R-t)},(r=xe.prototype).C=function(){ke(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return ke(this),this.a.concat()},r.get=function(t,e){return Ne(this.b,t)?this.b[t]:e},r.set=function(t,e){Ne(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Oe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function De(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof De?(this.h=void 0!==e?e:t.h,Pe(this,t.f),this.j=t.j,Me(this,t.b),Le(this,t.i),this.a=t.a,Ve(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Oe))?(this.h=!!e,Pe(this,n[1]||"",!0),this.j=qe(n[2]||""),Me(this,n[3]||"",!0),Le(this,n[4]),this.a=qe(n[5]||"",!0),Ve(this,n[6]||"",!0),this.g=qe(n[7]||"")):(this.h=!!e,this.c=new Ke(null,this.h))}function Re(t){return new De(t)}function Pe(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Me(t,e,n){t.b=n?qe(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ve(t,e,n){e instanceof Ke?(t.c=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),Xe(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=Be(e,We)),t.c=new Ke(e,t.h))}function Fe(t,e,n){t.c.set(e,n)}function Ue(t,e,n){d(n)||(n=[String(n)]),Xe(t.c,e,n)}function je(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return a(t)?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,Ge,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?He:$e,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Be(n,Qe)),t.join("")},De.prototype.resolve=function(t){var e=Re(this),n=!!t.f;n?Pe(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Me(e,t.b):n=null!=t.i;var r=t.a;if(n)Le(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(O(i,"./")||O(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var s=[],o=0;o<i.length;){var a=i[o++];"."==a?r&&o==i.length&&s.push(""):".."==a?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&o==i.length&&s.push("")):(s.push(a),r=!0)}r=s.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Ve(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Ge=/[#\/\?@]/g,$e=/[#\?:]/g,He=/[#\?]/g,We=/[#\?@]/g,Qe=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Je(t,e){Ye(t),e=en(t,e),Ne(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function Ze(t,e){return Ye(t),e=en(t,e),Ne(t.a.b,e)}function Xe(t,e,n){Je(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),x(n)),t.b+=n.length)}function tn(t){var e=new Ke;return e.c=t.c,t.a&&(e.a=new xe(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)Xt(4),e?(Xt(10),Hn(t.a,t,!1)):(Xt(11),Hn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Jn(e=t.a,e.Y()?t.f:null,t.i),Xt(4),Ue(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Fe(e,n,r),ge(t.b,e,!1,t.f)}}function sn(){this.a=this.b=null}function on(){this.a=new xe}function an(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[m]||(t[m]=++g)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function ln(t){this.g=t||cn,t=o.PerformanceNavigationTiming?0<(t=o.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(o.ka&&o.ka.Da&&o.ka.Da()&&o.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new on),this.b=null,this.c=[]}(r=Ke.prototype).add=function(t,e){Ye(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ye(this),this.a.forEach((function(n,r){T(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.K=function(){Ye(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},r.C=function(t){Ye(this);var e=[];if(a(t))Ze(this,t)&&(e=I(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},r.set=function(t,e){return Ye(this),this.c=null,Ze(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")},E((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Pn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Pn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Kn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Kn(e,2)}else 1==this.M&&(this.g?Xt(6):"11111"==e?(Xt(5),this.g=!0,(!z||10<=Number(Z))&&(this.c=200,this.b.cancel(),Xt(11),Hn(this.a,this,!0))):(Xt(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Xt(11),Hn(this.a,this,!0)):(Xt(10),Hn(this.a,this,!1)));else{0==this.M?Xt(8):1==this.M&&Xt(9);var t=this.a;t.m=this.c,Kn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},on.prototype.add=function(t){this.a.set(an(t),t)},on.prototype.C=function(){return this.a.C()};var cn=10;function hn(t,e){!t.a&&(O(e,"spdy")||O(e,"quic")||O(e,"h2"))&&(t.f=t.g,t.a=new on,t.b&&(mn(t,t.b),t.b=null))}function dn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function fn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t.b?t=t.b==e:t.a?(e=an(e),t=Ne(t.a.a.b,e)):t=!1,t}function mn(t,e){t.a?t.a.add(e):t.b=e}function gn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=an(e),n=Ne(t.a.a.b,n)),n&&Ae(t.a.a,an(e)))}function yn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return T(t.a.C(),(function(t){e=e.concat(t.j)})),e}return x(t.c)}function vn(){}function bn(){this.a=new vn}function _n(t,e,n){var r=n||"";try{Ie(t,(function(t,n){var i=t;p(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}ln.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},vn.prototype.stringify=function(t){return o.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return o.JSON.parse(t,void 0)};var En=o.JSON.parse;function Cn(t){Tt.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Sn,this.D=this.F=!1}E(Cn,Tt);var Sn="",Tn=/^https?$/i,In=["POST","PUT"];function xn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,kn(t),On(t)}function kn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Nn(t){if(t.b&&void 0!==s&&(!t.s[1]||4!=Rn(t)||2!=t.T()))if(t.l&&4==Rn(t))qt(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Rn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.A).match(Oe)[1]||null;if(!a&&o.self&&o.self.location){var u=o.self.location.protocol;a=u.substr(0,u.length-1)}i=!Tn.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var l=2<Rn(t)?t.a.statusText:""}catch(c){l=""}t.f=l+" ["+t.T()+"]",kn(t)}}finally{On(t)}}}function On(t,e){if(t.a){Dn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Dn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(o.clearTimeout(t.m),t.m=null)}function Rn(t){return t.a?t.a.readyState:0}function Pn(t,e){return t.a?t.a.getResponseHeader(e):null}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Fe(t,e,n),t}function Ln(t){this.f=[],this.F=new sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!l("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=l("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=l("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=l("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(t&&t.concurrentRequestLimit),this.ja=new bn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Vn(t){if(Fn(t),3==t.u){var e=t.P++,n=Re(t.B);Fe(n,"SID",t.H),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Bn(t,n),(e=new he(t,e,void 0)).F=2,e.f=je(Re(n)),n=!1,o.navigator&&o.navigator.sendBeacon&&(n=o.navigator.sendBeacon(e.f.toString(),"")),!n&&o.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=w(),_e(e)}Yn(t)}function Fn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(o.clearTimeout(t.l),t.l=null),Wn(t),t.b.cancel(),t.h&&(u(t.h)&&o.clearTimeout(t.h),t.h=null)}function Un(t,e){t.f.push(new un(t.Qa++,e)),3==t.u&&jn(t)}function jn(t){dn(t.b)||t.h||(t.h=!0,Mt(t.Ha,t),t.A=0)}function qn(t,e){var n;n=e?e.W:t.P++;var r=Re(t.B);Fe(r,"SID",t.H),Fe(r,"RID",n),Fe(r,"AID",t.O),Bn(t,r),t.g&&t.i&&Mn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=zn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),mn(t.b,n),me(n,r,e)}function Bn(t,e){t.c&&Ie({},(function(t,n){Fe(e,n,t)}))}function zn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Sa,t.c,t):null;t:for(var i=t.f,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=s))s=Math.max(0,i[u].b-100),a=!1;else try{_n(c,o,"req"+l+"_")}catch(h){r&&r(c)}}if(a){r=o.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Gn(t){t.a||t.l||(t.S=1,Mt(t.Ga,t),t.v=0)}function $n(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(b(t.Ga,t),Qn(t,t.v)),t.v++,0))}function Hn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Jn(t,null,t.ha),jn(t)}function Wn(t){null!=t.s&&(o.clearTimeout(t.s),t.s=null)}function Qn(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Kn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.eb,t);n||(n=new De("//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||Pe(n,"https"),je(n)),function(t,e){var n=new Qt;if(o.Image){var r=new Image;r.onload=_(wn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(wn,n,r,"TestLoadImage: error",!1,e),r.onabort=_(wn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(wn,n,r,"TestLoadImage: timeout",!1,e),o.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xt(2);t.u=0,t.c&&t.c.ta(e),Yn(t),Fn(t)}function Yn(t){t.u=0,t.m=-1,t.c&&(0==yn(t.b).length&&0==t.f.length||(t.b.c.length=0,x(t.f),t.f.length=0),t.c.sa())}function Jn(t,e,n){var r=function(t){return t instanceof De?Re(t):new De(t,void 0)}(n);if(""!=r.b)e&&Me(r,e+"."+r.b),Le(r,r.i);else{var i=o.location;r=function(t,e,n,r){var i=new De(null,void 0);return t&&Pe(i,t),e&&Me(i,e),n&&Le(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,(function(t,e){Fe(r,e,t)})),n=t.I,(e=t.j)&&n&&Fe(r,e,n),Fe(r,"VER",t.wa),Bn(t,r),r}function Zn(){}function Xn(){if(z&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function tr(t,e){Tt.call(this),this.a=new Ln(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){le.call(this),this.status=1}function rr(t){this.a=t}(r=Cn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:oe),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(s){return void An(this,s)}t=n||"";var i=new xe(this.headers);r&&Ie(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=xn,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(i.K()),n=o.FormData&&t instanceof o.FormData,!(0<=S(In,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(t){return z&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=qt(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){An(this,s)}},r.Ba=function(){void 0!==s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),On(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),On(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Nn(this):this.Za())},r.Za=function(){Nn(this)},r.T=function(){try{return 2<Rn(this)?this.a.status:-1}catch(q){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),En(e)}},r.ya=function(){return this.h},r.Xa=function(){return a(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var s=this.f[i];if(void 0===(s="__data__"in s.a&&a(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=zn(this,n,e),Fe(i=Re(this.B),"RID",t),Fe(i,"CVER",22),this.o&&this.j&&Fe(i,"X-HTTP-Session-Id",this.j),Bn(this,i),this.g&&r&&Mn(i,this.g,r),mn(this.b,n),this.W?(Fe(i,"$req",e),Fe(i,"SID","null"),n.S=!0,me(n,i,null)):me(n,i,e),this.u=2}}else 3==this.u&&(t?qn(this,t):0==this.f.length||dn(this.b)||qn(this))},r.Ga=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Re(this.pa);Fe(t,"RID","rpc"),Fe(t,"SID",this.H),Fe(t,"CI",this.ia?"0":"1"),Fe(t,"AID",this.O),Bn(this,t),Fe(t,"TYPE","xmlhttp"),this.g&&this.i&&Mn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ge(this.a,t,!0,this.ga)},r.Fa=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(s){n=null}if(d(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Wn(this),this.a.cancel(),this.a=null}$n(this),Xt(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(b(this.Ya,this),6e3));if(1>=fn(this.b)&&this.fa){try{this.fa()}catch(s){}this.fa=void 0}}else Kn(this,11)}else if((t.s||this.a==t)&&Wn(this),!A(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,Fe(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(gn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ee(r),_e(r)),this.a=r):Gn(this),0<this.f.length&&jn(this)}else"stop"!=r[0]&&"close"!=r[0]||Kn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Kn(this,7):Vn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,$n(this),Xt(19))},r.na=function(t){var e=null;if(this.a==t){Wn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,gn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=w()-t.v,Kt.dispatchEvent(new te(Kt,t.l?t.l.length:0,e,this.A)),jn(this)):Gn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(fn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=ee(b(t.Ha,t,e),Qn(t,t.A)),t.A++,0)))}(this,t)||2==n&&$n(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Kn(this,5);break;case 4:Kn(this,10);break;case 3:Kn(this,6);break;default:Kn(this,2)}}},r.eb=function(t){Xt(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Cn(this.Ka)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Zn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},Xn.prototype.a=function(t,e){return new tr(t,e)},E(tr,Tt),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Xt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Mn(e,t.g,t.i)),(t=t.w).i=n,e=Jn(t.a,null,t.i),Xt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Ue(e,"MODE","init"),!t.a.o&&t.a.j&&Ue(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,ge(t.b,e,!1,null),t.M=0)},r.close=function(){Vn(this.a)},r.Wa=function(t){if(a(t)){var e={};e.__data__=t,Un(this.a,e)}else this.h?((e={}).__data__=xt(t),Un(this.a,e)):Un(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Vn(this.a),delete this.a,tr.N.G.call(this)},E(er,ue),E(nr,le),E(rr,Zn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=_((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),Xn);Xn.prototype.createWebChannel=Xn.prototype.a,tr.prototype.send=tr.prototype.Wa,tr.prototype.open=tr.prototype.Va,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",se.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Tt.prototype.listen=Tt.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var sr={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:se,XhrIo:Cn},or=sr.createWebChannelTransport,ar=sr.ErrorCode,ur=sr.EventType,lr=sr.WebChannel,cr=sr.XhrIo;e.default=sr},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function l(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(o){e=o instanceof c?d(o.errors):[o]}if(u(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(l(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof c?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class m extends p{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}function v(...t){return b(t)}function b(t){return 0===t.length?y:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}let _=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=w(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[g](){return this}pipe(...t){return 0===t.length?this:b(t)(this)}toPromise(t){return new(t=w(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function w(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const E=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class C extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class S extends p{constructor(t){super(t),this.destination=t}}let T=(()=>{class t extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new S(this)}lift(t){const e=new I(this,this);return e.operator=t,e}next(t){if(this.closed)throw new E;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new E;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new E;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new E;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new C(this,t))}asObservable(){const t=new _;return t.source=this,t}}return t.create=(t,e)=>new I(t,e),t})();class I extends T{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function x(t){return t&&"function"==typeof t.schedule}class A extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const k=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const O=N(),D=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const P=t=>{if(t&&"function"==typeof t[g])return r=t,t=>{const e=r[g]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(D(t))return k(t);if(R(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[O])return e=t,t=>{const n=e[O]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=l(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var e,n,r};function M(t,e,n,r,i=new A(t,n,r)){if(!i.closed)return e instanceof _?e.subscribe(i):P(e)(i)}class L extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function V(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new F(t,e))}}class F{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new U(t,this.project,this.thisArg))}}class U extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function j(t,e){return new _(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function q(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,e){return new _(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[g]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(R(t))return function(t,e){return new _(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(D(t))return j(t,e);if(function(t){return t&&"function"==typeof t[O]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[O](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof _?t:new _(P(t))}function B(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(B((n,r)=>q(t(n,r)).pipe(V((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new z(t,n)))}class z{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends L{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new A(this,e,n),i=this.destination;i.add(r);const s=M(this,t,void 0,void 0,r);s!==r&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t=Number.POSITIVE_INFINITY){return B(y,t)}function H(t,e){return e?j(t,e):new _(k(t))}function W(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return x(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof _?t[0]:$(e)(H(t,n))}function Q(){return function(t){return t.lift(new K(t))}}class K{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Y(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class Y extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class J extends _{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return Q()(this)}}const Z=(()=>{const t=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends S{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function tt(){return new T}function et(t,e,n){return(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})()}const nt=et("Inject",t=>({token:t})),rt=et("Optional"),it=et("Self"),st=et("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function at(t){for(let e in t)if(t[e]===at)return e;throw Error("Could not find renamed property on target object.")}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return ct(t,t[ht])||ct(t,t[dt])}function ct(t,e){return e&&e.token===t?e:null}const ht=at({"\u0275prov":at}),dt=at({ngInjectableDef:at});function ft(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const pt=at({__forward_ref__:at});function mt(t){return t.__forward_ref__=mt,t.toString=function(){return ft(this())},t}function gt(t){return"function"==typeof(e=t)&&e.hasOwnProperty(pt)&&e.__forward_ref__===mt?t():t;var e}const yt="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,bt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,_t="undefined"!=typeof global&&global,wt=yt||_t||vt||bt;class Et{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ct=new Et("INJECTOR",-1),St={},Tt=/\n/gm,It=at({provide:String,useValue:at});let xt=void 0;function At(t){const e=xt;return xt=t,e}function kt(t,e=ot.Default){return function(t,e=ot.Default){if(void 0===xt)throw new Error("inject() must be called from an injection context");return null===xt?function(t,e,n){const r=lt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ot.Optional)return null;throw new Error(`Injector: NOT_FOUND [${ft(t)}]`)}(t,0,e):xt.get(t,e&ot.Optional?null:void 0,e)}(gt(t),e)}const Nt=kt;class Ot{get(t,e=St){if(e===St){const e=new Error(`NullInjectorError: No provider for ${ft(t)}!`);throw e.name="NullInjectorError",e}return e}}function Dt(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):ft(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Tt,"\n  ")}`}class Rt{}class Pt{}function Mt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Lt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Vt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}();let Ft=void 0;const Ut=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wt))();function jt(t){return t.ngDebugContext}function qt(t){return t.ngOriginalError}function Bt(t,...e){t.error(...e)}class zt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Bt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?jt(t)?jt(t):this._findContext(qt(t)):null}_findOriginalError(t){let e=qt(t);for(;e&&qt(e);)e=qt(e);return e}}class Gt{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class $t extends Gt{getTypeName(){return"HTML"}}class Ht extends Gt{getTypeName(){return"Style"}}class Wt extends Gt{getTypeName(){return"Script"}}class Qt extends Gt{getTypeName(){return"URL"}}class Kt extends Gt{getTypeName(){return"ResourceURL"}}function Yt(t){return t instanceof Gt?t.changingThisBreaksApplicationSecurity:t}function Jt(t,e){const n=Zt(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Zt(t){return t instanceof Gt&&t.getTypeName()||null}let Xt=!0,te=!1;function ee(){return te=!0,Xt}class ne{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let e=this.inertDocument.body;if(null==e){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),e=this.inertDocument.createElement("body"),t.appendChild(e)}e.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!e.querySelector||e.querySelector("svg")?(e.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=e.querySelector&&e.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const re=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ie=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function se(t){return(t=String(t)).match(re)||t.match(ie)?t:(ee()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function oe(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ae(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ue=oe("area,br,col,hr,img,wbr"),le=oe("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ce=oe("rp,rt"),he=ae(ce,le),de=ae(ue,ae(le,oe("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ae(ce,oe("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),he),fe=oe("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pe=oe("srcset"),me=ae(fe,pe,oe("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oe("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ge=oe("script,style,template");class ye{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!de.hasOwnProperty(e))return this.sanitizedSomething=!0,!ge.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!me.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;fe[s]&&(o=se(o)),pe[s]&&(r=o,o=(r=String(r)).split(",").map(t=>se(t.trim())).join(", ")),this.buf.push(" ",e,'="',_e(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();de.hasOwnProperty(e)&&!ue.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(_e(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,be=/([^\#-~ |!])/g;function _e(t){return t.replace(/&/g,"&amp;").replace(ve,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(be,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let we;function Ee(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Ce=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),Se=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Te=/^url\(([^)]+)\)$/;function Ie(t){var e;return e=t.replace(/[$@]/g,"_"),`ng-reflect-${t=e.replace(xe,(...t)=>"-"+t[1].toLowerCase())}`}const xe=/([A-Z])/g;function Ae(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}let ke=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ne(),t})();const Ne=(...t)=>{},Oe=new Et("Set Injector scope."),De=function(t,e,n){return new Fe(t,e,n)};let Re=(()=>{class t{static create(t,e){return Array.isArray(t)?De(t,e,""):De(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=St,t.NULL=new Ot,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>kt(Ct)}),t.__NG_ELEMENT_ID__=-1,t})();const Pe=function(t){return t},Me=[],Le=Pe,Ve=function(){return Array.prototype.slice.call(arguments)};class Fe{constructor(t,e=Re.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(Re,{token:Re,fn:Pe,deps:Me,value:this,useNew:!1}),r.set(Ct,{token:Ct,fn:Pe,deps:Me,value:this,useNew:!1}),this.scope=function t(e,n){let r=null;if(n)if(n=gt(n),Array.isArray(n))for(let i=0;i<n.length;i++)r=t(e,n[i])||r;else{if("function"==typeof n)throw qe("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw qe("Unexpected provider",n);{let t=gt(n.provide);const i=Ue(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==Ve)throw je(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:Ve,value:Me});t=n,r.deps.push({token:t,options:6})}const s=e.get(t);if(s&&s.fn==Ve)throw je(t);t===Oe&&(r=i.value),e.set(t,i)}}return r}(r,t)}get(t,e,n=ot.Default){const r=this._records;let i=r.get(t);if(void 0===i){const e=lt(t);if(e){const n=e&&e.providedIn;("any"===n||null!=n&&n===this.scope)&&r.set(t,i=Ue({provide:t,useFactory:e.factory,deps:Me}))}void 0===i&&r.set(t,null)}let s=At(this);try{return function t(e,n,r,i,s,o){try{return function(e,n,r,i,s,o){let a;if(!n||o&ot.SkipSelf)a=o&ot.Self?Re.NULL.get(e,o&ot.Optional?void 0!==s?s:null:s):i.get(e,s,ot.Default);else{if(a=n.value,a==Le)throw Error("\u0275Circular dependency");if(a===Me){n.value=Le;let e=void 0,s=n.useNew,o=n.fn,u=n.deps,l=Me;if(u.length){l=[];for(let e=0;e<u.length;e++){const n=u[e],s=n.options,o=2&s?r.get(n.token):void 0;l.push(t(n.token,o,r,o||4&s?i:Re.NULL,1&s?null:Re.THROW_IF_NOT_FOUND,ot.Default))}}n.value=a=s?new o(...l):o.apply(e,l)}}return a}(e,n,r,i,s,o)}catch(a){throw a instanceof Error||(a=new Error(a)),(a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(e),n&&n.value==Le&&(n.value=Me),a}}(t,i,r,this.parent,e,n)}catch(o){return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=Dt("\n"+t.message,i,"StaticInjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,0,this.source)}finally{At(s)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(ft(n))),`StaticInjector[${t.join(", ")}]`}}function Ue(t){const e=function(t){let e=Me;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,i=gt(n[t]);if(Array.isArray(i))for(let t=0,e=i;t<e.length;t++){const n=e[t];n instanceof rt||n==rt?r|=1:n instanceof st||n==st?r&=-3:n instanceof it||n==it?r&=-5:i=n instanceof nt?n.token:gt(n)}e.push({token:i,options:r})}}else if(t.useExisting)e=[{token:gt(t.useExisting),options:6}];else if(!(n||It in t))throw qe("'deps' required",t);return e}(t);let n=Pe,r=Me,i=!1,s=gt(t.provide);if(It in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=gt(t.useClass);else{if("function"!=typeof s)throw qe("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=s}return{deps:e,fn:n,useNew:i,value:r}}function je(t){return qe("Cannot mix multi providers and regular providers",t)}function qe(t,e){return new Error(Dt(t,e,"StaticInjectorError"))}const Be=new Et("AnalyzeForEntryComponents");let ze=null;function Ge(){if(!ze){const t=wt.Symbol;if(t&&t.iterator)ze=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ze=n)}}}return ze}function $e(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function He(t,e){const n=Qe(t),r=Qe(e);if(n&&r)return function(t,e,n){const r=t[Ge()](),i=e[Ge()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,He);{const i=t&&("object"==typeof t||"function"==typeof t),s=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!s)||$e(t,e)}}class We{constructor(t){this.wrapped=t}static wrap(t){return new We(t)}static unwrap(t){return We.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof We}}function Qe(t){return!!Ke(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ge()in t)}function Ke(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ye(t){return!!t&&"function"==typeof t.then}function Je(t){return!!t&&"function"==typeof t.subscribe}class Ze{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class Xe{}function tn(t){const e=Error(`No component factory found for ${ft(t)}. Did you add it to @NgModule.entryComponents?`);return e[en]=t,e}const en="ngComponent";class nn{resolveComponentFactory(t){throw tn(t)}}let rn=(()=>{class t{}return t.NULL=new nn,t})();class sn{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw tn(t);return new on(e,this._ngModule)}}class on extends Xe{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}function an(...t){}let un=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>ln(t),t})();const ln=an;class cn{}const hn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let dn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>fn(),t})();const fn=an;let pn=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class mn{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const gn=new mn("9.0.7");class yn{constructor(){}supports(t){return Qe(t)}create(t){return new bn(t)}}const vn=(t,e)=>e;class bn{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||vn}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Cn(n,r,i)?e:n,o=Cn(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Qe(t))throw new Error(`Error trying to diff '${ft(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&$e(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),$e(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ge()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&$e(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),$e(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?($e(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?($e(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new _n(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new En),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new En),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class _n{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&$e(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class En{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new wn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cn(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Sn{constructor(){}supports(t){return t instanceof Map||Ke(t)}create(){return new Tn}}class Tn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ke(t)))throw new Error(`Error trying to diff '${ft(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new In(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){$e(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class In{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let xn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new yn])}),t})(),An=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new Sn])}),t})();const kn=[new Sn],Nn=new xn([new yn]),On=new An(kn);let Dn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Rn(t,un),t})();const Rn=an;let Pn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Mn(t,un),t})();const Mn=an;function Ln(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Vn(n,e),n}(i,t)}function Vn(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function Fn(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function Un(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function jn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function qn(t,e){return t.nodes[e]}function Bn(t,e){return t.nodes[e]}function zn(t,e){return t.nodes[e]}function Gn(t,e){return t.nodes[e]}function $n(t,e){return t.nodes[e]}const Hn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Wn=()=>{},Qn=new Map;function Kn(t){let e=Qn.get(t);return e||(e=ft(t)+"_"+Qn.size,Qn.set(t,e)),e}function Yn(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Jn=0;function Zn(t,e,n,r){return!(!(2&t.state)&&$e(t.oldValues[e.bindingIndex+n],r))}function Xn(t,e,n,r){return!!Zn(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function tr(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!He(i,r)){const s=e.bindings[n].name;throw Ln(Hn.createDebugContext(t,e.nodeIndex),`${s}: ${i}`,`${s}: ${r}`,0!=(1&t.state))}}function er(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function nr(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function rr(t,e,n,r){try{return er(33554432&t.def.nodes[e].flags?Bn(t,e).componentView:t),Hn.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function ir(t){return t.parent?Bn(t.parent,t.parentNodeDef.nodeIndex):null}function sr(t){return t.parent?t.parentNodeDef.parent:null}function or(t,e){switch(201347067&e.flags){case 1:return Bn(t,e.nodeIndex).renderElement;case 2:return qn(t,e.nodeIndex).renderText}}function ar(t,e){return t?`${t}:${e}`:e}function ur(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function lr(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function cr(t){return 1<<t%32}function hr(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=cr(t)):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function dr(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,"__source",{value:e,configurable:!0}),{flags:r,token:n,tokenKey:Kn(n)}})}function fr(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Vt.Native?Bn(t,n.renderParent.nodeIndex).renderElement:void 0:e}const pr=new WeakMap;function mr(t){let e=pr.get(t);return e||(e=t(()=>Wn),e.factory=t,pr.set(t,e)),e}function gr(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(or(t,t.def.lastRenderRootNode))),yr(t,e,0,t.def.nodes.length-1,n,r,i)}function yr(t,e,n,r,i,s,o){for(let a=n;a<=r;a++){const n=t.def.nodes[a];11&n.flags&&br(t,n,e,i,s,o),a+=n.childCount}}function vr(t,e,n,r,i,s){let o=t;for(;o&&!ur(o);)o=o.parent;const a=o.parent,u=sr(o),l=u.nodeIndex+u.childCount;for(let c=u.nodeIndex+1;c<=l;c++){const t=a.def.nodes[c];t.ngContentIndex===e&&br(a,t,n,r,i,s),c+=t.childCount}if(!a.parent){const o=t.root.projectableNodes[e];if(o)for(let e=0;e<o.length;e++)_r(t,o[e],n,r,i,s)}}function br(t,e,n,r,i,s){if(8&e.flags)vr(t,e.ngContent.index,n,r,i,s);else{const o=or(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&_r(t,o,n,r,i,s),32&e.bindingFlags&&_r(Bn(t,e.nodeIndex).componentView,o,n,r,i,s)):_r(t,o,n,r,i,s),16777216&e.flags){const o=Bn(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<o.length;t++)gr(o[t],n,r,i,s)}1&e.flags&&!e.element.name&&yr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,s)}}function _r(t,e,n,r,i,s){const o=t.renderer;switch(n){case 1:o.appendChild(r,e);break;case 2:o.insertBefore(r,e,i);break;case 3:o.removeChild(r,e);break;case 0:s.push(e)}}const wr=/^:([^:]+):(.+)$/;function Er(t){if(":"===t[0]){const e=t.match(wr);return[e[1],e[2]]}return["",t]}function Cr(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}const Sr={},Tr=Kn(Re),Ir=Kn(Ct),xr=Kn(Rt);function Ar(t,e,n,r){return n=gt(n),{index:-1,deps:dr(r,ft(e)),flags:t,token:e,value:n}}function kr(t,e,n=Re.THROW_IF_NOT_FOUND){const r=At(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const i=e.tokenKey;switch(i){case Tr:case Ir:case xr:return t}const s=t._def.providersByKey[i];let o;if(s){let e=t._providers[s.index];return void 0===e&&(e=t._providers[s.index]=Nr(t,s)),e===Sr?void 0:e}if((o=lt(e.token))&&function(t,e){const n=e.providedIn;return null!=n&&("any"===n||n===t._def.scope||function(t,e){return t._def.modules.indexOf(e)>-1}(t,n))}(t,o)){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:o.factory,deps:[],index:n,token:e.token},t._providers[n]=Sr,t._providers[n]=Nr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{At(r)}}function Nr(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(kr(t,n[0]));case 2:return new e(kr(t,n[0]),kr(t,n[1]));case 3:return new e(kr(t,n[0]),kr(t,n[1]),kr(t,n[2]));default:const i=[];for(let e=0;e<r;e++)i[e]=kr(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(kr(t,n[0]));case 2:return e(kr(t,n[0]),kr(t,n[1]));case 3:return e(kr(t,n[0]),kr(t,n[1]),kr(t,n[2]));default:const i=[];for(let e=0;e<r;e++)i[e]=kr(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=kr(t,e.deps[0]);break;case 256:n=e.value}return n===Sr||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Sr:n}function Or(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,Lt(n,e),Hn.dirtyParentQueries(r),Rr(r),r}function Dr(t,e,n){const r=e?or(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),s=n.renderer.nextSibling(r);gr(n,2,i,s,void 0)}function Rr(t){gr(t,3,null,null,void 0)}const Pr={};function Mr(t,e,n,r,i,s){return new Lr(t,e,n,r,i,s)}class Lr extends Xe{constructor(t,e,n,r,i,s){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=s,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=mr(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,o=Hn.createRootView(t,e||[],n,i,r,Pr),a=zn(o,s).instance;return n&&o.renderer.setAttribute(Bn(o,0).renderElement,"ng-version",gn.full),new Vr(o,new qr(o),a)}}class Vr extends class{}{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new un(Bn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new $r(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Fr(t,e,n){return new Ur(t,e,n)}class Ur{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new un(this._data.renderElement)}get injector(){return new $r(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=sr(t),t=t.parent;return t?new $r(t,e):new $r(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Or(this._data,t);Hn.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new qr(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;i||t instanceof on||(i=s.get(Rt));const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=t,Mt(i,n,r),function(t,e){const n=ir(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,r),Hn.dirtyParentQueries(r),Dr(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,n){const r=t.viewContainer._embeddedViews,i=r[e];Lt(r,e),null==n&&(n=r.length),Mt(r,n,i),Hn.dirtyParentQueries(i),Rr(i),Dr(t,n>0?r[n-1]:null,i)}(this._data,n,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Or(this._data,t);e&&Hn.destroyView(e)}detach(t){const e=Or(this._data,t);return e?new qr(e):null}}function jr(t){return new qr(t)}class qr{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return gr(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){er(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Hn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Hn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Hn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Rr(this._view),Hn.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Br(t,e){return new zr(t,e)}class zr extends Dn{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new qr(Hn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new un(Bn(this._parentView,this._def.nodeIndex).renderElement)}}function Gr(t,e){return new $r(t,e)}class $r{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Re.THROW_IF_NOT_FOUND){return Hn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Kn(t)},e)}}function Hr(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=Bn(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return qn(t,n.nodeIndex).renderText;if(20240&n.flags)return zn(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function Wr(t,e,n,r){return new Qr(t,e,n,r)}class Qr{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(void 0);return n}(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Nr(t,i))}}(this)}get(t,e=Re.THROW_IF_NOT_FOUND,n=ot.Default){let r=0;return n&ot.SkipSelf?r|=1:n&ot.Self&&(r|=4),kr(this,{token:t,tokenKey:Kn(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(rn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${ft(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const e=t._providers[i];if(e&&e!==Sr){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const Kr=Kn(dn),Yr=Kn(un),Jr=Kn(Pn),Zr=Kn(Dn),Xr=Kn(ke),ti=Kn(Re),ei=Kn(Ct);function ni(t,e,n,r,i,s,o,a){const u=[];if(o)for(let c in o){const[t,e]=o[c];u[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const l=[];if(a)for(let c in a)l.push({type:1,propName:c,target:null,eventName:a[c]});return ii(t,e|=16384,n,r,i,i,s,u,l)}function ri(t,e,n,r,i){return ii(-1,t,e,0,n,r,i)}function ii(t,e,n,r,i,s,o,a,u){const{matchedQueries:l,references:c,matchedQueryIds:h}=hr(n);u||(u=[]),a||(a=[]),s=gt(s);const d=dr(o,ft(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Cr(a),outputs:u,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function si(t,e){return li(t,e)}function oi(t,e){let n=t;for(;n.parent&&!ur(n);)n=n.parent;return ci(n.parent,sr(n),!0,e.provider.value,e.provider.deps)}function ai(t,e){const n=ci(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],s=n[i.propName];if(!Je(s))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=s.subscribe(ui(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function ui(t,e,n){return r=>rr(t,e,n,r)}function li(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return ci(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const s=i.length;switch(s){case 0:return r();case 1:return r(di(t,e,n,i[0]));case 2:return r(di(t,e,n,i[0]),di(t,e,n,i[1]));case 3:return r(di(t,e,n,i[0]),di(t,e,n,i[1]),di(t,e,n,i[2]));default:const o=[];for(let r=0;r<s;r++)o.push(di(t,e,n,i[r]));return r(...o)}}(t,e.parent,n,r.value,r.deps);case 2048:return di(t,e.parent,n,r.deps[0]);case 256:return r.value}}function ci(t,e,n,r,i){const s=i.length;switch(s){case 0:return new r;case 1:return new r(di(t,e,n,i[0]));case 2:return new r(di(t,e,n,i[0]),di(t,e,n,i[1]));case 3:return new r(di(t,e,n,i[0]),di(t,e,n,i[1]),di(t,e,n,i[2]));default:const o=[];for(let r=0;r<s;r++)o.push(di(t,e,n,i[r]));return new r(...o)}}const hi={};function di(t,e,n,r,i=Re.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const s=t;2&r.flags&&(i=null);const o=r.tokenKey;o===Xr&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let a=t;for(;a;){if(e)switch(o){case Kr:return fi(a,e,n).renderer;case Yr:return new un(Bn(a,e.nodeIndex).renderElement);case Jr:return Bn(a,e.nodeIndex).viewContainer;case Zr:if(e.element.template)return Bn(a,e.nodeIndex).template;break;case Xr:return jr(fi(a,e,n));case ti:case ei:return Gr(a,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[o];if(t){let e=zn(a,t.nodeIndex);return e||(e={instance:li(a,t)},a.nodes[t.nodeIndex]=e),e.instance}}n=ur(a),e=sr(a),a=a.parent,4&r.flags&&(a=null)}const u=s.root.injector.get(r.token,hi);return u!==hi||i===hi?u:s.root.ngModule.injector.get(r.token,i)}function fi(t,e,n){let r;if(n)r=Bn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!ur(r);)r=r.parent;return r}function pi(t,e,n,r,i,s){if(32768&n.flags){const e=Bn(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){s=s||{};const e=We.unwrap(t.oldValues[n.bindingIndex+r]);s[n.bindings[r].nonMinifiedName]=new Ze(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,s}function mi(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const s=n[i];let o=s.parent;for(!o&&s.flags&e&&yi(t,i,s.flags&e,r++),0==(s.childFlags&e)&&(i+=s.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&e&&(r=gi(t,o,e,r)),o=o.parent}}function gi(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&yi(t,i,e.flags&n,r++),i+=e.childCount}return r}function yi(t,e,n,r){const i=zn(t,e);if(!i)return;const s=i.instance;s&&(Hn.setCurrentNode(t,e),1048576&n&&jn(t,512,r)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&jn(t,768,r)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}const vi=new Et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ut}),bi=void 0;var _i=["en",[["a","p"],["AM","PM"],bi],[["AM","PM"],bi,bi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bi,"{1} 'at' {0}",bi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let wi={};function Ei(t){return t in wi||(wi[t]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[t]),wi[t]}const Ci=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();class Si extends T{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,s);return t instanceof h&&t.add(o),o}}function Ti(){return this._results[Ge()]()}class Ii{constructor(){this.dirty=!0,this._results=[],this.changes=new Si,this.length=0;const t=Ge(),e=Ii.prototype;e[t]||(e[t]=Ti)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const xi=new Et("Application Initializer");class Ai{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ye(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const ki=new Et("AppId");function Ni(){return`${Oi()}${Oi()}${Oi()}`}function Oi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Di=new Et("Platform Initializer"),Ri=new Et("Platform ID"),Pi=new Et("appBootstrapListener");class Mi{log(t){console.log(t)}warn(t){console.warn(t)}}const Li=new Et("LocaleId"),Vi=new Et("DefaultCurrencyCode");function Fi(){throw new Error("Runtime compiler is not loaded")}const Ui=Fi,ji=Fi,qi=Fi,Bi=Fi;class zi{constructor(){this.compileModuleSync=Ui,this.compileModuleAsync=ji,this.compileModuleAndAllComponentsSync=qi,this.compileModuleAndAllComponentsAsync=Bi}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class Gi{}const $i=(()=>Promise.resolve(0))();function Hi(t){"undefined"==typeof Zone?$i.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Wi{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=wt.requestAnimationFrame,e=wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(wt,()=>{t.lastRequestAnimationFrameId=-1,Ji(t),Yi(t)}),Ji(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,s,o,a)=>{try{return Zi(t),n.invokeTask(i,s,o,a)}finally{e&&"eventTask"===s.type&&e(),Xi(t)}},onInvoke:(e,n,r,i,s,o,a)=>{try{return Zi(t),e.invoke(r,i,s,o,a)}finally{Xi(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ji(t),Yi(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Wi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Ki,Qi,Qi);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Qi(){}const Ki={};function Yi(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ji(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Zi(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Xi(t){t._nesting--,Yi(t)}class ts{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}class es{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wi.assertNotInAngularZone(),Hi(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hi(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class ns{constructor(){this._applications=new Map,ss.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ss.findTestabilityInTree(this,t,e)}}class rs{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let is,ss=new rs;const os=new Et("AllowMultipleToken");class as{constructor(t,e){this.name=t,this.token=e}}function us(t,e,n=[]){const r=`Platform: ${e}`,i=new Et(r);return(e=[])=>{let s=ls();if(!s||s.injector.get(os,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Oe,useValue:"platform"});!function(t){if(is&&!is.destroyed&&!is.injector.get(os,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");is=t.get(cs);const e=t.get(Di,null);e&&e.forEach(t=>t())}(Re.create({providers:t,name:r}))}return function(t){const e=ls();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ls(){return is&&!is.destroyed?is:null}class cs{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ts:("zone.js"===t?void 0:t)||new Wi({enableLongStackTrace:ee(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Wi,useValue:n}];return n.run(()=>{const e=Re.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(zt,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>fs(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const r=n();return Ye(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Ai);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=hs({},e);return function(t,e,n){return t.get(Gi).createCompiler([e]).compileModuleAsync(n)}(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ds);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${ft(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function hs(t,e){return Array.isArray(e)?e.reduce(hs,t):Object.assign(Object.assign({},t),e)}class ds{constructor(t,e,n,r,i,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ee(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new _(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Wi.assertNotInAngularZone(),Hi(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Wi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=W(o,a.pipe(t=>{return Q()((e=tt,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Z);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Xe?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n instanceof on?void 0:this._injector.get(Rt),i=n.create(Re.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(es,null);return s&&i.injector.get(ns).registerApplication(i.location.nativeElement,s),this._loadComponent(i),ee()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;fs(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Pi,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),fs(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}function fs(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ps{}class ms{}const gs={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class ys{constructor(t,e){this._compiler=t,this._config=e||gs}load(t){return this._compiler instanceof zi?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>vs(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>vs(t,e,r))}}function vs(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class bs{constructor(t,e){this.name=t,this.callback=e}}class _s{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof ws&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class ws extends _s{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof ws&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof ws&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof ws&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof ws)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Es=new Map;function Cs(t){return Es.get(t)||null}const Ss=Cs;function Ts(t){Es.set(t.nativeNode,t)}const Is=us(null,"core",[{provide:Ri,useValue:"unknown"},{provide:cs,deps:[Re]},{provide:ns,deps:[]},{provide:Mi,deps:[]}]);function xs(){return Nn}function As(){return On}function ks(t){return t||"en-US"}function Ns(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class Os{constructor(t){}}function Ds(t,e,n,r,i,s){t|=1;const{matchedQueries:o,references:a,matchedQueryIds:u}=hr(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?mr(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Wn},provider:null,text:null,query:null,ngContent:null}}function Rs(t,e,n,r,i,s,o=[],a,u,l,c,h){l||(l=Wn);const{matchedQueries:d,references:f,matchedQueryIds:p}=hr(n);let m=null,g=null;s&&([m,g]=Er(s)),a=a||[];const y=[];for(let _=0;_<a.length;_++){const[t,e,n]=a[_],[r,i]=Er(e);let s=void 0,o=void 0;switch(15&t){case 4:o=n;break;case 1:case 8:s=n}y[_]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:s,suffix:o}}u=u||[];const v=[];for(let _=0;_<u.length;_++){const[t,e]=u[_];v[_]={type:0,target:t,eventName:e,propName:null}}const b=(o=o||[]).map(([t,e])=>{const[n,r]=Er(t);return[n,r,e]});return h=function(t){if(t&&"$$undefined"===t.id){const e=null!=t.encapsulation&&t.encapsulation!==Vt.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Jn++}`:"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:f,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:Cr(y),outputs:v,element:{ns:m,name:g,attrs:b,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Wn},provider:null,text:null,query:null,ngContent:null}}function Ps(t,e,n){const r=n.element,i=t.root.selectorOrNode,s=t.renderer;let o;if(t.parent||!i){o=r.name?s.createElement(r.name,r.ns):s.createComment("");const i=fr(t,e,n);i&&s.appendChild(i,o)}else o=s.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===Vt.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[t,e,n]=r.attrs[a];s.setAttribute(o,e,n,t)}return o}function Ms(t,e,n,r){for(let i=0;i<n.outputs.length;i++){const s=n.outputs[i],o=Ls(t,n.nodeIndex,ar(s.target,s.eventName));let a=s.target,u=t;"component"===s.target&&(a=null,u=e);const l=u.renderer.listen(a||r,s.eventName,o);t.disposables[n.outputIndex+i]=l}}function Ls(t,e,n){return r=>rr(t,e,n,r)}function Vs(t,e,n,r){if(!Xn(t,e,n,r))return!1;const i=e.bindings[n],s=Bn(t,e.nodeIndex),o=s.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,s){const o=e.securityContext;let a=o?t.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;const u=t.renderer;null!=s?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,o,i.ns,a,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,o,a,r);break;case 4:!function(t,e,n,r,i){let s=t.root.sanitizer.sanitize(Ce.STYLE,i);if(null!=s){s=s.toString();const t=e.suffix;null!=t&&(s+=t)}else s=null;const o=t.renderer;null!=s?o.setStyle(n,r,s):o.removeStyle(n,r)}(t,i,o,a,r);break;case 8:!function(t,e,n,r,i){const s=e.securityContext;let o=s?t.root.sanitizer.sanitize(s,i):i;t.renderer.setProperty(n,r,o)}(33554432&e.flags&&32&i.flags?s.componentView:t,i,o,a,r)}return!0}function Fs(t,e,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:cr(e),bindings:r},ngContent:null}}function Us(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&lr(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&$n(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&$n(t,n).setDirty(),n+=e.childCount}}function js(t,e){const n=$n(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=qs(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=zn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=qs(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const s=e.query.bindings;let o=!1;for(let a=0;a<s.length;a++){const t=s[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,o=!0}r[t.propName]=e}o&&n.notifyOnChanges()}function qs(t,e,n,r,i){for(let s=e;s<=n;s++){const e=t.def.nodes[s],n=e.matchedQueries[r.id];if(null!=n&&i.push(Bs(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Bn(t,s);if((e.childMatchedQueries&r.filterId)===r.filterId&&(qs(t,s+1,s+e.childCount,r,i),s+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const s=t[e],o=ir(s);o&&o===n&&qs(s,0,s.def.nodes.length-1,r,i)}}const o=n.template._projectedViews;if(o)for(let t=0;t<o.length;t++){const e=o[t];qs(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(s+=e.childCount)}return i}function Bs(t,e,n){if(null!=n)switch(n){case 1:return Bn(t,e.nodeIndex).renderElement;case 0:return new un(Bn(t,e.nodeIndex).renderElement);case 2:return Bn(t,e.nodeIndex).template;case 3:return Bn(t,e.nodeIndex).viewContainer;case 4:return zn(t,e.nodeIndex).instance}}function zs(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Gs(t,e,n){const r=fr(t,e,n);r&&vr(t,n.ngContent.index,1,r,null,void 0)}function $s(t,e,n){const r=[];for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Hs(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const s=fr(t,e,n);return s&&i.appendChild(s,r),{renderText:r}}function Ws(t,e){return(null!=t?t.toString():"")+e.suffix}function Qs(t,e,n,r){let i=0,s=0,o=0,a=0,u=0,l=null,c=null,h=!1,d=!1,f=null;for(let p=0;p<e.length;p++){const t=e[p];if(t.nodeIndex=p,t.parent=l,t.bindingIndex=i,t.outputIndex=s,t.renderParent=c,o|=t.flags,u|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=l?l.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(u|=t.element.template.nodeMatchedQueries)}if(Ys(l,t,e.length),i+=t.bindings.length,s+=t.outputs.length,!c&&3&t.flags&&(f=t),20224&t.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?l.element.publicProviders[Kn(t.provider.token)]=t:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Kn(t.provider.token)]=t),e&&(l.element.componentProvider=t)}if(l?(l.childFlags|=t.flags,l.directChildFlags|=t.flags,l.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(l.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)l=t,Ks(t)||(c=t);else for(;l&&p===l.nodeIndex+l.childCount;){const t=l.parent;t&&(t.childFlags|=l.childFlags,t.childMatchedQueries|=l.childMatchedQueries),l=t,c=l&&Ks(l)?l.renderParent:l}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Wn,updateRenderer:r||Wn,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:s,lastRenderRootNode:f}}function Ks(t){return 0!=(1&t.flags)&&null===t.element.name}function Ys(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function Js(t,e,n,r){const i=to(t.root,t.renderer,t,e,n);return eo(i,t.component,r),no(i),i}function Zs(t,e,n){const r=to(t,t.renderer,null,null,e);return eo(r,n,n),no(r),r}function Xs(t,e,n,r){const i=e.element.componentRendererType;let s;return s=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,to(t.root,s,t,e.element.componentProvider,n)}function to(t,e,n,r,i){const s=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:s,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function eo(t,e,n){t.component=e,t.context=n}function no(t){let e;ur(t)&&(e=Bn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const s=n.nodes[i];let o;switch(Hn.setCurrentNode(t,i),201347067&s.flags){case 1:const n=Ps(t,e,s);let a=void 0;if(33554432&s.flags){const e=mr(s.element.componentView);a=Hn.createComponentView(t,s,e,n)}Ms(t,a,s,n),o={renderElement:n,componentView:a,viewContainer:null,template:s.element.template?Br(t,s):void 0},16777216&s.flags&&(o.viewContainer=Fr(t,s,o));break;case 2:o=Hs(t,e,s);break;case 512:case 1024:case 2048:case 256:o=r[i],o||4096&s.flags||(o={instance:si(t,s)});break;case 16:o={instance:oi(t,s)};break;case 16384:o=r[i],o||(o={instance:ai(t,s)}),32768&s.flags&&eo(Bn(t,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Ii;break;case 8:Gs(t,e,s),o=void 0}r[i]=o}ho(t,co.CreateViewNodes),go(t,201326592,268435456,0)}function ro(t){oo(t),Hn.updateDirectives(t,1),fo(t,co.CheckNoChanges),Hn.updateRenderer(t,1),ho(t,co.CheckNoChanges),t.state&=-97}function io(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Un(t,0,256),oo(t),Hn.updateDirectives(t,0),fo(t,co.CheckAndUpdate),go(t,67108864,536870912,0);let e=Un(t,256,512);mi(t,2097152|(e?1048576:0)),Hn.updateRenderer(t,0),ho(t,co.CheckAndUpdate),go(t,134217728,536870912,0),e=Un(t,512,768),mi(t,8388608|(e?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Un(t,768,1024)}function so(t,e,n,r,i,s,o,a,u,l,c,h,d){return 0===n?function(t,e,n,r,i,s,o,a,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,s,o,a,u,l,c,h){const d=e.bindings.length;let f=!1;return d>0&&Vs(t,e,0,n)&&(f=!0),d>1&&Vs(t,e,1,r)&&(f=!0),d>2&&Vs(t,e,2,i)&&(f=!0),d>3&&Vs(t,e,3,s)&&(f=!0),d>4&&Vs(t,e,4,o)&&(f=!0),d>5&&Vs(t,e,5,a)&&(f=!0),d>6&&Vs(t,e,6,u)&&(f=!0),d>7&&Vs(t,e,7,l)&&(f=!0),d>8&&Vs(t,e,8,c)&&(f=!0),d>9&&Vs(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,s,o,a,u,l,c,h);case 2:return function(t,e,n,r,i,s,o,a,u,l,c,h){let d=!1;const f=e.bindings,p=f.length;if(p>0&&Xn(t,e,0,n)&&(d=!0),p>1&&Xn(t,e,1,r)&&(d=!0),p>2&&Xn(t,e,2,i)&&(d=!0),p>3&&Xn(t,e,3,s)&&(d=!0),p>4&&Xn(t,e,4,o)&&(d=!0),p>5&&Xn(t,e,5,a)&&(d=!0),p>6&&Xn(t,e,6,u)&&(d=!0),p>7&&Xn(t,e,7,l)&&(d=!0),p>8&&Xn(t,e,8,c)&&(d=!0),p>9&&Xn(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;p>0&&(d+=Ws(n,f[0])),p>1&&(d+=Ws(r,f[1])),p>2&&(d+=Ws(i,f[2])),p>3&&(d+=Ws(s,f[3])),p>4&&(d+=Ws(o,f[4])),p>5&&(d+=Ws(a,f[5])),p>6&&(d+=Ws(u,f[6])),p>7&&(d+=Ws(l,f[7])),p>8&&(d+=Ws(c,f[8])),p>9&&(d+=Ws(h,f[9]));const m=qn(t,e.nodeIndex).renderText;t.renderer.setValue(m,d)}return d}(t,e,n,r,i,s,o,a,u,l,c,h);case 16384:return function(t,e,n,r,i,s,o,a,u,l,c,h){const d=zn(t,e.nodeIndex),f=d.instance;let p=!1,m=void 0;const g=e.bindings.length;return g>0&&Zn(t,e,0,n)&&(p=!0,m=pi(t,d,e,0,n,m)),g>1&&Zn(t,e,1,r)&&(p=!0,m=pi(t,d,e,1,r,m)),g>2&&Zn(t,e,2,i)&&(p=!0,m=pi(t,d,e,2,i,m)),g>3&&Zn(t,e,3,s)&&(p=!0,m=pi(t,d,e,3,s,m)),g>4&&Zn(t,e,4,o)&&(p=!0,m=pi(t,d,e,4,o,m)),g>5&&Zn(t,e,5,a)&&(p=!0,m=pi(t,d,e,5,a,m)),g>6&&Zn(t,e,6,u)&&(p=!0,m=pi(t,d,e,6,u,m)),g>7&&Zn(t,e,7,l)&&(p=!0,m=pi(t,d,e,7,l,m)),g>8&&Zn(t,e,8,c)&&(p=!0,m=pi(t,d,e,8,c,m)),g>9&&Zn(t,e,9,h)&&(p=!0,m=pi(t,d,e,9,h,m)),m&&f.ngOnChanges(m),65536&e.flags&&jn(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),p}(t,e,n,r,i,s,o,a,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,s,o,a,u,l,c,h){const d=e.bindings;let f=!1;const p=d.length;if(p>0&&Xn(t,e,0,n)&&(f=!0),p>1&&Xn(t,e,1,r)&&(f=!0),p>2&&Xn(t,e,2,i)&&(f=!0),p>3&&Xn(t,e,3,s)&&(f=!0),p>4&&Xn(t,e,4,o)&&(f=!0),p>5&&Xn(t,e,5,a)&&(f=!0),p>6&&Xn(t,e,6,u)&&(f=!0),p>7&&Xn(t,e,7,l)&&(f=!0),p>8&&Xn(t,e,8,c)&&(f=!0),p>9&&Xn(t,e,9,h)&&(f=!0),f){const f=Gn(t,e.nodeIndex);let m;switch(201347067&e.flags){case 32:m=[],p>0&&m.push(n),p>1&&m.push(r),p>2&&m.push(i),p>3&&m.push(s),p>4&&m.push(o),p>5&&m.push(a),p>6&&m.push(u),p>7&&m.push(l),p>8&&m.push(c),p>9&&m.push(h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=s),p>4&&(m[d[4].name]=o),p>5&&(m[d[5].name]=a),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=l),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const t=n;switch(p){case 1:m=t.transform(n);break;case 2:m=t.transform(r);break;case 3:m=t.transform(r,i);break;case 4:m=t.transform(r,i,s);break;case 5:m=t.transform(r,i,s,o);break;case 6:m=t.transform(r,i,s,o,a);break;case 7:m=t.transform(r,i,s,o,a,u);break;case 8:m=t.transform(r,i,s,o,a,u,l);break;case 9:m=t.transform(r,i,s,o,a,u,l,c);break;case 10:m=t.transform(r,i,s,o,a,u,l,c,h)}}f.value=m}return f}(t,e,n,r,i,s,o,a,u,l,c,h);default:throw"unreachable"}}(t,e,r,i,s,o,a,u,l,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)Vs(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let s=0;s<n.length;s++)Xn(t,e,s,n[s])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=Ws(n[t],r[t]);i=e.text.prefix+i;const s=qn(t,e.nodeIndex).renderText;t.renderer.setValue(s,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=zn(t,e.nodeIndex),i=r.instance;let s=!1,o=void 0;for(let a=0;a<n.length;a++)Zn(t,e,a,n[a])&&(s=!0,o=pi(t,r,e,a,n[a],o));return o&&i.ngOnChanges(o),65536&e.flags&&jn(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),s}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let s=0;s<n.length;s++)Xn(t,e,s,n[s])&&(i=!0);if(i){const i=Gn(t,e.nodeIndex);let s;switch(201347067&e.flags){case 32:s=n;break;case 64:s={};for(let i=0;i<n.length;i++)s[r[i].name]=n[i];break;case 128:const t=n[0],e=n.slice(1);s=t.transform(...e)}i.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function oo(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=Bn(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,nr(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ao(t,e,n,r,i,s,o,a,u,l,c,h,d){return 0===n?function(t,e,n,r,i,s,o,a,u,l,c,h){const d=e.bindings.length;d>0&&tr(t,e,0,n),d>1&&tr(t,e,1,r),d>2&&tr(t,e,2,i),d>3&&tr(t,e,3,s),d>4&&tr(t,e,4,o),d>5&&tr(t,e,5,a),d>6&&tr(t,e,6,u),d>7&&tr(t,e,7,l),d>8&&tr(t,e,8,c),d>9&&tr(t,e,9,h)}(t,e,r,i,s,o,a,u,l,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)tr(t,e,r,n[r])}(t,e,r),!1}function uo(t,e){if($n(t,e.nodeIndex).dirty)throw Ln(Hn.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function lo(t){if(!(128&t.state)){if(fo(t,co.Destroy),ho(t,co.Destroy),mi(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=ir(t);if(e){const n=e.template._projectedViews;n&&(Lt(n,n.indexOf(t)),Hn.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Bn(t,n).renderElement):2&e.flags?t.renderer.destroyNode(qn(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&$n(t,n).destroy()}}(t),ur(t)&&t.renderer.destroy(),t.state|=128}}const co=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function ho(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?po(Bn(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function fo(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Bn(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)po(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function po(t,e){const n=t.state;switch(e){case co.CheckNoChanges:0==(128&n)&&(12==(12&n)?ro(t):64&n&&mo(t,co.CheckNoChangesProjectedViews));break;case co.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ro(t):64&n&&mo(t,e));break;case co.CheckAndUpdate:0==(128&n)&&(12==(12&n)?io(t):64&n&&mo(t,co.CheckAndUpdateProjectedViews));break;case co.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?io(t):64&n&&mo(t,e));break;case co.Destroy:lo(t);break;case co.CreateViewNodes:no(t)}}function mo(t,e){fo(t,e),ho(t,e)}function go(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let s=0;s<i;s++){const i=t.def.nodes[s];if(i.flags&e&&i.flags&n)switch(Hn.setCurrentNode(t,i.nodeIndex),r){case 0:js(t,i);break;case 1:uo(t,i)}i.childFlags&e&&i.childFlags&n||(s+=i.childCount)}}let yo=!1;function vo(t,e,n,r,i,s){const o=i.injector.get(cn);return Zs(_o(t,i,o,e,n),r,s)}function bo(t,e,n,r,i,s){const o=i.injector.get(cn),a=_o(t,i,new Zo(o),e,n),u=No(r);return Yo(Lo.create,Zs,null,[a,u,s])}function _o(t,e,n,r,i){const s=e.injector.get(pn),o=e.injector.get(zt),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function wo(t,e,n,r){const i=No(n);return Yo(Lo.create,Js,null,[t,e,i,r])}function Eo(t,e,n,r){return n=Io.get(e.element.componentProvider.provider.token)||No(n),Yo(Lo.create,Xs,null,[t,e,n,r])}function Co(t,e,n,r){return Wr(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===So.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=So.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{To.forEach((r,i)=>{lt(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=So.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=dr(i.deps),r.value=i.value)}if(To.size>0){let e=new Set(t.modules);To.forEach((r,i)=>{if(e.has(lt(i).providedIn)){let e={token:i,flags:r.flags|(n?4096:0),deps:dr(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[Kn(i)]=e}})}}(t=t.factory(()=>Wn)),t):t}(r))}const So=new Map,To=new Map,Io=new Map;function xo(t){let e;So.set(t.token,t),"function"==typeof t.token&&(e=lt(t.token))&&"function"==typeof e.providedIn&&To.set(t.token,t)}function Ao(t,e){const n=mr(e.viewDefFactory),r=mr(n.nodes[0].element.componentView);Io.set(t,r)}function ko(){So.clear(),To.clear(),Io.clear()}function No(t){if(0===So.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&So.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Wn);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=So.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=dr(n.deps),t.value=n.value)}}}}function Oo(t,e,n,r,i,s,o,a,u,l,c,h,d){const f=t.def.nodes[e];return so(t,f,n,r,i,s,o,a,u,l,c,h,d),224&f.flags?Gn(t,e).value:void 0}function Do(t,e,n,r,i,s,o,a,u,l,c,h,d){const f=t.def.nodes[e];return ao(t,f,n,r,i,s,o,a,u,l,c,h,d),224&f.flags?Gn(t,e).value:void 0}function Ro(t){return Yo(Lo.detectChanges,io,null,[t])}function Po(t){return Yo(Lo.checkNoChanges,ro,null,[t])}function Mo(t){return Yo(Lo.destroy,lo,null,[t])}const Lo=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let Vo,Fo,Uo;function jo(t,e){Fo=t,Uo=e}function qo(t,e,n,r){return jo(t,e),Yo(Lo.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Bo(t,e){if(128&t.state)throw Fn(Lo[Vo]);return jo(t,Ho(t,0)),t.def.updateDirectives((function(t,n,r,...i){const s=t.def.nodes[n];return 0===e?Go(t,s,r,i):$o(t,s,r,i),16384&s.flags&&jo(t,Ho(t,n)),224&s.flags?Gn(t,s.nodeIndex).value:void 0}),t)}function zo(t,e){if(128&t.state)throw Fn(Lo[Vo]);return jo(t,Wo(t,0)),t.def.updateRenderer((function(t,n,r,...i){const s=t.def.nodes[n];return 0===e?Go(t,s,r,i):$o(t,s,r,i),3&s.flags&&jo(t,Wo(t,n)),224&s.flags?Gn(t,s.nodeIndex).value:void 0}),t)}function Go(t,e,n,r){if(so(t,e,n,...r)){const i=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],s=i[t];8&r.flags&&(n[Ie(r.nonMinifiedName)]=Ae(s))}const r=e.parent,s=Bn(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(s,e,r):t.renderer.removeAttribute(s,e)}else t.renderer.setValue(s,`bindings=${JSON.stringify(n,null,2)}`)}}}function $o(t,e,n,r){ao(t,e,n,...r)}function Ho(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function Wo(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class Qo{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=sr(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Bn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Gr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){Ko(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&Ko(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!ur(t);)t=t.parent;return t.parent?Bn(t.parent,sr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?or(this.view,this.nodeDef):or(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let s=-1;n.factory(()=>(s++,s===i?t.error.bind(t,...e):Wn)),s<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function Ko(t,e,n){for(let r in e.references)n[r]=Bs(t,e,e.references[r])}function Yo(t,e,n,r){const i=Vo,s=Fo,o=Uo;try{Vo=t;const a=e.apply(n,r);return Fo=s,Uo=o,Vo=i,a}catch(a){if(jt(a)||!Fo)throw a;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Vn(t,e),t}(a,Jo())}}function Jo(){return Fo?new Qo(Fo,Uo):null}class Zo{constructor(t){this.delegate=t}createRenderer(t,e){return new Xo(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Xo{constructor(t){this.delegate=t,this.debugContextFactory=Jo,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Ss(t);!function(t){Es.delete(t.nativeNode)}(e),e instanceof _s&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new ws(n,null,r);e.name=t,Ts(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Ts(new _s(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Ts(new _s(e,null,n)),e}appendChild(t,e){const n=Ss(t),r=Ss(e);n&&r&&n instanceof ws&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Ss(t),i=Ss(e),s=Ss(n);r&&i&&r instanceof ws&&r.insertBefore(s,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Ss(t),r=Ss(e);n&&r&&n instanceof ws&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=Jo();return r&&Ts(new ws(n,null,r)),n}setAttribute(t,e,n,r){const i=Ss(t);i&&i instanceof ws&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Ss(t);r&&r instanceof ws&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Ss(t);n&&n instanceof ws&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Ss(t);n&&n instanceof ws&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=Ss(t);i&&i instanceof ws&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Ss(t);r&&r instanceof ws&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Ss(t);r&&r instanceof ws&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Ss(t);r&&r.listeners.push(new bs(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function ta(t,e,n){return new ea(t,e,n)}class ea extends Pt{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(yo)return;yo=!0;const t=ee()?{setCurrentNode:jo,createRootView:bo,createEmbeddedView:wo,createComponentView:Eo,createNgModuleRef:Co,overrideProvider:xo,overrideComponentView:Ao,clearOverrides:ko,checkAndUpdateView:Ro,checkNoChangesView:Po,destroyView:Mo,createDebugContext:(t,e)=>new Qo(t,e),handleEvent:qo,updateDirectives:Bo,updateRenderer:zo}:{setCurrentNode:()=>{},createRootView:vo,createEmbeddedView:Js,createComponentView:Xs,createNgModuleRef:Wr,overrideProvider:Wn,overrideComponentView:Wn,clearOverrides:Wn,checkAndUpdateView:io,checkNoChangesView:ro,destroyView:lo,createDebugContext:(t,e)=>new Qo(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?Oo:Do,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?Oo:Do,t)};Hn.setCurrentNode=t.setCurrentNode,Hn.createRootView=t.createRootView,Hn.createEmbeddedView=t.createEmbeddedView,Hn.createComponentView=t.createComponentView,Hn.createNgModuleRef=t.createNgModuleRef,Hn.overrideProvider=t.overrideProvider,Hn.overrideComponentView=t.overrideComponentView,Hn.clearOverrides=t.clearOverrides,Hn.checkAndUpdateView=t.checkAndUpdateView,Hn.checkNoChangesView=t.checkNoChangesView,Hn.destroyView=t.destroyView,Hn.resolveDep=di,Hn.createDebugContext=t.createDebugContext,Hn.handleEvent=t.handleEvent,Hn.updateDirectives=t.updateDirectives,Hn.updateRenderer=t.updateRenderer,Hn.dirtyParentQueries=Us}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,scope:t.scope,providers:e,modules:n,providersByKey:r}}(mr(this._ngModuleDefFactory));return Hn.createNgModuleRef(this.moduleType,t||Re.NULL,this._bootstrapComponents,e)}}class na{}class ra{constructor(){this.title="uno"}}let ia=null;function sa(){return ia}const oa=new Et("DocumentToken");let aa=(()=>{class t{}return t.\u0275prov=ut({factory:ua,token:t,providedIn:"platform"}),t})();function ua(){return kt(ca)}const la=new Et("Location Initialized");let ca=(()=>{class t extends aa{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=sa().getLocation(),this._history=sa().getHistory()}getBaseHrefFromDOM(){return sa().getBaseHref(this._doc)}onPopState(t){sa().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){sa().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){ha()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){ha()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275prov=ut({factory:da,token:t,providedIn:"platform"}),t})();function ha(){return!!window.history.pushState}function da(){return new ca(kt(oa))}function fa(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function pa(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ma(t){return t&&"?"!==t[0]?"?"+t:t}let ga=(()=>{class t{}return t.\u0275prov=ut({factory:ya,token:t,providedIn:"root"}),t})();function ya(t){const e=kt(oa).location;return new ba(kt(aa),e&&e.origin||"")}const va=new Et("appBaseHref");class ba extends ga{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fa(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+ma(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+ma(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+ma(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class _a extends ga{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=fa(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+ma(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+ma(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}let wa=(()=>{class t{constructor(t,e){this._subject=new Si,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=pa(Ca(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+ma(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Ca(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ma(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ma(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.normalizeQueryParams=ma,t.joinWithSlash=fa,t.stripTrailingSlash=pa,t.\u0275prov=ut({factory:Ea,token:t,providedIn:"root"}),t})();function Ea(){return new wa(kt(ga),kt(aa))}function Ca(t){return t.replace(/\/index.html$/,"")}const Sa=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}();class Ta{}class Ia extends Ta{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ei(e);if(n)return n;const r=e.split("-")[0];if(n=Ei(r),n)return n;if("en"===r)return _i;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Ci.PluralCase]}(e||this.locale)(t)){case Sa.Zero:return"zero";case Sa.One:return"one";case Sa.Two:return"two";case Sa.Few:return"few";case Sa.Many:return"many";default:return"other"}}}class xa{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class Aa{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){ee()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new xa(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ka(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new ka(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class ka{constructor(t,e){this.record=t,this.view=e}}class Na{constructor(t,e){this._viewContainer=t,this._context=new Oa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Da("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Da("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}class Oa{constructor(){this.$implicit=null,this.ngIf=null}}function Da(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}class Ra{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}class Pa{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}class Ma{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Ra(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}class La{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Va{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const Fa=new Va,Ua=new La;class ja{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):$e(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,We.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(t){if(Ye(t))return Fa;if(Je(t))return Ua;throw Error(`InvalidPipeArgument: '${t}' for pipe '${ft(ja)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}class qa{}function Ba(t){return"server"===t}let za=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new Ga(kt(oa),window,kt(zt))}),t})();class Ga{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}function $a(...t){let e=t[t.length-1];return x(e)?(t.pop(),j(t,e)):H(t)}class Ha extends T{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}next(t){super.next(this._value=t)}}const Wa=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Qa={};class Ka{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ya(t,this.resultSelector))}}class Ya extends L{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Qa),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(M(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const s=this.values,o=this.toRespond?s[n]===Qa?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ja=new _(t=>t.complete());function Za(t){return t?function(t){return new _(e=>t.schedule(()=>e.complete()))}(t):Ja}function Xa(t){return new _(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?q(n):Za()).subscribe(e)})}function tu(){return $(1)}function eu(t,e){return function(n){return n.lift(new nu(t,e))}}class nu{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ru(t,this.predicate,this.thisArg))}}class ru extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const iu=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function su(t){return function(e){return 0===t?Za():e.lift(new ou(t))}}class ou{constructor(t){if(this.total=t,this.total<0)throw new iu}call(t,e){return e.subscribe(new au(t,this.total))}}class au extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function uu(t=hu){return e=>e.lift(new lu(t))}class lu{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new cu(t,this.errorFactory))}}class cu extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function hu(){return new Wa}function du(t=null){return e=>e.lift(new fu(t))}class fu{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new pu(t,this.defaultValue))}}class pu extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function mu(t,e){const n=arguments.length>=2;return r=>r.pipe(t?eu((e,n)=>t(e,n,r)):y,su(1),n?du(e):uu(()=>new Wa))}function gu(t){return function(e){const n=new yu(t),r=e.lift(n);return n.caught=r}}class yu{constructor(t){this.selector=t}call(t,e){return e.subscribe(new vu(t,this.selector,this.caught))}}class vu extends L{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new A(this,void 0,void 0);this.add(r);const i=M(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function bu(t){return e=>0===t?Za():e.lift(new _u(t))}class _u{constructor(t){if(this.total=t,this.total<0)throw new iu}call(t,e){return e.subscribe(new wu(t,this.total))}}class wu extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Eu(t,e){const n=arguments.length>=2;return r=>r.pipe(t?eu((e,n)=>t(e,n,r)):y,bu(1),n?du(e):uu(()=>new Wa))}class Cu{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Su(t,this.predicate,this.thisArg,this.source))}}class Su extends p{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Tu(t,e){return"function"==typeof e?n=>n.pipe(Tu((n,r)=>q(t(n,r)).pipe(V((t,i)=>e(n,t,r,i))))):e=>e.lift(new Iu(t))}class Iu{constructor(t){this.project=t}call(t,e){return e.subscribe(new xu(t,this.project))}}class xu extends L{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new A(this,e,n),s=this.destination;s.add(i),this.innerSubscription=M(this,t,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function Au(...t){return tu()($a(...t))}function ku(...t){const e=t[t.length-1];return x(e)?(t.pop(),n=>Au(t,n,e)):e=>Au(t,e)}function Nu(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ou(t,e,n))}}class Ou{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Du(t,this.accumulator,this.seed,this.hasSeed))}}class Du extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ru(t,e){return B(t,e,1)}function Pu(){}function Mu(t,e,n){return function(r){return r.lift(new Lu(t,e,n))}}class Lu{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Vu(t,this.nextOrObserver,this.error,this.complete))}}class Vu extends p{constructor(t,e,n,i){super(t),this._tapNext=Pu,this._tapError=Pu,this._tapComplete=Pu,this._tapError=n||Pu,this._tapComplete=i||Pu,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Pu,this._tapError=e.error||Pu,this._tapComplete=e.complete||Pu)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Fu{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Uu(t,this.callback))}}class Uu extends p{constructor(t,e){super(t),this.add(new h(e))}}class ju{constructor(t,e){this.id=t,this.url=e}}class qu extends ju{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends ju{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zu extends ju{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gu extends ju{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $u extends ju{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hu extends ju{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wu extends ju{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qu extends ju{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ku extends ju{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yu{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ju{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zu{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xu{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tl{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class el{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nl{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rl{}class il{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function sl(t){return new il(t)}function ol(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function al(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class ul{constructor(t,e){this.routes=t,this.module=e}}function ll(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];cl(r,hl(e,r))}}function cl(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&ll(t.children,e)}function hl(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function dl(t){const e=t.children&&t.children.map(dl),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=rl),n}function fl(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!pl(t[i],e[i]))return!1;return!0}function pl(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function ml(t){return Array.prototype.concat.apply([],t)}function gl(t){return t.length>0?t[t.length-1]:null}function yl(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function vl(t){return Je(t)?t:Ye(t)?q(Promise.resolve(t)):$a(t)}function bl(t,e,n){return n?function(t,e){return fl(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Cl(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pl(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Cl(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Cl(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Cl(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,s)}}(e,n,n.segments)}(t.root,e.root)}class _l{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sl(this.queryParams)),this._queryParamMap}toString(){return xl.serialize(this)}}class wl{constructor(t,e){this.segments=t,this.children=e,this.parent=null,yl(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Al(this)}}class El{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=sl(this.parameters)),this._parameterMap}toString(){return Pl(this)}}function Cl(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Sl(t,e){let n=[];return yl(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),yl(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class Tl{}class Il{parse(t){const e=new Ul(t);return new _l(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Al(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return yl(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Sl(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${Al(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Nl(e)}=${Nl(t)}`).join("&"):`${Nl(e)}=${Nl(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const xl=new Il;function Al(t){return t.segments.map(t=>Pl(t)).join("/")}function kl(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nl(t){return kl(t).replace(/%3B/gi,";")}function Ol(t){return kl(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dl(t){return decodeURIComponent(t)}function Rl(t){return Dl(t.replace(/\+/g,"%20"))}function Pl(t){return`${Ol(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ol(t)}=${Ol(e[t])}`).join("")}`;var e}const Ml=/^[^\/()?;=#]+/;function Ll(t){const e=t.match(Ml);return e?e[0]:""}const Vl=/^[^=?&#]+/,Fl=/^[^?&#]+/;class Ul{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wl([],{}):new wl([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new wl(t,e)),n}parseSegment(){const t=Ll(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new El(Dl(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ll(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ll(this.remaining);t&&(n=t,this.capture(n))}t[Dl(e)]=Dl(n)}parseQueryParam(t){const e=function(t){const e=t.match(Vl);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Fl);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Rl(e),i=Rl(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ll(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new wl([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class jl{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ql(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ql(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Bl(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Bl(t,this._root).map(t=>t.value)}}function ql(t,e){if(t===e.value)return e;for(const n of e.children){const e=ql(t,n);if(e)return e}return null}function Bl(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Bl(t,n);if(r.length)return r.unshift(e),r}return[]}class zl{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Gl(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class $l extends jl{constructor(t,e){super(t),this.snapshot=e,Jl(this,t)}toString(){return this.snapshot.toString()}}function Hl(t,e){const n=function(t,e){const n=new Kl([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Yl("",new zl(n,[]))}(t,e),r=new Ha([new El("",{})]),i=new Ha({}),s=new Ha({}),o=new Ha({}),a=new Ha(""),u=new Wl(r,i,o,a,s,"primary",e,n.root);return u.snapshot=n.root,new $l(new zl(u,[]),n)}class Wl{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(V(t=>sl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(V(t=>sl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ql(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Kl{constructor(t,e,n,r,i,s,o,a,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yl extends jl{constructor(t,e){super(e),this.url=t,Jl(this,e)}toString(){return Zl(this._root)}}function Jl(t,e){e.value._routerState=t,e.children.forEach(e=>Jl(t,e))}function Zl(t){const e=t.children.length>0?` { ${t.children.map(Zl).join(", ")} } `:"";return`${t.value}${e}`}function Xl(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fl(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),fl(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fl(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),fl(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function tc(t,e){var n,r;return fl(t.params,e.params)&&Cl(n=t.url,r=e.url)&&n.every((t,e)=>fl(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||tc(t.parent,e.parent))}function ec(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function nc(t,e,n,r,i){let s={};return r&&yl(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new _l(n.root===t?e:function t(e,n,r){const i={};return yl(e.children,(e,s)=>{i[s]=e===n?r:t(e,n,r)}),new wl(e.segments,i)}(n.root,t,e),s,i)}class rc{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ec(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==gl(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ic{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function sc(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function oc(t,e,n){if(t||(t=new wl([],{})),0===t.segments.length&&t.hasChildren())return ac(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=sc(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!hc(o,a,e))return s;r+=2}else{if(!hc(o,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new wl(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new wl(t.segments.slice(r.pathIndex),t.children),ac(e,0,i)}return r.match&&0===i.length?new wl(t.segments,{}):r.match&&!t.hasChildren()?uc(t,e,n):r.match?ac(t,0,i):uc(t,e,n)}function ac(t,e,n){if(0===n.length)return new wl(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return yl(r,(n,r)=>{null!==n&&(i[r]=oc(t.children[r],e,n))}),yl(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new wl(t.segments,i)}}function uc(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=lc(n[i].outlets);return new wl(r,t)}if(0===i&&ec(n[0])){r.push(new El(t.segments[e].path,n[0])),i++;continue}const s=sc(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&ec(o)?(r.push(new El(s,cc(o))),i+=2):(r.push(new El(s,{})),i++)}return new wl(r,{})}function lc(t){const e={};return yl(t,(t,n)=>{null!==t&&(e[n]=uc(new wl([],{}),0,t))}),e}function cc(t){const e={};return yl(t,(t,n)=>e[n]=`${t}`),e}function hc(t,e,n){return t==n.path&&fl(e,n.parameters)}class dc{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Xl(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Gl(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),yl(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Gl(t),i=t.value.component?n.children:e;yl(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Gl(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new el(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Xu(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Xl(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),fc(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function fc(t){Xl(t.value),t.children.forEach(fc)}function pc(t){return"function"==typeof t}function mc(t){return t instanceof _l}class gc{constructor(t){this.segmentGroup=t||null}}class yc{constructor(t){this.urlTree=t}}function vc(t){return new _(e=>e.error(new gc(t)))}function bc(t){return new _(e=>e.error(new yc(t)))}function _c(t){return new _(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class wc{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Rt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(V(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(gu(t=>{if(t instanceof yc)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof gc)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(V(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(gu(t=>{if(t instanceof gc)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new wl([],{primary:t}):t;return new _l(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(V(t=>new wl([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return $a({});const n=[],r=[],i={};return yl(t,(t,s)=>{const o=e(s,t).pipe(V(t=>i[s]=t));"primary"===s?n.push(o):r.push(o)}),$a.apply(null,n.concat(r)).pipe(tu(),mu(),V(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return $a(...n).pipe(V(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(gu(t=>{if(t instanceof gc)return $a(null);throw t}))),tu(),Eu(t=>!!t),gu((t,n)=>{if(t instanceof Wa||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return $a(new wl([],{}));throw new gc(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Tc(r)!==s?vc(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):vc(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?bc(i):this.lineralizeSegments(n,i).pipe(B(n=>{const i=new wl(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:l}=Ec(e,r,i);if(!o)return vc(e);const c=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?bc(c):this.lineralizeSegments(r,c).pipe(B(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(V(t=>(n._loadedConfig=t,new wl(r,{})))):$a(new wl(r,{}));const{matched:i,consumedSegments:s,lastChild:o}=Ec(e,n,r);if(!i)return vc(e);const a=r.slice(o);return this.getChildConfig(t,n,r).pipe(B(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Sc(t,e,n)&&"primary"!==Tc(n))}(t,n,r)?{segmentGroup:Cc(new wl(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Tc(r)&&(n[Tc(r)]=new wl([],{}));return n}(r,new wl(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Sc(t,e,n))}(t,n,r)?{segmentGroup:Cc(new wl(t.segments,function(t,e,n,r){const i={};for(const s of n)Sc(t,e,s)&&!r[Tc(s)]&&(i[Tc(s)]=new wl([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,a,r);return 0===o.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(V(t=>new wl(s,t))):0===r.length&&0===o.length?$a(new wl(s,{})):this.expandSegment(n,i,r,o,"primary",!0).pipe(V(t=>new wl(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?$a(new ul(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?$a(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?q(r).pipe(V(r=>{const i=t.get(r);let s;if(function(t){return t&&pc(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!pc(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return vl(s)})).pipe(tu(),(i=t=>!0===t,t=>t.lift(new Cu(i,void 0,t)))):$a(!0);var i}(t.injector,e,n).pipe(B(n=>n?this.configLoader.load(t.injector,e).pipe(V(t=>(e._loadedConfig=t,t))):function(t){return new _(e=>e.error(ol(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):$a(new ul([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return $a(n);if(r.numberOfChildren>1||!r.children.primary)return _c(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new _l(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return yl(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return yl(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new wl(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ec(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||al)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Cc(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new wl(t.segments.concat(e.segments),e.children)}return t}function Sc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Tc(t){return t.outlet||"primary"}class Ic{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class xc{constructor(t,e){this.component=t,this.route=e}}function Ac(t,e,n){const r=t._root;return function t(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=Gl(n);return e.children.forEach(e=>{!function(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Cl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Cl(t.url,e.url)||!fl(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tc(t,e)||!fl(t.queryParams,e.queryParams);case"paramsChange":default:return!tc(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Ic(i)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?u?u.children:null:r,i,s),l&&s.canDeactivateChecks.push(new xc(u&&u.outlet&&u.outlet.component||null,a))}else a&&Nc(n,u,s),s.canActivateChecks.push(new Ic(i)),t(e,null,o.component?u?u.children:null:r,i,s)}(e,o[e.value.outlet],r,i.concat([e.value]),s),delete o[e.value.outlet]}),yl(o,(t,e)=>Nc(t,r.getContext(e),s)),s}(r,e?e._root:null,n,[r.value])}function kc(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Nc(t,e,n){const r=Gl(t),i=t.value;yl(r,(t,r)=>{Nc(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new xc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Oc=Symbol("INITIAL_VALUE");function Dc(){return Tu(t=>function(...t){let e=null,n=null;return x(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),H(t,n).lift(new Ka(e))}(...t.map(t=>t.pipe(bu(1),ku(Oc)))).pipe(Nu((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Oc)return t;if(r===Oc&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||mc(r))return r}return t},t)},Oc),eu(t=>t!==Oc),V(t=>mc(t)?t:!0===t),bu(1)))}function Rc(t,e){return null!==t&&e&&e(new tl(t)),$a(!0)}function Pc(t,e){return null!==t&&e&&e(new Zu(t)),$a(!0)}function Mc(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?$a(r.map(r=>Xa(()=>{const i=kc(r,e,n);let s;if(function(t){return t&&pc(t.canActivate)}(i))s=vl(i.canActivate(e,t));else{if(!pc(i))throw new Error("Invalid CanActivate guard");s=vl(i(e,t))}return s.pipe(Eu())}))).pipe(Dc()):$a(!0)}function Lc(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Xa(()=>$a(e.guards.map(i=>{const s=kc(i,e.node,n);let o;if(function(t){return t&&pc(t.canActivateChild)}(s))o=vl(s.canActivateChild(r,t));else{if(!pc(s))throw new Error("Invalid CanActivateChild guard");o=vl(s(r,t))}return o.pipe(Eu())})).pipe(Dc())));return $a(i).pipe(Dc())}class Vc{}class Fc{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const t=qc(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Kl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zl(n,e),i=new Yl(this.url,r);return this.inheritParamsAndData(i._root),$a(i)}catch(t){return new _(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Ql(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Sl(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const s of t)try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(i){if(!(i instanceof Vc))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Vc}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Vc;if((t.outlet||"primary")!==r)throw new Vc;let i,s=[],o=[];if("**"===t.path){const s=n.length>0?gl(n).parameters:{};i=new Kl(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gc(t),r,t.component,t,Uc(e),jc(e)+n.length,$c(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Vc;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||al)(n,t,e);if(!r)throw new Vc;const i={};yl(r.posParams,(t,e)=>{i[e]=t.path});const s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(e,t,n);s=a.consumedSegments,o=n.slice(a.lastChild),i=new Kl(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gc(t),r,t.component,t,Uc(e),jc(e)+s.length,$c(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:l}=qc(e,s,o,a,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new zl(i,t)]}if(0===a.length&&0===l.length)return[new zl(i,[])];const c=this.processSegment(a,u,l,"primary");return[new zl(i,c)]}}function Uc(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jc(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function qc(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Bc(t,e,n)&&"primary"!==zc(n))}(t,n,r)){const i=new wl(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&"primary"!==zc(s)){const n=new wl([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[zc(s)]=n}return i}(t,e,r,new wl(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Bc(t,e,n))}(t,n,r)){const s=new wl(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(Bc(t,n,a)&&!i[zc(a)]){const n=new wl([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[zc(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new wl(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Bc(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function zc(t){return t.outlet||"primary"}function Gc(t){return t.data||{}}function $c(t){return t.resolve||{}}function Hc(t,e,n,r){const i=kc(t,e,r);return vl(i.resolve?i.resolve(e,n):i(e,n))}function Wc(t){return function(e){return e.pipe(Tu(e=>{const n=t(e);return n?q(n).pipe(V(()=>e)):q([e])}))}}class Qc{}class Kc{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const Yc=new Et("ROUTES");class Jc{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(V(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ul(ml(r.injector.get(Yc)).map(dl),r)}))}loadModuleFactory(t){return"string"==typeof t?q(this.loader.load(t)):vl(t()).pipe(B(t=>t instanceof Pt?$a(t):q(this.compiler.compileModuleAsync(t))))}}class Zc{}class Xc{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function th(t){throw t}function eh(t,e,n){return e.parse("/")}function nh(t,e){return $a(null)}class rh{constructor(t,e,n,r,i,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=th,this.malformedUriErrorHandler=eh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:nh,afterPreactivation:nh},this.urlHandlingStrategy=new Xc,this.routeReuseStrategy=new Kc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Rt),this.console=i.get(Mi);const u=i.get(Wi);this.isNgZoneEnabled=u instanceof Wi,this.resetConfig(a),this.currentUrlTree=new _l(new wl([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Jc(s,o,t=>this.triggerEvent(new Yu(t)),t=>this.triggerEvent(new Ju(t))),this.routerState=Hl(this.currentUrlTree,this.rootComponentType),this.transitions=new Ha({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(eu(t=>0!==t.id),V(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Tu(t=>{let n=!1,r=!1;return $a(t).pipe(Mu(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tu(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return $a(t).pipe(Tu(t=>{const n=this.transitions.getValue();return e.next(new qu(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ja:[t]}),Tu(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,function(t){return t.pipe(Tu(t=>function(t,e,n,r,i){return new wc(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe(V(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Mu(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(s){return s.pipe(B(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){return new Fc(t,e,n,r,i,s).recognize()}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(V(t=>Object.assign(Object.assign({},s),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Mu(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Mu(t=>{const n=new $u(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new qu(n,this.serializeUrl(r),i,s);e.next(a);const u=Hl(r,this.rootComponentType).snapshot;return $a(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ja}),Wc(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Mu(t=>{const e=new Hu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),V(t=>Object.assign(Object.assign({},t),{guards:Ac(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(B(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?$a(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return q(t).pipe(B(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?$a(s.map(s=>{const o=kc(s,e,i);let a;if(function(t){return t&&pc(t.canDeactivate)}(o))a=vl(o.canDeactivate(t,e,n,r));else{if(!pc(o))throw new Error("Invalid CanDeactivate guard");a=vl(o(t,e,n,r))}return a.pipe(Eu())})).pipe(Dc()):$a(!0)}(t.component,t.route,n,e,r)),Eu(t=>!0!==t,!0))}(o,r,i,t).pipe(B(n=>n&&"boolean"==typeof n?function(t,e,n,r){return q(e).pipe(Ru(e=>q([Pc(e.route.parent,r),Rc(e.route,r),Lc(t,e.path,n),Mc(t,e.route,n)]).pipe(tu(),Eu(t=>!0!==t,!0))),Eu(t=>!0!==t,!0))}(r,s,t,e):$a(n)),V(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Mu(t=>{if(mc(t.guardsResult)){const e=ol(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Mu(t=>{const e=new Wu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),eu(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new zu(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Wc(t=>{if(t.guards.canActivateChecks.length)return $a(t).pipe(Mu(t=>{const e=new Qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(B(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;return i.length?q(i).pipe(Ru(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return $a({});if(1===i.length){const s=i[0];return Hc(t[s],e,n,r).pipe(V(t=>({[s]:t})))}const s={};return q(i).pipe(B(i=>Hc(t[i],e,n,r).pipe(V(t=>(s[i]=t,t))))).pipe(mu(),V(()=>s))}(t._resolve,t,e,r).pipe(V(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Ql(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return v(Nu(t,e),su(1),du(e))(n)}:function(e){return v(Nu((e,n,r)=>t(e,n,r+1)),su(1))(e)}}((t,e)=>t),V(e=>t)):$a(t)}))}),Mu(t=>{const e=new Ku(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),Wc(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),V(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new zl(i,s)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Wl(new Ha((i=n.value).url),new Ha(i.params),new Ha(i.queryParams),new Ha(i.fragment),new Ha(i.data),i.outlet,i.component,i),s=n.children.map(n=>t(e,n));return new zl(r,s)}}var i}(t,e._root,n?n._root:void 0);return new $l(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Mu(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),V(t=>(new dc(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),Mu({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new zu(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Fu(i))),gu(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=mc(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new zu(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Gu(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var i;return Ja}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ll(t),this.config=t.map(dl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=e;ee()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=a?this.currentUrlTree.fragment:i;let c=null;if(o)switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=s?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return nc(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new rc(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return yl(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new rc(n,e,r)}(n);if(s.toRoot())return nc(e.root,new wl([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new ic(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new ic(n.snapshot._urlSegment,!0,0);const r=ec(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ic(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?ac(o.segmentGroup,o.index,s.commands):oc(o.segmentGroup,o.index,s.commands);return nc(o.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,c,l)}navigateByUrl(t,e={skipLocationChange:!1}){ee()&&this.isNgZoneEnabled&&!Wi.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=mc(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(mc(t))return bl(this.currentUrlTree,t,e);const n=this.parseUrl(t);return bl(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const s=this.getTransition();if(s&&"imperative"!==e&&"imperative"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"hashchange"==e&&"popstate"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"popstate"==e&&"hashchange"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o,a,u;i?(o=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{o=t,a=e});const l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class ih{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new sh,this.attachRef=null}}class sh{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ih,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class oh{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Si,this.deactivateEvents=new Si,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ah(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class ah{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Wl?this.route:t===sh?this.childContexts:this.parent.get(t,e)}}class uh{}class lh{preload(t,e){return e().pipe(gu(()=>$a(null)))}}class ch{preload(t,e){return $a(null)}}class hh{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Jc(e,n,e=>t.triggerEvent(new Yu(e)),e=>t.triggerEvent(new Ju(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(eu(t=>t instanceof Bu),Ru(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Rt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return q(n).pipe($(),V(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(B(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}class dh{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new nl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const fh=new Et("ROUTER_CONFIGURATION"),ph=new Et("ROUTER_FORROOT_GUARD"),mh=[wa,{provide:Tl,useClass:Il},{provide:rh,useFactory:Eh,deps:[Tl,sh,wa,Re,ps,zi,Yc,fh,[Zc,new rt],[Qc,new rt]]},sh,{provide:Wl,useFactory:Ch,deps:[rh]},{provide:ps,useClass:ys},hh,ch,lh,{provide:fh,useValue:{enableTracing:!1}}];function gh(){return new as("Router",rh)}class yh{constructor(t,e){}static forRoot(t,e){return{ngModule:yh,providers:[mh,wh(t),{provide:ph,useFactory:_h,deps:[[rh,new rt,new st]]},{provide:fh,useValue:e||{}},{provide:ga,useFactory:bh,deps:[aa,[new nt(va),new rt],fh]},{provide:dh,useFactory:vh,deps:[rh,za,fh]},{provide:uh,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:ch},{provide:as,multi:!0,useFactory:gh},[Sh,{provide:xi,multi:!0,useFactory:Th,deps:[Sh]},{provide:xh,useFactory:Ih,deps:[Sh]},{provide:Pi,multi:!0,useExisting:xh}]]}}static forChild(t){return{ngModule:yh,providers:[wh(t)]}}}function vh(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new dh(t,e,n)}function bh(t,e,n={}){return n.useHash?new _a(t,e):new ba(t,e)}function _h(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wh(t){return[{provide:Be,multi:!0,useValue:t},{provide:Yc,multi:!0,useValue:t}]}function Eh(t,e,n,r,i,s,o,a={},u,l){const c=new rh(null,t,e,n,r,i,s,ml(o));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),a.errorHandler&&(c.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(c.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=sa();c.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(c.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(c.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(c.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(c.relativeLinkResolution=a.relativeLinkResolution),c}function Ch(t){return t.routerState.root}class Sh{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new T}appInitializer(){return this.injector.get(la,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(rh),r=this.injector.get(fh);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?$a(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(fh),n=this.injector.get(hh),r=this.injector.get(dh),i=this.injector.get(rh),s=this.injector.get(ds);t===s.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function Th(t){return t.appInitializer.bind(t)}function Ih(t){return t.bootstrapListener.bind(t)}const xh=new Et("Router Initializer");var Ah=Yn({encapsulation:2,styles:[],data:{}});function kh(t){return Qs(0,[(t()(),Rs(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ni(1,212992,null,0,oh,[sh,Pn,rn,[8,null],ke],null,null)],(function(t,e){t(e,1,0)}),null)}function Nh(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"ng-component",[],null,null,null,kh,Ah)),ni(1,49152,null,0,rl,[],null,null)],null,null)}var Oh=Mr("ng-component",rl,Nh,{},{},[]);function Dh(t,e){return new _(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=q(t[a]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&l||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Rh=new Et("NgValueAccessor"),Ph=new Et("CompositionEventMode");class Mh{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=sa()?sa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}class Lh{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Vh extends Lh{get formDirective(){return null}get path(){return null}}function Fh(){throw new Error("unimplemented")}class Uh extends Lh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Fh()}get asyncValidator(){return Fh()}}class jh{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class qh extends jh{constructor(t){super(t)}}class Bh extends jh{constructor(t){super(t)}}function zh(t){return null==t||0===t.length}const Gh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $h{static min(t){return e=>{if(zh(e.value)||zh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(zh(e.value)||zh(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return zh(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return zh(t.value)?null:Gh.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(zh(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return $h.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(zh(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Hh);return 0==e.length?null:function(t){return Qh(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Hh);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return Dh(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Dh(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Dh(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(V(t=>e(...t)))}return Dh(t,null)}(function(t,e){return e.map(e=>e(t))}(t,e).map(Wh)).pipe(V(Qh))}}}function Hh(t){return null!=t}function Wh(t){const e=Ye(t)?q(t):t;if(!Je(e))throw new Error("Expected validator to return Promise or Observable.");return e}function Qh(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Kh(t){return t.validate?e=>t.validate(e):t}function Yh(t){return t.validate?e=>t.validate(e):t}class Jh{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}const Zh='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Xh='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',td='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function ed(t,e){return[...e.path,t]}function nd(t,e){t||od(e,"Cannot find control with"),e.valueAccessor||od(e,"No value accessor for form control with"),t.validator=$h.compose([t.validator,e.validator]),t.asyncValidator=$h.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&rd(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&rd(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function rd(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function id(t,e){null==t&&od(e,"Cannot find control with"),t.validator=$h.compose([t.validator,e.validator]),t.asyncValidator=$h.composeAsync([t.asyncValidator,e.asyncValidator])}function sd(t){return od(t,"There is no FormControl instance attached to form control element with")}function od(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function ad(t){return null!=t?$h.compose(t.map(Kh)):null}function ud(t){return null!=t?$h.composeAsync(t.map(Yh)):null}const ld=[class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=$e}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=$e}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},class{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Uh),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function cd(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function hd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function dd(t){const e=pd(t)?t.validators:t;return Array.isArray(e)?ad(e):e||null}function fd(t,e){const n=pd(e)?e.asyncValidators:t;return Array.isArray(n)?ud(n):n||null}function pd(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class md{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=dd(t)}setAsyncValidators(t){this.asyncValidator=fd(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=Wh(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof yd?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof vd&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Si,this.statusChanges=new Si}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){pd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class gd extends md{constructor(t=null,e,n){super(dd(e),fd(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class yd extends md{constructor(t,e,n){super(dd(e),fd(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof gd?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class vd extends md{constructor(t,e,n){super(dd(e),fd(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof gd?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const bd=(()=>Promise.resolve(null))();class _d extends Vh{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Si,this.form=new yd({},ad(t),ud(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bd.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),nd(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bd.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),hd(this._directives,t)})}addFormGroup(t){bd.then(()=>{const e=this._findContainer(t.path),n=new yd({});id(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bd.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){bd.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,cd(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}class wd extends Vh{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ed(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ad(this._validators)}get asyncValidator(){return ud(this._asyncValidators)}_checkParentType(){}}class Ed{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${Zh}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Xh}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${td}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Xh}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${td}`)}}class Cd extends wd{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof Cd||this._parent instanceof _d||Ed.modelGroupParentException()}}const Sd=(()=>Promise.resolve(null))();class Td extends Uh{constructor(t,e,n,r){super(),this.control=new gd,this._registered=!1,this.update=new Si,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||od(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var s;e.constructor===Mh?n=e:(s=e,ld.some(t=>s.constructor===t)?(r&&od(t,"More than one built-in value accessor matches form control with"),r=e):(i&&od(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(od(t,"No valid value accessor for form control with"),null)}(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!$e(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ed(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ad(this._rawValidators)}get asyncValidator(){return ud(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){nd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Cd)&&this._parent instanceof wd?Ed.formGroupNameException():this._parent instanceof Cd||this._parent instanceof _d||Ed.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ed.missingNameException()}_updateValue(t){Sd.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Sd.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}class Id{}const xd=new Et("NgModelWithFormControlWarning");class Ad extends Vh{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Si}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return nd(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){hd(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);id(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);id(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,cd(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>sd(e)),e.valueAccessor.registerOnTouched(()=>sd(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&nd(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=ad(this._validators);this.form.validator=$h.compose([this.form.validator,t]);const e=ud(this._asyncValidators);this.form.asyncValidator=$h.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||class{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Zh}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Xh}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${td}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${Zh}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Xh}`)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}.missingFormException()}}class kd{}class Nd{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,s=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,s=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new yd(n,{asyncValidators:i,updateOn:s,validators:r})}control(t,e,n){return new gd(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new vd(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof gd||t instanceof yd||t instanceof vd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}class Od{}class Dd{static withConfig(t){return{ngModule:Dd,providers:[{provide:xd,useValue:t.warnOnNgModelWithFormControl}]}}}function Rd(t){return null!=t&&"false"!==`${t}`}function Pd(t){return t instanceof un?t.nativeElement:t}class Md extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class Ld extends Md{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Vd=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Fd extends Vd{constructor(t,e=Vd.now){super(t,()=>Fd.delegate&&Fd.delegate!==this?Fd.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Fd.delegate&&Fd.delegate!==this?Fd.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Ud=new Fd(Ld);class jd{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new qd(t,this.dueTime,this.scheduler))}}class qd extends p{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Bd,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Bd(t){t.debouncedNext()}let zd;try{zd="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(zv){zd=!1}let Gd,$d=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zd)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275prov=ut({factory:function(){return new t(kt(Ri,8))},token:t,providedIn:"root"}),t})();class Hd{}const Wd=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Qd(){if(Gd)return Gd;if("object"!=typeof document||!document)return Gd=new Set(Wd),Gd;let t=document.createElement("input");return Gd=new Set(Wd.filter(e=>(t.setAttribute("type",e),t.type===e))),Gd}let Kd;function Yd(t){return function(){if(null==Kd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kd=!0}))}finally{Kd=Kd||!1}return Kd}()?t:!!t.capture}"undefined"!=typeof Element&&Element;const Jd=new Et("cdk-focus-monitor-default-options"),Zd=Yd({passive:!0,capture:!0});let Xd=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=t.composedPath?t.composedPath()[0]:t.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){if(!this._platform.isBrowser)return $a(null);const n=Pd(t);if(this._elementInfo.has(n)){let t=this._elementInfo.get(n);return t.checkChildren=e,t.subject.asObservable()}let r={unlisten:()=>{},checkChildren:e,subject:new T};this._elementInfo.set(n,r),this._incrementMonitoredElementCount();let i=t=>this._onFocus(t,n),s=t=>this._onBlur(t,n);return this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",i,!0),n.addEventListener("blur",s,!0)}),r.unlisten=()=>{n.removeEventListener("focus",i,!0),n.removeEventListener("blur",s,!0)},r.subject.asObservable()}stopMonitoring(t){const e=Pd(t),n=this._elementInfo.get(e);n&&(n.unlisten(),n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())}focusVia(t,e,n){const r=Pd(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_setClasses(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){let e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==t.target)return;let r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,Zd),t.addEventListener("mousedown",this._documentMousedownListener,Zd),t.addEventListener("touchstart",this._documentTouchstartListener,Zd),e.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,Zd),t.removeEventListener("mousedown",this._documentMousedownListener,Zd),t.removeEventListener("touchstart",this._documentTouchstartListener,Zd),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275prov=ut({factory:function(){return new t(kt(Wi),kt($d),kt(oa,8),kt(Jd,8))},token:t,providedIn:"root"}),t})(),tf=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=(this._document.defaultView.getComputedStyle(t).backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),e){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275prov=ut({factory:function(){return new t(kt($d),kt(oa))},token:t,providedIn:"root"}),t})();const ef=new mn("9.2.0");class nf extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new nf,ia||(ia=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=sf||(sf=document.querySelector("base"),sf)?sf.getAttribute("href"):null;return null==e?null:(n=e,rf||(rf=document.createElement("a")),rf.setAttribute("href",n),"/"===rf.pathname.charAt(0)?rf.pathname:"/"+rf.pathname);var n}resetBaseElement(){sf=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let rf,sf=null;const of=new Et("TRANSITION_ID"),af=[{provide:xi,useFactory:function(t,e,n){return()=>{n.get(Ai).donePromise.then(()=>{const n=sa();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[of,oa,Re],multi:!0}];class uf{static init(){var t;t=new uf,ss=t}addToWindow(t){wt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},wt.getAllAngularTestabilities=()=>t.getAllTestabilities(),wt.getAllAngularRootElements=()=>t.getAllRootElements(),wt.frameworkStabilizers||(wt.frameworkStabilizers=[]),wt.frameworkStabilizers.push(t=>{const e=wt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?sa().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}function lf(t,e){"undefined"!=typeof COMPILED&&COMPILED||((wt.ng=wt.ng||{})[t]=e)}const cf=(()=>({ApplicationRef:ds,NgZone:Wi}))();function hf(t){return Cs(t)}const df=new Et("EventManagerPlugins");class ff{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class pf{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=sa().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}class mf{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class gf extends mf{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>sa().remove(t))}}const yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vf=/%COMP%/g;function bf(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?bf(t,i,n):(i=i.replace(vf,t),n.push(i))}return n}function _f(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class wf{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Ef(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Vt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Cf(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case Vt.Native:case Vt.ShadowDom:return new Sf(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=bf(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class Ef{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(yf[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=yf[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=yf[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&hn.DashCase?t.style.setProperty(e,n,r&hn.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&hn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,_f(n)):this.eventManager.addEventListener(t,e,_f(n))}}class Cf extends Ef{constructor(t,e,n,r){super(t),this.component=n;const i=bf(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(vf,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(vf,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Sf extends Ef{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===Vt.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=bf(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}class Tf extends pf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}const If={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},xf=new Et("HammerGestureConfig"),Af=new Et("HammerLoader");class kf{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class Nf extends pf{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!If.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),s=function(t){r.runGuarded((function(){n(t)}))};return i.on(e,s),()=>{i.off(e,s),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const Of=["alt","control","meta","shift"],Df={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rf={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pf={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class Mf extends pf{constructor(t){super(t)}supports(t){return null!=Mf.parseEventName(t)}addEventListener(t,e,n){const r=Mf.parseEventName(e),i=Mf.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sa().onAndCancel(t,r.domEventName,i))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const r=Mf._normalizeKey(e.pop());let i="";if(Of.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i+=t+".")}),i+=r,0!=e.length||0===r.length)return null;const s={};return s.domEventName=n,s.fullKey=i,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Rf.hasOwnProperty(e)&&(e=Rf[e]))}return Df[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Of.forEach(r=>{r!=n&&(0,Pf[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(t,e,n){return r=>{Mf.getEventFullKey(r)===t&&n.runGuarded(()=>e(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}let Lf=(()=>{class t{}return t.\u0275prov=ut({factory:function(){return kt(Vf)},token:t,providedIn:"root"}),t})(),Vf=(()=>{class t extends Lf{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Ce.NONE:return e;case Ce.HTML:return Jt(e,"HTML")?Yt(e):function(t,e){let n=null;try{we=we||new ne(t);let r=e?String(e):"";n=we.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=we.getInertBodyElement(r)}while(r!==s);const o=new ye,a=o.sanitizeChildren(Ee(n)||n);return ee()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Ee(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e));case Ce.STYLE:return Jt(e,"Style")?Yt(e):function(t){if(!(t=String(t).trim()))return"";const e=t.match(Te);return e&&se(e[1])===e[1]||t.match(Se)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(ee()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e);case Ce.SCRIPT:if(Jt(e,"Script"))return Yt(e);throw new Error("unsafe value used in a script context");case Ce.URL:return Zt(e),Jt(e,"URL")?Yt(e):se(String(e));case Ce.RESOURCE_URL:if(Jt(e,"ResourceURL"))return Yt(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new $t(t)}bypassSecurityTrustStyle(t){return new Ht(t)}bypassSecurityTrustScript(t){return new Wt(t)}bypassSecurityTrustUrl(t){return new Qt(t)}bypassSecurityTrustResourceUrl(t){return new Kt(t)}}return t.\u0275prov=ut({factory:function(){return t=kt(Ct),new Vf(t.get(oa));var t},token:t,providedIn:"root"}),t})();function Ff(){return new zt}const Uf=us(Is,"browser",[{provide:Ri,useValue:"browser"},{provide:Di,useValue:function(){nf.makeCurrent(),uf.init()},multi:!0},{provide:oa,useFactory:function(){return function(t){Ft=t}(document),document},deps:[]}]);class jf{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:jf,providers:[{provide:ki,useValue:t.appId},{provide:of,useExisting:ki},af]}}}"undefined"!=typeof window&&window;const qf=new mn("9.2.0"),Bf=new Et("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});class zf{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return ee()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const r=getComputedStyle(n);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&qf.full!==ef.full&&console.warn("The Angular Material version ("+qf.full+") does not match the Angular CDK version ("+ef.full+").\nPlease ensure the versions of these two packages exactly match.")}}function Gf(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Rd(t)}}}function $f(t,e){return class extends t{constructor(...t){super(...t),this.color=e}get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Hf(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Rd(t)}}}function Wf(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new T}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}let Qf;try{Qf="undefined"!=typeof Intl}catch(zv){Qf=!1}let Kf=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();class Yf{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Jf={enterDuration:450,exitDuration:400},Zf=Yd({passive:!0});class Xf{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=t=>{const e=function(t){return 0===t.buttons}(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))},this._onTouchStart=t=>{if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}},this._onPointerUp=()=>{this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))},r.isBrowser&&(this._containerElement=Pd(n),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Jf),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),o=t-r.left,a=e-r.top,u=i.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=`${o-s}px`,l.style.top=`${a-s}px`,l.style.height=`${2*s}px`,l.style.width=`${2*s}px`,null!=n.color&&(l.style.backgroundColor=n.color),l.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(l),window.getComputedStyle(l).getPropertyValue("opacity"),l.style.transform="scale(1)";const c=new Yf(this,l,n);return c.state=0,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=1,n.persistent||t&&this._isPointerDown||c.fadeOut()},u),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},Jf),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=Pd(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(()=>{this._triggerEvents.forEach((t,n)=>{e.addEventListener(n,t,Zf)})}),this._triggerElement=e)}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_removeTriggerEvents(){this._triggerElement&&this._triggerEvents.forEach((t,e)=>{this._triggerElement.removeEventListener(e,t,Zf)})}}const tp=new Et("mat-ripple-global-options");class ep{constructor(t,e,n,r,i){this._elementRef=t,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new Xf(this,e,t,n),"NoopAnimations"===i&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign({},this._globalOptions.animation),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}class np{}const rp=new Et("mat-label-global-options");function ip(t){return e=>e.lift(new sp(t))}class sp{constructor(t){this.notifier=t}call(t,e){const n=new op(t),r=M(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class op extends L{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}class ap{}function up(t,e=null){return{type:2,steps:t,options:e}}function lp(t){return{type:6,styles:t,offset:null}}function cp(t){Promise.resolve(null).then(t)}class hp{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cp(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class dp{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?cp(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class fp{}function pp(t){return Error(`A hint was already declared for 'align="${t}"'.`)}let mp=0;class gp{constructor(t){this._elementRef=t}}const yp=$f(gp,"primary"),vp=new Et("MAT_FORM_FIELD_DEFAULT_OPTIONS"),bp=new Et("MatFormField");class _p extends yp{constructor(t,e,n,r,i,s,o,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new T,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${mp++}`,this._labelId=`mat-form-field-label-${mp++}`,this._labelOptions=n||{},this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Rd(t)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(ku(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ip(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(ip(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),W(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(ku(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(ku(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(ip(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,function t(e,n,i,s){return r(i)&&(s=i,i=void 0),s?t(e,n,i).pipe(V(t=>u(t)?s(...t):s(t))):new _(t=>{!function t(e,n,r,i,s){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,s),o=()=>t.removeEventListener(n,r,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),o=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),o=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,a=e.length;o<a;o++)t(e[o],n,r,i,s)}i.add(o)}(e,n,(function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),t,i)})}(this._label.nativeElement,"transitionend").pipe(bu(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw pp("start");t=n}else if("end"===n.align){if(e)throw pp("end");e=n}})}}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),s=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(i),o=this._getStartEnd(t.children[0].getBoundingClientRect());let a=0;for(const e of t.children)a+=e.offsetWidth;e=Math.abs(o-s)-5,n=a>0?.75*a+10:0}for(let o=0;o<i.length;o++)i[o].style.width=`${e}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}class wp{}let Ep=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Cp=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Pd(t);return new _(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new T,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275prov=ut({factory:function(){return new t(kt(Ep))},token:t,providedIn:"root"}),t})();class Sp{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new Si,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Rd(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(t,e=Ud){return n=>n.lift(new jd(t,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}class Tp{}const Ip=new Et("cdk-dir-doc",{providedIn:"root",factory:function(){return Nt(oa)}});let xp=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Si,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275prov=ut({factory:function(){return new t(kt(Ip,8))},token:t,providedIn:"root"}),t})();class Ap{}function kp(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Np(t){switch(t.length){case 0:return new hp;case 1:return t[0];default:return new dp(t)}}function Op(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,l=null;if(r.forEach(t=>{const n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case"*":a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}c[r]=a}),r||a.push(c),l=c,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function Dp(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Rp(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Rp(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Rp(n,"destroy",t)))}}function Rp(t,e,n){const r=n.totalTime,i=Pp(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function Pp(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Mp(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Lp(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Vp=(t,e)=>!1,Fp=(t,e)=>!1,Up=(t,e,n)=>[];const jp=kp();(jp||"undefined"!=typeof Element)&&(Vp=(t,e)=>t.contains(e),Fp=(()=>{if(jp||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Fp}})(),Up=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let qp=null,Bp=!1;function zp(t){qp||(qp=("undefined"!=typeof document?document.body:null)||{},Bp=!!qp.style&&"WebkitAppearance"in qp.style);let e=!0;return qp.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in qp.style,!e&&Bp)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in qp.style),e}const Gp=Fp,$p=Vp,Hp=Up;function Wp(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}class Qp{validateStyleProperty(t){return zp(t)}matchesElement(t,e){return Gp(t,e)}containsElement(t,e){return $p(t,e)}query(t,e,n){return Hp(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new hp(n,r)}}let Kp=(()=>{class t{}return t.NOOP=new Qp,t})();function Yp(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Jp(parseFloat(e[1]),e[2])}function Jp(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Zp(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Jp(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Jp(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Xp(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function tm(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Xp(t,n);return n}function em(t,e,n){return n?e+":"+n+";":""}function nm(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=em(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=em(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function rm(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=hm(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),kp()&&nm(t))}function im(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=hm(e);t.style[n]=""}),kp()&&nm(t))}function sm(t){return Array.isArray(t)?1==t.length?t[0]:up(t):t}const om=new RegExp("{{\\s*(.+?)\\s*}}","g");function am(t){let e=[];if("string"==typeof t){let n;for(;n=om.exec(t);)e.push(n[1]);om.lastIndex=0}return e}function um(t,e,n){const r=t.toString(),i=r.replace(om,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function lm(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const cm=/-+([a-z0-9])/g;function hm(t){return t.replace(cm,(...t)=>t[1].toUpperCase())}function dm(t,e){return 0===t||0===e}function fm(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach((function(e){n[e]=mm(t,e)}))}}return e}function pm(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function mm(t,e){return window.getComputedStyle(t)[e]}function gm(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(bm(i,o)),"<"!=s[0]||"*"==i&&"*"==o||e.push(bm(o,i))}(t,n,e)):n.push(t),n}const ym=new Set(["true","1"]),vm=new Set(["false","0"]);function bm(t,e){const n=ym.has(t)||vm.has(t),r=ym.has(e)||vm.has(e);return(i,s)=>{let o="*"==t||t==i,a="*"==e||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?ym.has(t):vm.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?ym.has(e):vm.has(e)),o&&a}}const _m=new RegExp("s*:selfs*,?","g");function wm(t,e,n){return new Em(t).build(e,n)}class Em{constructor(t){this._driver=t}build(t,e){const n=new Cm(e);return this._resetContextStyleTimingState(n),pm(this,sm(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(Sm(t)){const e=t;Object.keys(e).forEach(t=>{am(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=lm(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=pm(this,sm(t.animation),e);return{type:1,matchers:gm(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Tm(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>pm(this,t,e)),options:Tm(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=pm(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:Tm(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Im(Zp(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Im(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Zp(r,e),Im(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:lp({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=lp(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Sm(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=am(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Sm(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Sm(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=u&&(r++,l=n.offset=u),o=o||l<0||l>1,s=s||l<a,a=l,i.push(l),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let c=0;r>0&&r<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(l-1));const h=l-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=c>0?r==h?1:c*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:pm(this,sm(t.animation),e),options:Tm(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Tm(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Tm(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(_m,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Mp(e.collectedStyles,e.currentQuerySelector,{});const o=pm(this,sm(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:Tm(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Zp(t.timings,e.errors,!0);return{type:12,animation:pm(this,sm(t.animation),e),timings:n,options:null}}}class Cm{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Sm(t){return!Array.isArray(t)&&"object"==typeof t}function Tm(t){var e;return t?(t=Xp(t)).params&&(t.params=(e=t.params)?Xp(e):null):t={},t}function Im(t,e,n){return{duration:t,delay:e,easing:n}}function xm(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Am{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const km=new RegExp(":enter","g"),Nm=new RegExp(":leave","g");function Om(t,e,n,r,i,s={},o={},a,u,l=[]){return(new Dm).buildKeyframes(t,e,n,r,i,s,o,a,u,l)}class Dm{buildKeyframes(t,e,n,r,i,s,o,a,u,l=[]){u=u||new Am;const c=new Pm(t,e,u,r,i,l,[]);c.options=a,c.currentTimeline.setStyles([s],null,c.errors,a),pm(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[xm(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Yp(n.duration):null,s=null!=n.delay?Yp(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),pm(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Rm);const t=Yp(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>pm(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Yp(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),pm(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Zp(e.params?um(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Yp(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Rm);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),pm(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const l=u.currentTime;pm(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}const Rm={};class Pm{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Mm(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Yp(n.duration)),null!=n.delay&&(r.delay=Yp(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=um(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new Pm(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Rm,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Lm(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(km,"."+this._enterClassName)).replace(Nm,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class Mm{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Mm(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):tm(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=um(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=tm(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?lm(t.values()):[],s=e.size?lm(e.values()):[];if(n){const t=r[0],e=Xp(t);t.offset=0,e.offset=1,r=[t,e]}return xm(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Lm extends Mm{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=tm(t[0],!1);a.offset=0,i.push(a);const u=tm(t[0],!1);u.offset=Vm(o),i.push(u);const l=t.length-1;for(let r=1;r<=l;r++){let o=tm(t[r],!1);o.offset=Vm((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return xm(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Vm(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Fm{}class Um extends Fm{normalizePropertyName(t,e){return hm(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(jm[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const jm=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function qm(t,e,n,r,i,s,o,a,u,l,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:d}}const Bm={};class zm{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,l){const c=[],h=this.ast.options&&this.ast.options.params||Bm,d=this.buildStyles(n,o&&o.params||Bm,c),f=a&&a.params||Bm,p=this.buildStyles(r,f,c),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},_=l?[]:Om(t,e,this.ast.animation,i,s,d,p,b,u,c);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),c.length)return qm(e,this._triggerName,n,r,v,d,p,[],[],g,y,w,c);_.forEach(t=>{const n=t.element,r=Mp(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Mp(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const E=lm(m.values());return qm(e,this._triggerName,n,r,v,d,p,_,E,g,y,w)}}class Gm{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Xp(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=um(s,r,e)),n[t]=s})}}),n}}class $m{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Gm(t.style,t.options&&t.options.params||{})}),Hm(this.states,"true","1"),Hm(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new zm(t,e,this.states))}),this.fallbackTransition=new zm(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Hm(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Wm=new Am;class Qm{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=wm(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Op(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=Om(this._driver,e,i,"ng-enter","ng-leave",{},{},n,Wm,r),s.forEach(t=>{const e=Mp(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=Np(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Pp(e,"","","");return Dp(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Km=[],Ym={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jm={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Zm{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Xp(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Xm=new Zm("void");class tg{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ag(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=Mp(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Mp(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(ag(t,"ng-trigger"),ag(t,"ng-trigger-"+e),a[e]=Xm),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new ng(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(ag(t,"ng-trigger"),ag(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Zm(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Xm),"void"!==u.value&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{im(t,n),rm(t,r)})}return}const l=Mp(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(ag(t,"ng-animate-queued"),s.onStart(()=>{ug(t,"ng-animate-queued")})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),l.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Np(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,s=this._engine.statesByElement.get(t)[r]||Xm,o=new Zm("void"),a=new ng(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Ym||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){ag(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=Pp(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Dp(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class eg{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new tg(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(rg(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!rg(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ag(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ug(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(rg(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return rg(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Np(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Ym,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)ag(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Np(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Am,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)l.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=og(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n="ng-enter"+p++;f.set(e,n),t.forEach(t=>ag(t,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=og(h,Array.from(g));b.forEach((t,e)=>{const n="ng-leave"+p++;v.set(e,n),t.forEach(t=>ag(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>ug(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>ug(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(_.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const l=!c||!this.driver.containsElement(c,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,l);if(!p.errors||!p.errors.length)return l?(e.onStart(()=>im(i,p.fromStyles)),e.onDestroy(()=>rm(i,p.toStyles)),void r.push(e)):t.isFallbackTransition?(e.onStart(()=>im(i,p.fromStyles)),e.onDestroy(()=>rm(i,p.toStyles)),void r.push(e)):(p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Mp(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))}));w.push(p)});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Mp(E,e,[]).push(t),t.destroy()})});const S=m.filter(t=>cg(t,a,u)),T=new Map;sg(T,this.driver,y,u,"*").forEach(t=>{cg(t,a,u)&&S.push(t)});const I=new Map;d.forEach((t,e)=>{sg(I,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=T.get(t),n=I.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const x=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(l.has(e))return s.onDestroy(()=>rm(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,E,i,I,T);if(s.setRealPlayer(n),t===k)x.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=Np(e)),r.push(s)}}else im(e,o.fromStyles),s.onDestroy(()=>rm(e,o.toStyles)),A.push(s),l.has(e)&&r.push(s)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Np(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<m.length;N++){const t=m[N],e=t.__ng_removed;if(ug(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?lg(this,t,r):this.processLeaveNode(t)}return m.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=Mp(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}im(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],l=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new hp(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof dp?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||Km).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=Op(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&c.add(h),f){const e=new ng(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Mp(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>ag(t,"ng-animating"));const d=Np(h);return d.onDestroy(()=>{l.forEach(t=>ug(t,"ng-animating")),rm(a,e.toStyles)}),c.forEach(t=>{Mp(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new hp(t.duration,t.delay)}}class ng{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new hp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Dp(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Mp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function rg(t){return t&&1===t.nodeType}function ig(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function sg(t,e,n,r,i){const s=[];n.forEach(t=>s.push(ig(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Jm,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>ig(t,s[a++])),o}function og(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=i.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:r.has(o)?1:t(o),i.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}function ag(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function ug(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function lg(t,e,n){Np(n).onDone(()=>t.processLeaveNode(e))}function cg(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class hg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new eg(t,e,n),this._timelineEngine=new Qm(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=wm(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new $m(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Lp(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Lp(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function dg(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=pg(e[0]),e.length>1&&(r=pg(e[e.length-1]))):e&&(n=pg(e)),n||r?new fg(t,n,r):null}let fg=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&rm(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rm(this._element,this._initialStyles),this._endStyles&&(rm(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(im(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(im(this._element,this._endStyles),this._endStyles=null),rm(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function pg(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];mg(i)&&(e=e||{},e[i]=t[i])}return e}function mg(t){return"display"===t||"position"===t}class gg{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Eg(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),wg(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),_g(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){yg(this._element,this._name,"paused")}resume(){yg(this._element,this._name,"running")}setPosition(t){const e=vg(this._element,this._name);this._position=t*this._duration,wg(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),_g(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Eg(t,"").split(","),r=bg(n,e);r>=0&&(n.splice(r,1),wg(t,"",n.join(",")))}(this._element,this._name))}}function yg(t,e,n){wg(t,"PlayState",n,vg(t,e))}function vg(t,e){const n=Eg(t,"");return n.indexOf(",")>0?bg(n.split(","),e):bg([n],e)}function bg(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function _g(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function wg(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Eg(t,e){return t.style["animation"+e]}class Cg{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new gg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:mm(this.element,n))})}this.currentSnapshot=t}}class Sg extends hp{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Wp(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Tg{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return zp(t)}matchesElement(t,e){return Gp(t,e)}containsElement(t,e){return $p(t,e)}query(t,e,n){return Hp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Wp(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.innerHTML=r,s}animate(t,e,n,r,i,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(t=>t instanceof Cg),u={};dm(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=fm(t,e,u));if(0==n)return new Sg(t,l);const c=`gen_css_kf_${this._count++}`,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const d=dg(t,e),f=new Cg(t,e,c,n,r,i,l,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Ig{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:mm(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class xg{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ag().toString()),this._cssKeyframesDriver=new Tg}validateStyleProperty(t){return zp(t)}matchesElement(t,e){return Gp(t,e)}containsElement(t,e){return $p(t,e)}query(t,e,n){return Hp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},l=s.filter(t=>t instanceof Ig);dm(n,r)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=dg(t,e=fm(t,e=e.map(t=>tm(t,!1)),u));return new Ig(t,e,a,c)}}function Ag(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}class kg extends ap{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Vt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?up(t):t;return Dg(this._renderer,null,e,"register",[n]),new Ng(e,this._renderer)}}class Ng extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Og(this._id,t,e||{},this._renderer)}}class Og{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Dg(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function Dg(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}class Rg{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Pg("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new Mg(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class Pg{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Mg extends Pg{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return"@"!=i.charAt(0)&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}class Lg extends hg{constructor(t,e,n){super(t.body,e,n)}}function Vg(){return"function"==typeof Ag()?new xg:new Tg}function Fg(){return new Um}function Ug(t,e,n){return new Rg(t,e,n)}const jg=new Et("AnimationModuleType");class qg{}var Bg=Yn({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function zg(t){return Qs(0,[(t()(),Rs(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),Rs(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(t()(),Rs(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),Rs(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),Rs(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(t()(),Rs(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(t()(),Rs(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),Rs(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),Rs(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function Gg(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),zs(null,0)],null,null)}function $g(t){return Qs(0,[(t()(),Rs(0,0,null,null,3,null,null,null,null,null,null,null)),zs(null,2),(t()(),Rs(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),$s(3,null,["",""]))],null,(function(t,e){t(e,3,0,e.component._control.placeholder)}))}function Hg(t){return Qs(0,[zs(null,3),(t()(),Ds(0,null,null,0))],null,null)}function Wg(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),$s(-1,null,[" *"]))],null,null)}function Qg(t){return Qs(0,[(t()(),Rs(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],(function(t,e,n){var r=!0;return"cdkObserveContent"===e&&(r=!1!==t.component.updateOutlineGap()&&r),r}),null,null)),ni(1,16384,null,0,Pa,[],{ngSwitch:[0,"ngSwitch"]},null),ni(2,1196032,null,0,Sp,[Cp,un,Wi],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(t()(),Ds(16777216,null,null,1,null,$g)),ni(4,278528,null,0,Ma,[Pn,Dn,Pa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ds(16777216,null,null,1,null,Hg)),ni(6,278528,null,0,Ma,[Pn,Dn,Pa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ds(16777216,null,null,1,null,Wg)),ni(8,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,2,0,"outline"!=n.appearance),t(e,4,0,!1),t(e,6,0,!0),t(e,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}),(function(t,e){var n=e.component;t(e,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)}))}function Kg(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),zs(null,4)],null,null)}function Yg(t){return Qs(0,[(t()(),Rs(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(t()(),Rs(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,1,0,"accent"==n.color,"warn"==n.color)}))}function Jg(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),zs(null,5)],null,(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function Zg(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),$s(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)}))}function Xg(t){return Qs(0,[(t()(),Rs(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),Ds(16777216,null,null,1,null,Zg)),ni(2,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),zs(null,6),(t()(),Rs(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),zs(null,7)],(function(t,e){t(e,2,0,e.component.hintLabel)}),(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function ty(t){return Qs(2,[Fs(671088640,1,{underlineRef:0}),Fs(402653184,2,{_connectionContainerRef:0}),Fs(671088640,3,{_inputContainerRef:0}),Fs(671088640,4,{_label:0}),(t()(),Rs(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),Rs(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==(i._control.onContainerClick&&i._control.onContainerClick(n))&&r),r}),null,null)),(t()(),Ds(16777216,null,null,1,null,zg)),ni(7,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Ds(16777216,null,null,1,null,Gg)),ni(9,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Rs(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),zs(null,1),(t()(),Rs(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(t()(),Ds(16777216,null,null,1,null,Qg)),ni(14,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Ds(16777216,null,null,1,null,Kg)),ni(16,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Ds(16777216,null,null,1,null,Yg)),ni(18,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Rs(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),ni(20,16384,null,0,Pa,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),Ds(16777216,null,null,1,null,Jg)),ni(22,278528,null,0,Ma,[Pn,Dn,Pa],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),Ds(16777216,null,null,1,null,Xg)),ni(24,278528,null,0,Ma,[Pn,Dn,Pa],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){var n=e.component;t(e,7,0,"outline"==n.appearance),t(e,9,0,n._prefixChildren.length),t(e,14,0,n._hasFloatingLabel()),t(e,16,0,n._suffixChildren.length),t(e,18,0,"outline"!=n.appearance),t(e,20,0,n._getDisplayedMessages()),t(e,22,0,"error"),t(e,24,0,"hint")}),null)}const ey=Yd({passive:!0});let ny=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ja;const e=Pd(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const r=new T,i="cdk-text-field-autofilled",s=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",s,ey),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",s,ey)}}),r.asObservable()}stopMonitoring(t){const e=Pd(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275prov=ut({factory:function(){return new t(kt($d),kt(Wi))},token:t,providedIn:"root"}),t})();class ry{}const iy=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let sy=0;class oy{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const ay=Wf(oy);class uy extends ay{constructor(t,e,n,r,i,s,o,a,u){super(s,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._uid=`mat-input-${sy++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new T,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>Qd().has(t));const l=this._elementRef.nativeElement;this._inputValueAccessor=o||l,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===l.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=l.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Rd(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Rd(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&Qd().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Rd(t)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(iy.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}class ly{}const cy=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class hy{constructor(t){this._elementRef=t}}const dy=$f(Gf(Hf(hy)));class fy extends dy{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of cy)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color="accent")}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}class py{}var my=Yn({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],data:{}});function gy(t){return Qs(2,[Fs(671088640,1,{ripple:0}),(t()(),Rs(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),zs(null,0),(t()(),Rs(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),ni(4,212992,[[1,4]],0,ep,[un,Wi,$d,[2,tp],[2,jg]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),Rs(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())}),(function(t,e){var n=e.component;t(e,3,0,n.isRoundButton||n.isIconButton,Hr(e,4).unbounded)}))}var yy=n("mrSG");class vy{constructor(t,e){this.router=t,this.roomService=e}ngOnInit(){}createRoom(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){const t=yield this.roomService.createRoom();this.router.navigate([`/room/${t}`])}))}joinRoom(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){localStorage.removeItem("uno-client-id"),this.router.navigate([`/room/${this.roomId}`])}))}}function by(t,e){return function(t,e=Ud){return new _(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),function(){null!=r&&r()}})}(t,e)}function _y(t,e){return by(t,e).pipe(V(t=>({payload:t,type:"query"})))}let wy=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return $a(this.value);case"E":return t=this.error,new _(e=>e.error(t));case"C":return Za()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function Ey(t,e=0){return function(n){return n.lift(new Cy(t,e))}}class Cy{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Sy(t,this.scheduler,this.delay))}}class Sy extends p{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Sy.dispatch,this.delay,new Ty(t,this.destination)))}_next(t){this.scheduleMessage(wy.createNext(t))}_error(t){this.scheduleMessage(wy.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(wy.createComplete()),this.unsubscribe()}}class Ty{constructor(t,e){this.notification=t,this.destination=e}}function Iy(t,e){return _y(t,e).pipe(V(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function xy(t,e,n){return _y(t,n).pipe(V(t=>t.payload.docChanges()),Nu((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),V(t=>t.map(t=>({type:t.type,payload:t}))))}function Ay(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class ky{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?Iy(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,V(e=>e.filter(e=>t.indexOf(e.type)>-1)),eu(t=>t.length>0)):Iy(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Nu((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ay(t);return xy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return _y(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,V(e=>e.payload.docs.map(e=>t.idField?Object.assign({},e.data(),{[t.idField]:e.id}):e.data())))}get(t){return q(this.query.get(t)).pipe(Ey(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ny(this.ref.doc(t),this.afs)}}class Ny{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=hv(n,e);return new ky(r,i,this.afs)}snapshotChanges(){return by(this.ref,this.afs.schedulers.outsideAngular).pipe(V(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(V(t=>t.payload.data()))}get(t){return q(this.ref.get(t)).pipe(Ey(this.afs.schedulers.insideAngular))}}class Oy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Iy(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,V(e=>e.filter(e=>t.indexOf(e.type)>-1)),eu(t=>t.length>0)):Iy(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Nu((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ay(t);return xy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return _y(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,V(t=>t.payload.docs.map(t=>t.data())))}get(t){return q(this.query.get(t)).pipe(Ey(this.afs.schedulers.insideAngular))}}class Dy extends Ld{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class Ry extends Fd{}const Py=new Ry(Dy);let My=1;const Ly=(()=>Promise.resolve())(),Vy={};function Fy(t){return t in Vy&&(delete Vy[t],!0)}const Uy={setImmediate(t){const e=My++;return Vy[e]=!0,Ly.then(()=>Fy(e)&&t()),e},clearImmediate(t){Fy(t)}};class jy extends Ld{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Uy.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Uy.clearImmediate(e),t.scheduled=void 0)}}class qy extends Fd{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const By=new qy(jy);class zy extends _{constructor(t,e=0,n=By){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(!u(r=e)&&r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=By)}static create(t,e=0,n=By){return new zy(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(zy.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class Gy{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new zy(e,this.delay,this.scheduler).subscribe(t)}}function $y(){}class Hy{constructor(t,e=Py){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class Wy{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$y,{},$y,$y)),e.pipe(Mu(n,n,n)).subscribe(t).add(n)}unscheduleTask(){null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)}}class Qy{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Hy(Zone.current)),this.insideAngular=t.run(()=>new Hy(Zone.current,Ud))}}var Ky,Yy=n("Wcq6"),Jy=n.n(Yy);const Zy=new Et("angularfire2.app.options"),Xy=new Et("angularfire2.app.nameOrConfig"),tv=Zy,ev=Xy;class nv{}const rv=new mn("5.4.2");function iv(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",Jy.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>Jy.a.initializeApp(t,r))}let sv=Ky=class{constructor(t){Jy.a.registerVersion&&(Jy.a.registerVersion("angularfire",rv.full,t.toString()),Jy.a.registerVersion("angular",gn.full))}static initializeApp(t,e){return{ngModule:Ky,providers:[{provide:tv,useValue:t},{provide:ev,useValue:e}]}}};const ov=new Et("angularfire2.enableFirestorePersistence"),av=new Et("angularfire2.firestore.persistenceSettings"),uv=new Et("angularfire2.firestore.settings"),lv=parseInt(Jy.a.SDK_VERSION.split(".")[0]),cv=lv<5||5==lv&&parseInt(Jy.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function hv(t,e=(t=>t)){return{query:e(t),ref:t}}let dv=class{constructor(t,e,n,r,i,s,o){this.schedulers=new Qy(s),this.keepUnstableUntilFirst=function(t,e){return function(n){return Ba(e)&&(n=n.lift(new Wy(t.ngZone))),n.pipe(function(t,e=0){return function(n){return n.lift(new Gy(t,e))}}(t.outsideAngular),Ey(t.insideAngular))}}(this.schedulers,i),this.firestore=s.runOutsideAngular(()=>{const n=iv(t,s,e).firestore();return n.settings(r||cv),n}),this.persistenceEnabled$=n&&!Ba(i)?s.runOutsideAngular(()=>{try{return q(this.firestore.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(t){return $a(!1)}}):$a(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=hv(n,e);return new ky(r,i,this)}collectionGroup(t,e){if(lv<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Oy(n(r),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new Ny(e,this)}createId(){return this.firestore.collection("_").doc().id}},fv=(()=>{class t{constructor(t){this.roomsCOllection=t.collection("rooms"),this.rooms$=this.roomsCOllection.valueChanges()}createRoom(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){return(yield this.roomsCOllection.add({})).id}))}}return t.\u0275prov=ut({factory:function(){return new t(kt(dv))},token:t,providedIn:"root"}),t})();var pv=Yn({encapsulation:0,styles:[['body[_ngcontent-%COMP%]{background-image:"url(/back.jpg)"}.container[_ngcontent-%COMP%]{width:200px;margin:0 auto;padding-top:100px}.container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:6px}']],data:{}});function mv(t){return Qs(0,[(t()(),Rs(0,0,null,null,31,"div",[["class","container"]],null,null,null,null,null)),(t()(),Rs(1,0,null,null,30,"form",[["class","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,e,n){var r=!0;return"submit"===e&&(r=!1!==Hr(t,3).onSubmit(n)&&r),"reset"===e&&(r=!1!==Hr(t,3).onReset()&&r),r}),null,null)),ni(2,16384,null,0,Id,[],null,null),ni(3,4210688,null,0,_d,[[8,null],[8,null]],null,null),ri(2048,null,Vh,null,[_d]),ni(5,16384,null,0,Bh,[[4,Vh]],null,null),(t()(),Rs(6,0,null,null,19,"mat-form-field",[["appearance","standard"],["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,ty,Bg)),ri(6144,null,bp,null,[_p]),ni(8,7520256,null,9,_p,[un,ke,[2,rp],[2,xp],[2,vp],$d,Wi,[2,jg]],{appearance:[0,"appearance"]},null),Fs(603979776,1,{_controlNonStatic:0}),Fs(335544320,2,{_controlStatic:0}),Fs(603979776,3,{_labelChildNonStatic:0}),Fs(335544320,4,{_labelChildStatic:0}),Fs(603979776,5,{_placeholderChild:0}),Fs(603979776,6,{_errorChildren:1}),Fs(603979776,7,{_hintChildren:1}),Fs(603979776,8,{_prefixChildren:1}),Fs(603979776,9,{_suffixChildren:1}),(t()(),Rs(18,0,null,1,7,"input",[["autocomplete","off"],["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["name","roomId"],["placeholder","\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(t,e,n){var r=!0,i=t.component;return"input"===e&&(r=!1!==Hr(t,19)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==Hr(t,19).onTouched()&&r),"compositionstart"===e&&(r=!1!==Hr(t,19)._compositionStart()&&r),"compositionend"===e&&(r=!1!==Hr(t,19)._compositionEnd(n.target.value)&&r),"blur"===e&&(r=!1!==Hr(t,24)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==Hr(t,24)._focusChanged(!0)&&r),"input"===e&&(r=!1!==Hr(t,24)._onInput()&&r),"ngModelChange"===e&&(r=!1!==(i.roomId=n)&&r),r}),null,null)),ni(19,16384,null,0,Mh,[dn,un,[2,Ph]],null,null),ri(1024,null,Rh,(function(t){return[t]}),[Mh]),ni(21,671744,null,0,Td,[[2,Vh],[8,null],[8,null],[6,Rh]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),ri(2048,null,Uh,null,[Td]),ni(23,16384,null,0,qh,[[4,Uh]],null,null),ni(24,999424,null,0,uy,[un,$d,[6,Uh],[2,_d],[2,Ad],Kf,[8,null],ny,Wi],{placeholder:[0,"placeholder"]},null),ri(2048,[[1,4],[2,4]],fp,null,[uy]),(t()(),Rs(26,0,null,null,2,"button",[["class","mat-focus-indicator"],["color","primary"],["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.joinRoom()&&r),r}),gy,my)),ni(27,180224,null,0,fy,[un,Xd,[2,jg]],{disabled:[0,"disabled"],color:[1,"color"]},null),(t()(),$s(-1,0,[" \u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0435\u043d\u0438\u0442\u0441\u044f "])),(t()(),Rs(29,0,null,null,2,"button",[["class","mat-focus-indicator"],["color","primary"],["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.createRoom()&&r),r}),gy,my)),ni(30,180224,null,0,fy,[un,Xd,[2,jg]],{color:[0,"color"]},null),(t()(),$s(-1,0,[" \u0421\u043e\u0437\u0434\u0430\u0442\u044c "]))],(function(t,e){var n=e.component;t(e,8,0,"standard"),t(e,21,0,"roomId",n.roomId),t(e,24,0,"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b"),t(e,27,0,!n.roomId,"primary"),t(e,30,0,"primary")}),(function(t,e){t(e,1,0,Hr(e,5).ngClassUntouched,Hr(e,5).ngClassTouched,Hr(e,5).ngClassPristine,Hr(e,5).ngClassDirty,Hr(e,5).ngClassValid,Hr(e,5).ngClassInvalid,Hr(e,5).ngClassPending),t(e,6,1,["standard"==Hr(e,8).appearance,"fill"==Hr(e,8).appearance,"outline"==Hr(e,8).appearance,"legacy"==Hr(e,8).appearance,Hr(e,8)._control.errorState,Hr(e,8)._canLabelFloat,Hr(e,8)._shouldLabelFloat(),Hr(e,8)._hasFloatingLabel(),Hr(e,8)._hideControlPlaceholder(),Hr(e,8)._control.disabled,Hr(e,8)._control.autofilled,Hr(e,8)._control.focused,"accent"==Hr(e,8).color,"warn"==Hr(e,8).color,Hr(e,8)._shouldForward("untouched"),Hr(e,8)._shouldForward("touched"),Hr(e,8)._shouldForward("pristine"),Hr(e,8)._shouldForward("dirty"),Hr(e,8)._shouldForward("valid"),Hr(e,8)._shouldForward("invalid"),Hr(e,8)._shouldForward("pending"),!Hr(e,8)._animationsEnabled]),t(e,18,1,[Hr(e,23).ngClassUntouched,Hr(e,23).ngClassTouched,Hr(e,23).ngClassPristine,Hr(e,23).ngClassDirty,Hr(e,23).ngClassValid,Hr(e,23).ngClassInvalid,Hr(e,23).ngClassPending,Hr(e,24)._isServer,Hr(e,24).id,Hr(e,24).placeholder,Hr(e,24).disabled,Hr(e,24).required,Hr(e,24).readonly&&!Hr(e,24)._isNativeSelect||null,Hr(e,24)._ariaDescribedby||null,Hr(e,24).errorState,Hr(e,24).required.toString()]),t(e,26,0,Hr(e,27).disabled||null,"NoopAnimations"===Hr(e,27)._animationMode),t(e,29,0,Hr(e,30).disabled||null,"NoopAnimations"===Hr(e,30)._animationMode)}))}function gv(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"app-home",[],null,null,null,mv,pv)),ni(1,114688,null,0,vy,[rh,fv],null,null)],(function(t,e){t(e,1,0)}),null)}var yv=Mr("app-home",vy,gv,{},{},[]);function vv(t){return"function"==typeof t}const bv=(t,e="ngOnDestroy")=>n=>{const r=t[e];if(!1===vv(r))throw new Error(`${t.constructor.name} is using untilDestroyed but doesn't implement ${e}`);return t.__takeUntilDestroy||(t.__takeUntilDestroy=new T,t[e]=function(){vv(r)&&r.apply(this,arguments),t.__takeUntilDestroy.next(!0),t.__takeUntilDestroy.complete()}),n.pipe(ip(t.__takeUntilDestroy))},_v={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302"]}]},wv={audio:!0,video:{width:{exact:320},height:{exact:240}}};class Ev{constructor(t){this.userId=t,this.remote=new RTCPeerConnection(_v),this.remote.ontrack=e=>{console.log("ontrack",t,e.streams),this.stream=e.streams[0]}}}class Cv{constructor(t){this.id=t,this.connections=[]}getConnection(t){return this.connections.find(e=>e.userId==t)||this.createConnection(t)}createConnection(t){const e=new Ev(t);return this.connections.push(e),e}addTracks(t){this.stream.getTracks().forEach(e=>t.addTrack(e,this.stream))}}class Sv{constructor(t,e){this.roomService=t,this.activeRoute=e,this.connections=[]}ngOnDestroy(){}ngOnInit(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){this.roomId=this.activeRoute.snapshot.paramMap.get("id"),this.roomService.init(this.roomId),this.onlineUsers$=this.roomService.users$,this.logging();const t=yield this.fetchUserId();this.user=new Cv(t),yield this.start(),this.roomService.userOffers(t).pipe(bv(this),V(t=>t.filter(t=>t.from!=this.user.id))).subscribe(t=>Object(yy.__awaiter)(this,void 0,void 0,(function*(){for(const e of t){const t=this.user.getConnection(e.from).remote;yield t.setRemoteDescription(e.description);const n=yield t.createAnswer();yield t.setLocalDescription(n),console.log(this.user.id,`got offer from ${e.from}`,e.description),console.log(this.user.id,"creating answer",t.localDescription,t.localDescription.toJSON()),this.roomService.createAnswer({to:e.from,from:this.user.id,description:t.localDescription.toJSON()})}})))}))}start(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){const t=yield navigator.mediaDevices.getUserMedia(wv);this.user.stream=t,this.muteAllVideos()}))}call(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){this.onlineUsers$.pipe(bv(this),V(t=>t.filter(t=>t.id!=this.user.id))).subscribe(t=>Object(yy.__awaiter)(this,void 0,void 0,(function*(){for(const e of t){const t=this.user.getConnection(e.id).remote;this.user.addTracks(t);const n=yield t.createOffer();t.setLocalDescription(n),console.log(this.user.id,`creating offer to ${e.id}`),yield this.roomService.createOffer({from:this.user.id,to:e.id,description:t.localDescription.toJSON()})}})))}))}hangup(){}muteAllVideos(){setTimeout(()=>{Array.from(document.getElementsByTagName("video")).forEach(t=>t.muted=!0)},100)}fetchUserId(){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){if(localStorage.getItem("uno-client-id"))return localStorage.getItem("uno-client-id");const t=yield this.roomService.joinRoom(this.roomId);return localStorage.setItem("uno-client-id",t),t}))}logging(){this.roomService.users$.pipe(bv(this)).subscribe(t=>{console.log("users",t)}),this.roomService.offers$.pipe(bv(this)).subscribe(t=>{console.log("offers",t)}),this.roomService.answers$.pipe(bv(this)).subscribe(t=>{console.log("answers",t)}),this.roomService.userJoined(this.roomId).pipe(bv(this)).subscribe(t=>{console.log("joind: ",t)})}}let Tv=(()=>{class t{constructor(t){this.firestore=t}init(t){this.room=this.firestore.doc(`rooms/${t}`),this.userCollection=this.room.collection("users"),this.offerCollection=this.room.collection("offers"),this.answerCollection=this.room.collection("answers"),this.users$=this.userCollection.valueChanges(),this.offers$=this.offerCollection.valueChanges(),this.answers$=this.answerCollection.valueChanges()}joinRoom(t){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){const e=yield this.firestore.collection(`rooms/${t}/users`).add({});return yield e.update({id:e.id}),e.id}))}userJoined(t){return this.firestore.collection(`rooms/${t}/users`).snapshotChanges()}userOffers(t){return this.room.collection("offers",e=>e.where("to","==",t)).valueChanges()}userAnswers(t){return this.room.collection("answer",e=>e.where("to","==",t)).valueChanges()}createOffer(t){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){const e=this.room.collection("offers",e=>e.where("from","==",t.from)&&e.where("to","==",t.to));e&&(yield e.get().toPromise()).forEach(t=>t.ref.delete());const n=yield this.offerCollection.add(t);return yield n.update({id:n.id}),n.id}))}createAnswer(t){return Object(yy.__awaiter)(this,void 0,void 0,(function*(){const e=this.room.collection("answers",e=>e.where("from","==",t.from)&&e.where("to","==",t.to));e&&(yield e.get().toPromise()).forEach(t=>t.ref.delete());const n=yield this.answerCollection.add(t);return yield n.update({id:n.id}),n.id}))}}return t.\u0275prov=ut({factory:function(){return new t(kt(dv))},token:t,providedIn:"root"}),t})();var Iv=Yn({encapsulation:0,styles:[[".room-container[_ngcontent-%COMP%]{display:flex}.room-container[_ngcontent-%COMP%]   .online-users[_ngcontent-%COMP%]{flex-grow:1}.room-container[_ngcontent-%COMP%]   .videos-contanier[_ngcontent-%COMP%]{flex-grow:8}.room-container[_ngcontent-%COMP%]   .users-container[_ngcontent-%COMP%]{padding:10px;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.room-container[_ngcontent-%COMP%]   .users-container[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{margin:10px}.room-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{padding:10px;display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:center}.room-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.room-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px;font-size:1.5em}"]],data:{}});function xv(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),$s(1,null,[" "," "]))],null,(function(t,e){t(e,1,0,e.context.$implicit.name||e.context.$implicit.id)}))}function Av(t){return Qs(0,[(t()(),Rs(0,0,null,null,0,"video",[["autoplay",""],["controls",""],["muted",""]],[[8,"srcObject",0]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.component.user.stream)}))}function kv(t){return Qs(0,[(t()(),Rs(0,0,null,null,0,"video",[["autoplay",""],["controls",""],["muted",""]],[[8,"srcObject",0]],null,null,null,null))],null,(function(t,e){t(e,0,0,e.parent.context.$implicit.stream)}))}function Nv(t){return Qs(0,[(t()(),Rs(0,0,null,null,4,"div",[["class","user-details"]],null,null,null,null,null)),(t()(),Ds(16777216,null,null,1,null,kv)),ni(2,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Rs(3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),$s(4,null,["",""]))],(function(t,e){t(e,2,0,e.context.$implicit.stream)}),(function(t,e){t(e,4,0,e.context.$implicit.userId)}))}function Ov(t){return Qs(0,[(t()(),Rs(0,0,null,null,7,"div",[["class","users-container"]],null,null,null,null,null)),(t()(),Rs(1,0,null,null,4,"div",[["class","user-details"]],null,null,null,null,null)),(t()(),Ds(16777216,null,null,1,null,Av)),ni(3,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Rs(4,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),$s(5,null,["",""])),(t()(),Ds(16777216,null,null,1,null,Nv)),ni(7,278528,null,0,Aa,[Pn,Dn,xn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,3,0,n.user.stream),t(e,7,0,n.user.connections)}),(function(t,e){var n=e.component;t(e,5,0,n.user.name||n.user.id)}))}function Dv(t){return Qs(0,[(t()(),Rs(0,0,null,null,16,"div",[["class","room-container"]],null,null,null,null,null)),(t()(),Rs(1,0,null,null,4,"div",[["class","online-users"]],null,null,null,null,null)),(t()(),Rs(2,0,null,null,3,"ul",[],null,null,null,null,null)),(t()(),Ds(16777216,null,null,2,null,xv)),ni(4,278528,null,0,Aa,[Pn,Dn,xn],{ngForOf:[0,"ngForOf"]},null),(e=131072,n=ja,r=[ke],ii(-1,e|=16,null,0,n,n,r)),(t()(),Rs(6,0,null,null,10,"div",[["class","videos-contanier"]],null,null,null,null,null)),(t()(),Ds(16777216,null,null,1,null,Ov)),ni(8,16384,null,0,Na,[Pn,Dn],{ngIf:[0,"ngIf"]},null),(t()(),Rs(9,0,null,null,7,"div",[["class","buttons-container"]],null,null,null,null,null)),(t()(),Rs(10,0,null,null,6,"div",[["class","buttons"]],null,null,null,null,null)),(t()(),Rs(11,0,null,null,2,"button",[["class","mat-focus-indicator"],["color","accent"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.call()&&r),r}),gy,my)),ni(12,180224,null,0,fy,[un,Xd,[2,jg]],{color:[0,"color"]},null),(t()(),Rs(13,0,null,0,0,"i",[["class","fa fa-phone"]],null,null,null,null,null)),(t()(),Rs(14,0,null,null,2,"button",[["class","mat-focus-indicator"],["color","warn"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.hangup()&&r),r}),gy,my)),ni(15,180224,null,0,fy,[un,Xd,[2,jg]],{color:[0,"color"]},null),(t()(),Rs(16,0,null,0,0,"i",[["class","fa fa-phone fa-phone-hangup"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,function(t,e,n,r){if(We.isWrapped(r)){r=We.unwrap(r);const e=t.def.nodes[4].bindingIndex+0,n=We.unwrap(t.oldValues[e]);t.oldValues[e]=new We(n)}return r}(e,0,0,Hr(e,5).transform(n.onlineUsers$))),t(e,8,0,n.user),t(e,12,0,"accent"),t(e,15,0,"warn")}),(function(t,e){t(e,11,0,Hr(e,12).disabled||null,"NoopAnimations"===Hr(e,12)._animationMode),t(e,14,0,Hr(e,15).disabled||null,"NoopAnimations"===Hr(e,15)._animationMode)}));var e,n,r}function Rv(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"app-room",[],null,null,null,Dv,Iv)),ni(1,245760,null,0,Sv,[Tv,Wl],null,null)],(function(t,e){t(e,1,0)}),null)}var Pv=Mr("app-room",Sv,Rv,{},{},[]),Mv=Yn({encapsulation:0,styles:[[""]],data:{}});function Lv(t){return Qs(0,[(t()(),Rs(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ni(1,212992,null,0,oh,[sh,Pn,rn,[8,null],ke],null,null)],(function(t,e){t(e,1,0)}),null)}function Vv(t){return Qs(0,[(t()(),Rs(0,0,null,null,1,"app-root",[],null,null,null,Lv,Mv)),ni(1,49152,null,0,ra,[],null,null)],null,null)}var Fv,Uv=Mr("app-root",ra,Vv,{},{},[]);n("6Joi");let jv=Fv=class{static enablePersistence(t){return{ngModule:Fv,providers:[{provide:ov,useValue:!0},{provide:av,useValue:t}]}}};class qv{}var Bv=ta(na,[ra],(function(t){return function(t){const e={},n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];s.token===Oe&&(r=s.value),1073741824&s.flags&&n.push(s.token),s.index=i,e[Kn(s.token)]=s}return{factory:null,providersByKey:e,providers:t,modules:n,scope:r}}([Ar(512,rn,sn,[[8,[Oh,yv,Pv,Uv]],[3,rn],Rt]),Ar(5120,Li,ks,[[3,Li]]),Ar(4608,Ta,Ia,[Li]),Ar(5120,vi,Ns,[Wi]),Ar(5120,ki,Ni,[]),Ar(5120,xn,xs,[]),Ar(5120,An,As,[]),Ar(4608,Lf,Vf,[oa]),Ar(6144,pn,null,[Lf]),Ar(4608,xf,kf,[]),Ar(5120,df,(function(t,e,n,r,i,s,o,a){return[new Tf(t,e,n),new Mf(r),new Nf(i,s,o,a)]}),[oa,Wi,Ri,oa,oa,xf,Mi,[2,Af]]),Ar(4608,ff,ff,[df,Wi]),Ar(135680,gf,gf,[oa]),Ar(4608,wf,wf,[ff,gf,ki]),Ar(5120,Kp,Vg,[]),Ar(5120,Fm,Fg,[]),Ar(4608,hg,Lg,[oa,Kp,Fm]),Ar(5120,cn,Ug,[wf,hg,Wi]),Ar(6144,mf,null,[gf]),Ar(4608,es,es,[Wi]),Ar(4608,ap,kg,[cn,oa]),Ar(4608,Jh,Jh,[]),Ar(4608,Nd,Nd,[]),Ar(5120,nv,iv,[Zy,Wi,[2,Xy]]),Ar(4608,dv,dv,[Zy,[2,Xy],[2,ov],[2,uv],Ri,Wi,[2,av]]),Ar(4608,Ep,Ep,[]),Ar(4608,Kf,Kf,[]),Ar(5120,Wl,Ch,[rh]),Ar(4608,ch,ch,[]),Ar(6144,uh,null,[ch]),Ar(135680,hh,hh,[rh,ps,zi,Re,uh]),Ar(4608,lh,lh,[]),Ar(5120,dh,vh,[rh,za,fh]),Ar(5120,xh,Ih,[Sh]),Ar(5120,Pi,(function(t){return[t]}),[xh]),Ar(1073742336,qa,qa,[]),Ar(1024,zt,Ff,[]),Ar(1024,as,(function(){return[gh()]}),[]),Ar(512,Sh,Sh,[Re]),Ar(1024,xi,(function(t,e){return[(n=t,lf("probe",hf),lf("coreTokens",Object.assign(Object.assign({},cf),(n||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>hf),Th(e)];var n}),[[2,as],Sh]),Ar(512,Ai,Ai,[[2,xi]]),Ar(131584,ds,ds,[Wi,Mi,Re,zt,rn,Ai]),Ar(1073742336,Os,Os,[ds]),Ar(1073742336,jf,jf,[[3,jf]]),Ar(1073742336,qg,qg,[]),Ar(1073742336,kd,kd,[]),Ar(1073742336,Od,Od,[]),Ar(1073742336,Dd,Dd,[]),Ar(1073742336,sv,sv,[Ri]),Ar(1073742336,jv,jv,[]),Ar(1073742336,Ap,Ap,[]),Ar(1073742336,zf,zf,[tf,[2,Bf],[2,oa]]),Ar(1073742336,Hd,Hd,[]),Ar(1073742336,np,np,[]),Ar(1073742336,py,py,[]),Ar(1073742336,ry,ry,[]),Ar(1073742336,Tp,Tp,[]),Ar(1073742336,wp,wp,[]),Ar(1073742336,ly,ly,[]),Ar(1024,ph,_h,[[3,rh]]),Ar(512,Tl,Il,[]),Ar(512,sh,sh,[]),Ar(256,fh,{},[]),Ar(1024,ga,bh,[aa,[2,va],fh]),Ar(512,wa,wa,[ga,aa]),Ar(512,zi,zi,[]),Ar(512,ps,ys,[zi,[2,ms]]),Ar(1024,Yc,(function(){return[[{path:"",component:vy},{path:"room/:id",component:Sv}]]}),[]),Ar(1024,rh,Eh,[Tl,sh,wa,Re,ps,zi,Yc,fh,[2,Zc],[2,Qc]]),Ar(1073742336,yh,yh,[[2,ph],[2,rh]]),Ar(1073742336,qv,qv,[]),Ar(1073742336,na,na,[]),Ar(256,Vi,"USD",[]),Ar(256,Oe,"root",[]),Ar(256,jg,"BrowserAnimations",[]),Ar(256,Zy,{apiKey:"AIzaSyB8OELF8OtaSi-hF8rJm3lzgBn5GOI6Yeo",authDomain:"uno-server-3000.firebaseapp.com",databaseURL:"https://uno-server-3000.firebaseio.com",projectId:"uno-server-3000",storageBucket:"uno-server-3000.appspot.com",messagingSenderId:"460750590702",appId:"1:460750590702:web:e38380af9f7ff3e2a699ff",measurementId:"G-1D1LTS2GWF"},[]),Ar(256,Xy,void 0,[])])}));(function(){if(te)throw new Error("Cannot enable prod mode after platform setup.");Xt=!1})(),Uf().bootstrapModuleFactory(Bv).catch(t=>console.error(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&a)<<2|l>>6,h=63&l;u||(h=64,o||(c=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return r.__extends(e,t),e}(Error),p=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?m(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new f(i,a),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function m(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function y(t){return JSON.parse(t)}var v=function(t){var e={},n={},r={},i="";try{var s=t.split(".");e=y(l(s[0])||""),n=y(l(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(o){}return{header:e,claims:n,data:r,signature:i}},b=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^a&(u^l),s=1518500249):(i=a^u^l,s=1859775393):r<60?(i=a&u|l&(a|u),s=2400959708):(i=a^u^l,s=3395469782);var h=(o<<5|o>>>27)+i+c+s+n[r]&4294967295;c=l,l=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),_=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}function E(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=p,e.FirebaseError=f,e.Sha1=b,e.assert=s,e.assertionError=o,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new _(t,e);return n.subscribe.bind(n)},e.decode=v,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=E,e.getUA=d,e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return d().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return d().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=v(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=y,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r];n(s[0],s[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(E(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(E(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(E(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);